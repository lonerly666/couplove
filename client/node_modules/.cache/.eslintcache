[{"C:\\Users\\PC\\myProject\\couplove\\client\\src\\index.js":"1","C:\\Users\\PC\\myProject\\couplove\\client\\src\\reportWebVitals.js":"2","C:\\Users\\PC\\myProject\\couplove\\client\\src\\App.js":"3","C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\UserProfileForm.js":"4","C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\Home.js":"5","C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\Login.js":"6","C:\\Users\\PC\\temp\\couplove\\client\\src\\index.js":"7","C:\\Users\\PC\\temp\\couplove\\client\\src\\App.js":"8","C:\\Users\\PC\\temp\\couplove\\client\\src\\reportWebVitals.js":"9","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Login.js":"10","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Home.js":"11","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\UserProfileForm.js":"12","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ActivityPane.js":"13","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatRoom.js":"14","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Navbar.js":"15","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\InputBox.js":"16","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatNav.js":"17","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatBubble.js":"18","C:\\Users\\PC\\temp\\couplove\\client\\src\\SocketContext.js":"19","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoCall.js":"20","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoRespond.js":"21","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Cinema.js":"22","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoList.js":"23","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoUploadDiv.js":"24"},{"size":511,"mtime":1621334728533,"results":"25","hashOfConfig":"26"},{"size":375,"mtime":1621334728534,"results":"27","hashOfConfig":"26"},{"size":513,"mtime":1621337766271,"results":"28","hashOfConfig":"26"},{"size":5186,"mtime":1621358353494,"results":"29","hashOfConfig":"26"},{"size":1539,"mtime":1621292768417,"results":"30","hashOfConfig":"26"},{"size":628,"mtime":1621292768418,"results":"31","hashOfConfig":"26"},{"size":569,"mtime":1621916417416,"results":"32","hashOfConfig":"33"},{"size":950,"mtime":1622245032015,"results":"34","hashOfConfig":"33"},{"size":375,"mtime":1621457847902,"results":"35","hashOfConfig":"33"},{"size":628,"mtime":1621457847900,"results":"36","hashOfConfig":"33"},{"size":4044,"mtime":1622037440796,"results":"37","hashOfConfig":"33"},{"size":6718,"mtime":1622109545439,"results":"38","hashOfConfig":"33"},{"size":439,"mtime":1621907614420,"results":"39","hashOfConfig":"33"},{"size":4316,"mtime":1622107105899,"results":"40","hashOfConfig":"33"},{"size":347,"mtime":1621721588714,"results":"41","hashOfConfig":"33"},{"size":609,"mtime":1621813984363,"results":"42","hashOfConfig":"33"},{"size":1768,"mtime":1621953139852,"results":"43","hashOfConfig":"33"},{"size":700,"mtime":1621913248304,"results":"44","hashOfConfig":"33"},{"size":6304,"mtime":1622107659057,"results":"45","hashOfConfig":"33"},{"size":1980,"mtime":1622031337846,"results":"46","hashOfConfig":"33"},{"size":1311,"mtime":1622107183047,"results":"47","hashOfConfig":"33"},{"size":9172,"mtime":1622208336138,"results":"48","hashOfConfig":"33"},{"size":1712,"mtime":1622193034443,"results":"49","hashOfConfig":"33"},{"size":2857,"mtime":1622201196975,"results":"50","hashOfConfig":"33"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},"ddlq0p",{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"53"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"60","messages":"61","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"62","usedDeprecatedRules":"53"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"53"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},"1v89za1",{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"65","usedDeprecatedRules":"68"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"77","usedDeprecatedRules":"68"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"80","usedDeprecatedRules":"68"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"68"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86","usedDeprecatedRules":"68"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"68"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"96","usedDeprecatedRules":"68"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"99","usedDeprecatedRules":"68"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"102","usedDeprecatedRules":"68"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"105","usedDeprecatedRules":"68"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"108","usedDeprecatedRules":"68"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111","usedDeprecatedRules":"68"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"68"},"C:\\Users\\PC\\myProject\\couplove\\client\\src\\index.js",[],["114","115"],"C:\\Users\\PC\\myProject\\couplove\\client\\src\\reportWebVitals.js",[],"C:\\Users\\PC\\myProject\\couplove\\client\\src\\App.js",[],"C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\UserProfileForm.js",["116","117"],"C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\Home.js",["118","119","120","121","122"],"import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    minWidth: \"100%\",\r\n  },\r\n  large: {\r\n    width: theme.spacing(17),\r\n    height: theme.spacing(17),\r\n  },\r\n}));\r\nexport default function Home()\r\n{\r\n  const [userInfo,setUserInfo] = useState();\r\n  const classes = useStyles();\r\n  const [imgUrl,setImgUrl] = useState();\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn === false) {\r\n            window.open('/login', '_self');\r\n          } \r\n          else if(res.user.nickname===undefined||res.user.nickname===null||res.user.nickname===\"\")\r\n          {\r\n            window.open('/userProfileForm','_self');\r\n          }\r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      });\r\n\r\n      function handleLogout()\r\n      {\r\n        window.location.href = \"/auth/logout\";\r\n      }\r\n\r\n    return <div>\r\n        <ReactAvatar\r\n            style={{borderStyle: \"solid\", borderColor: \"#F0F2F5\", borderWidth: \"2px\", margin: \"auto\"}}\r\n            alt=\"\"\r\n            src =\"/gridFs/getProfile\"\r\n            className={classes.large} \r\n         />\r\n        <input type=\"submit\" value=\"logout\" onClick={handleLogout}/>\r\n    </div>\r\n}","C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\Login.js",["123"],"import Button from '@material-ui/core/Button';\r\nimport '../css/login.css';\r\n\r\nexport default function Login(){\r\n\r\n\r\n    function handleGoogleClick()\r\n    {\r\n        window.location.href = \"/auth/google\";\r\n    }\r\n\r\n    return <div>\r\n        <div className=\"login-page\">\r\n        <div className=\"title\"><h1>Welcome to Couplove!</h1></div>\r\n        <Button variant=\"contained\" onClick={handleGoogleClick} className=\"login-btn\">\r\n            <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" className=\"g-logo\"/>\r\n            &nbsp;&nbsp;Login With Google</Button>\r\n        </div>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\index.js",[],["124","125"],"C:\\Users\\PC\\temp\\couplove\\client\\src\\App.js",[],"C:\\Users\\PC\\temp\\couplove\\client\\src\\reportWebVitals.js",[],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Login.js",["126"],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Home.js",["127","128","129","130","131","132","133","134","135","136","137","138"],"import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Activity from './ActivityPane';\r\nimport Navbar from '../components/Navbar';\r\nimport '../css/home.css';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    minWidth: \"100%\",\r\n  },\r\n  large: {\r\n    width: theme.spacing(17),\r\n    height: theme.spacing(17),\r\n  },\r\n}));\r\nexport default function Home()\r\n{\r\n  const [userInfo,setUserInfo] = useState();\r\n  const [havePartner,setHavePartner] = useState(false);\r\n  const [roomId,setRoomId] = useState();\r\n  const [reqId,setReqId] = useState();\r\n  const [requestList,setRequestList]= useState([]);\r\n  const formRef = useRef();\r\n  const acceptRef = useRef();\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn===false)\r\n          {\r\n             window.open('/login','_self');\r\n          }\r\n          else\r\n          {\r\n            if(res.user.nickname===undefined)\r\n            {\r\n              window.open('/userProfileForm','_self');\r\n            }\r\n            else\r\n            {\r\n              axios({\r\n                method:'get',\r\n                url:'/user/getRequest',\r\n                headers: {'Content-Type': 'multipart/form-data'}\r\n              })\r\n              .then(res=>res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                let temp=[];\r\n                res.requests.map(list=>{\r\n                  temp.push({...list});\r\n                })\r\n                setRequestList(temp);\r\n              })\r\n              if(res.user.partner!==null)\r\n              {\r\n                setHavePartner(true); \r\n              }\r\n              setUserInfo({...res.user});\r\n            }\r\n          } \r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[]);\r\n\r\n      function handleLogout()\r\n      {\r\n        window.location.href = \"/auth/logout\";\r\n      }\r\n      function handleChatClick()\r\n      {\r\n        window.open('/chatRoom','_self');\r\n      }\r\n\r\n      function handleSendReq(event)\r\n      {\r\n        event.preventDefault();\r\n        const formData = new FormData(formRef.current);\r\n        axios({\r\n          method:'post',\r\n          url:'/user/sendRequest',\r\n          data:formData,\r\n          headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          if(res.isSent)\r\n          {\r\n             alert(\"sent!\");\r\n          }\r\n          else\r\n          {\r\n            alert(res.status);\r\n            console.log(res)\r\n          }\r\n        })\r\n      }\r\n      requestList.map(list=>{\r\n        console.log(list);\r\n      })\r\n\r\n      function acceptPartner(event)\r\n      {\r\n        event.preventDefault();\r\n        const formData = new FormData(acceptRef.current);\r\n        axios({\r\n          method:'post',\r\n          url:'/user/acceptRequest',\r\n          data:formData,\r\n          headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          if(res.result)\r\n          {\r\n            console.log(res);\r\n          }\r\n        })\r\n      }\r\n    return <div>\r\n      <Navbar handleSendReq={handleSendReq} formRef = {formRef}/>\r\n      \r\n\r\n        <Activity title={\"Chat\"} desc={\"Chat with your loved ones\"} link={\"/chatRoom\"} />\r\n        <Activity title={\"Cinema\"} desc={\"Watch Movie Together!\"} link ={\"/cinema\"}/>\r\n        <input type=\"submit\" value=\"logout\" onClick={handleLogout}/>\r\n\r\n        <form onSubmit={acceptPartner} ref={acceptRef}>\r\n        <input type=\"text\" id=\"reqId\" name=\"senderId\"/>\r\n        <input type=\"submit\"/>\r\n        </form>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\UserProfileForm.js",["139","140","141"],"import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport '../css/profileInfo.css';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nconst genders = [\r\n    {\r\n      value: 'male',\r\n      label: 'male',\r\n    },\r\n    {\r\n      value: 'female',\r\n      label: 'female',\r\n    },\r\n  ];\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n      marginTop:20,\r\n      minWidth: \"90%\",\r\n    },\r\n  }));\r\nexport default function UserProfileForm()\r\n{\r\n    const [nickname,setNickname] = useState(\"\");\r\n    const [bio,setBio] = useState(\"\");\r\n    const [croppedUrl, setCroppedUrl] = useState();\r\n    const [uploaded,setUploaded] = useState(false);\r\n    const [dob,setDob] = useState(new Date());\r\n    const [gender,setGender] = useState('male');\r\n    const [newProfile,setNewProfile]=useState(false);\r\n    const [partner,setPartner] = useState();\r\n    const formRef = useRef();\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn === false) {\r\n            window.open('/login', '_self');\r\n          } \r\n          else if(res.user.nickname)\r\n          {\r\n            setNickname(res.user.nickname);\r\n            setDob(res.user.dateOfBirth);\r\n            setGender(res.user.gender);\r\n            setBio(res.user.bio);\r\n            if(res.user.partner!==null)\r\n            {\r\n            setPartner(res.user.partner);\r\n            }\r\n          }\r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[]);\r\n      useEffect(() => {\r\n        const ac = new AbortController();\r\n      axios({\r\n        method:'get',\r\n        url:'/gridFs/checkExists',\r\n        headers: {'Content-Type': 'multipart/form-data'}\r\n      })\r\n      .then(res=>res.data)\r\n      .catch(err=>console.log(err))\r\n      .then(res=>{\r\n        if(res===true)\r\n        {\r\n           document.getElementById(\"overlay\").style.visibility=\"hidden\";\r\n        }\r\n      })\r\n      return function cancel() {\r\n        ac.abort()\r\n      }\r\n    },[]);\r\n      if(uploaded)\r\n      {\r\n        const reader = new FileReader();\r\n        reader.onload = function(event){\r\n          if(event.target.result===null)\r\n          {\r\n            return;\r\n          }\r\n          document.getElementById(\"avatarImg\").setAttribute(\"src\",event.target.result);\r\n        }\r\n        reader.readAsDataURL(croppedUrl);\r\n       \r\n      }\r\n      async function handleSubmit(event) {\r\n        if(uploaded){axios.get('/gridFs/deleteImg');}\r\n        event.preventDefault();\r\n        const formData = new FormData(formRef.current); \r\n        partner&&formData.append('partner',partner);\r\n         await  axios({\r\n            method:'post',\r\n            url:'/user/info',\r\n            data:formData,\r\n            headers: {'Content-Type': 'multipart/form-data'}\r\n          })\r\n          window.location.href = \"/\";\r\n      }\r\n\r\n      function toggleNewFile(event)\r\n      {\r\n        const file = event.target.files[0];\r\n         if(file===undefined)\r\n        {\r\n          return;\r\n        }\r\n        else\r\n        {\r\n         document.getElementById(\"overlay\").style.visibility=\"hidden\";\r\n         setCroppedUrl(file);\r\n         setUploaded(true);\r\n        }\r\n      }\r\n      \r\n      function uploadFile()\r\n      {\r\n         document.getElementById(\"file\").click();\r\n      }\r\n\r\n    return <div className=\"infoForm\" id=\"infoForm\">\r\n        \r\n    <form onSubmit={handleSubmit} ref={formRef}>\r\n      <div id=\"avatar\">\r\n       <ReactAvatar\r\n        id=\"overlay\"\r\n      />\r\n       <img src={uploaded?\"\":\"/gridFs/getProfile\"} id=\"avatarImg\"/>\r\n      </div>\r\n      <div className=\"fileIpt\">\r\n          <input type=\"file\" name=\"file\" id=\"file\" onChange={toggleNewFile}/>\r\n          <IconButton\r\n          id=\"uploadBtn\"\r\n          onClick={uploadFile}\r\n          >\r\n            <AddAPhotoIcon/>\r\n          </IconButton>\r\n      </div>\r\n          <br/>\r\n          <div className=\"infoDiv\">\r\n            <TextField\r\n            id=\"nickname\"\r\n            className=\"inputFields\"\r\n            label=\"Nickname\"\r\n            variant=\"outlined\"\r\n            name=\"nickname\"\r\n            value={nickname}\r\n            onChange={(e) => {setNickname(e.target.value)}}/>\r\n            <br/>\r\n            <FormControl variant=\"outlined\" className={classes.formControl}>\r\n            <InputLabel id=\"demo-simple-select-outlined-label\">Gender</InputLabel>\r\n            <Select\r\n              labelId=\"demo-simple-select-outlined-label\"\r\n              id=\"demo-simple-select-outlined\"\r\n              value={gender}\r\n              onChange={(e) => {setGender(e.target.value)}}\r\n              label=\"Gender\"\r\n              name=\"gender\"\r\n            >\r\n              {genders.map((option) => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl> \r\n          <br />\r\n          <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfBirth\"\r\n              label=\"Date of birth (mm/dd/yyyy)\"\r\n              name=\"dateOfBirth\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={dob}\r\n              onChange={(date) => {setDob(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>\r\n          \r\n          <br/>    \r\n        \r\n     \r\n          <TextField\r\n            id=\"bio\"\r\n            label=\"Bio\"\r\n            variant=\"outlined\"\r\n            name=\"bio\"\r\n            className=\"inputFields\"\r\n            value={bio}\r\n            onChange={(e) => {setBio(e.target.value)}}/>\r\n            <br/>\r\n            \r\n          <Button type=\"submit\" id=\"submitInfo\">\r\n              submit\r\n          </Button>\r\n          </div>\r\n        </form>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ActivityPane.js",["142"],"import Button from '@material-ui/core/Button';\r\nimport { useContext } from 'react';\r\n\r\n\r\nexport default function ActivityPane(props)\r\n{\r\n    const \r\n    {\r\n        title,\r\n        desc,\r\n        link,\r\n    }=props;\r\n\r\n    return<div>\r\n        <h1>{title}</h1>\r\n        <p>{desc}</p>\r\n        <Button\r\n        onClick={()=>{\r\n            window.open(link,'_self');\r\n        }}\r\n        >\r\n            Enter\r\n        </Button>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatRoom.js",["143","144","145","146","147","148","149","150","151","152","153","154"],"import {useEffect, useState,useRef, useContext} from 'react';\r\nimport io from 'socket.io-client';\r\nimport axios from 'axios';\r\nimport InputBox from './InputBox';\r\nimport '../css/chatroom.css';\r\nimport ChatNav from './ChatNav';\r\nimport ChatBubble from './ChatBubble';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\nimport { SocketContext } from \"../SocketContext\";\r\nimport VideoRespond from './VideoRespond';\r\nimport VideoCall from './VideoCall';\r\n\r\nexport default function ChatRoom(props)\r\n{\r\n    const ENDPOINT = 'localhost:5000';\r\n    const [userInfo,setUserInfo] = useState();\r\n    const [userId,setUserId] = useState();\r\n    const [roomId,setRoomId] = useState();\r\n    const [text,setText] = useState(\"\");\r\n    const [userNickname,setUserNickname] = useState();\r\n    const [messages,setMessages] = useState([]);\r\n    const [partnerInfo,setPartnerInfo] = useState([]);\r\n    const [isUser,setIsUser] = useState(false);\r\n    const [partnerStatus,setPartnerStatus] = useState();\r\n    // const [isCalling,setIsCalling] = useState();\r\n    const {joinRoom,sendMsg,newMessage,callUser,call,me,callAccepted,onBoth,startCall} = useContext(SocketContext);\r\n\r\n    useEffect(()=>{\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n            if(res.isLoggedIn)\r\n            {\r\n              let userId = res.user._id;\r\n              let partner = res.user.partner;\r\n              let nickname = res.user.nickname;\r\n              console.log(nickname);\r\n              setPartnerInfo(res.partnerInfo)\r\n                if(res.user.partner!==null)\r\n                { \r\n                  axios({ \r\n                    method:'get',\r\n                    url:'/user/getRoomId',\r\n                    headers: {'Content-Type': 'multipart/form-data'}\r\n                  })\r\n                  .then(res=>res.data)\r\n                  .catch(err=>console.log(err))\r\n                  .then(res=>{\r\n                    setMessages(res.chatInfo.chats.reverse().map(chat=>{\r\n                      return chat;\r\n                    }))\r\n                    let roomId = res.roomInfo._id;\r\n                    setRoomId(roomId);\r\n                    if(nickname)\r\n                    {\r\n                       joinRoom(roomId,userId,nickname);  \r\n                    }\r\n                  })\r\n                }\r\n                setUserId(res.user._id);\r\n                setUserInfo({...res.user});\r\n                setUserNickname(res.user.nickname);\r\n            }\r\n        });\r\n        return function cancel() {\r\n            ac.abort();\r\n          }\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n      setMessages(prevData=>{\r\n        return[...prevData,newMessage]\r\n      })\r\n      \r\n    },[newMessage]);\r\n\r\n    \r\n    function handleSendMsg(event)\r\n    {\r\n      let msg = document.getElementById(\"chat\").value;\r\n      event.preventDefault();\r\n      if(msg.length>0&&roomId)\r\n      {\r\n        sendMsg(msg,userId,userNickname,roomId);\r\n        setText(\"\");\r\n      }\r\n      else{\r\n        console.log(\"You cant send anything\")\r\n      }\r\n      document.getElementById(\"chat\").value = null;\r\n    }\r\n\r\n    function toggleBackHome()\r\n    {\r\n      window.open('/','_self');\r\n    }\r\n\r\n    async function toggleVideoCall()\r\n    {\r\n      await startCall();\r\n      // await callUser();\r\n    };\r\n    return<div>\r\n        {call.isReceivingCall &&!callAccepted&&<VideoRespond/>}\r\n     <VideoCall/>\r\n      \r\n      <div className=\"container\" id=\"container\">\r\n     \r\n\t\t<div className=\"chat_box\">\r\n\t\t\t<ChatNav toggleBackHome={toggleBackHome} partnerInfo={partnerInfo} partnerStatus={partnerStatus} toggleVideoCall={toggleVideoCall}/>\r\n\t\t\t<div className=\"body\">\r\n\t\t\t\t<div className=\"incoming\">\r\n          <ScrollToBottom>\r\n          {messages&&userInfo&&messages.map((chat,index)=>{\r\n            return <ChatBubble key={index}textInfo={chat} user={userInfo}/>\r\n          })} \r\n\r\n          </ScrollToBottom>\r\n          \r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <div class=\"typing\">\r\n\t\t\t\t\t<div class=\"bubble\">\r\n\t\t\t\t\t\t<div class=\"ellipsis dot_1\"></div>\r\n\t\t\t\t\t\t<div class=\"ellipsis dot_2\"></div>\r\n\t\t\t\t\t\t<div class=\"ellipsis dot_3\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t\t<InputBox handleSendMsg={handleSendMsg}/>\r\n\t\t</div>\r\n\t</div>\r\n\r\n  </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Navbar.js",[],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\InputBox.js",[],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatNav.js",["155","156","157"],"import '../css/chatNav.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function ChatNav(props)\r\n{\r\n    const {toggleBackHome,partnerInfo,partnerStatus,toggleVideoCall,callAccepted} = props\r\n\tconst [readyDisplay,setReadyDisplay] = useState(false);\r\n\tconst [isOnline,setIsOnline] = useState(false);\r\n\tuseEffect(()=>{\r\n\t\tconst ac = new AbortController();\r\n\t\tif(partnerInfo)\r\n\t\t{\r\n\t\t\tsetReadyDisplay(true);\r\n\t\t}\r\n\t\treturn function cancel() {\r\n            ac.abort();\r\n          }\r\n\t},[partnerInfo])\r\n\r\n\t\tif(partnerStatus&&partnerInfo)\r\n\t\t{\r\n\t\t\tpartnerStatus.map(user=>{\r\n\t\t\t\tif(user===partnerInfo._id)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tsetIsOnline(true);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\r\n    return<div className=\"chatNav-div\">\r\n\t\t{isOnline&&<h1>ONLINE</h1>}\r\n        <div className=\"head\">\r\n        <IconButton id=\"backBtn\" onClick={toggleBackHome}><ArrowBackIcon/></IconButton> \r\n\t\t\t\t<div className=\"user\">\r\n\t\t\t\t\t<div className=\"avatar\" id=\"avatarStatus\">\r\n\t\t\t\t\t\t<img src=\"/gridFs/getPartnerProfile\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t\t{readyDisplay&&<div className=\"name\">{partnerInfo.nickname}</div>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul id=\"bar_tool\">\r\n\t\t\t\t\t<IconButton id=\"iconBtn\"><span className=\"alink\"><PhoneIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t\t<IconButton id=\"iconBtn\" onClick={toggleVideoCall}><span className=\"alink\"><VideocamIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t\t<IconButton id=\"iconBtn\"><span className=\"alink\"><MoreHorizIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatBubble.js",["158","159","160"],"import {useEffect, useState} from 'react';\r\nimport '../css/chatBubble.css';\r\n\r\n\r\nexport default function ChatBubble(props)\r\n{\r\n    const{textInfo,user}= props;\r\n    if(textInfo&&textInfo.userId===user._id)\r\n    {       \r\n        return<div className=\"bubble-div right\">\r\n           <div className = \"context\">\r\n            <p>{textInfo&&textInfo.text}</p>\r\n           </div>\r\n        </div>\r\n    }\r\n    else{\r\n        return<div className=\"bubble-div left\">\r\n            <div className=\"img-div\">\r\n            <img src=\"/gridFs/getPartnerProfile\"/>\r\n            </div>\r\n            <div className = \"context\">\r\n            <p>{textInfo&&textInfo.text}</p>\r\n           </div>\r\n        </div>\r\n    }\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\SocketContext.js",["161","162","163","164","165"],"import React, { createContext, useState, useRef, useEffect } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport Peer from 'simple-peer';\r\n\r\nconst SocketContext = createContext();\r\n\r\nconst ENDPOINT='localhost:5000';\r\nlet socket;\r\nlet isCaller = false;\r\nlet isAnswered = false;\r\nlet name ;\r\nconst ContextProvider = ({ children }) => {\r\n  const [callAccepted, setCallAccepted] = useState(false);\r\n  const [callEnded, setCallEnded] = useState(false);\r\n  const [stream, setStream] = useState();\r\n  // const [name, setName] = useState('');\r\n  const [call, setCall] = useState({});\r\n  const [userId,setUserId] = useState('');\r\n  const [roomId,setRoomId] = useState('');\r\n  const [newMessage,setNewMessage] = useState([]);\r\n  const [partnerId,setPartnerId] = useState();\r\n  const [isCalling,setIsCalling] = useState(false);\r\n  const [noCall,setNoCall] = useState(false);\r\n  const [isOnline,setIsOnline] = useState(true);\r\n  const [users,setUsers] = useState();\r\n\r\n  const myVideo = useRef();\r\n  const userVideo = useRef();\r\n  const connectionRef = useRef();\r\n\r\n\r\n   \r\n\r\n  useEffect(() => {\r\n\r\n    socket = io(ENDPOINT);\r\n     \r\n    socket.on('chatMsg',(chat)=>{\r\n        setNewMessage(chat);\r\n    })\r\n\r\n    socket.on('startCalling',e=>{\r\n      callUser();\r\n    })\r\n    socket.on('start',e=>{\r\n      setIsCalling(true);\r\n    })\r\n\r\n    socket.on('no',e=>{\r\n      setNoCall(true);\r\n      alert('your partner is not online!')\r\n    })\r\n  }, []);\r\n\r\n  useEffect(()=>{\r\n    \r\n    \r\n\r\n    if(!isCalling)\r\n    {\r\n      return null;\r\n    }\r\n     \r\n\r\n   socket.on('returnDiv',e=>{\r\n      document.getElementById(\"container\").style.left = \"50%\"\r\n      document.getElementById(\"container\").style.width = \"80%\";\r\n      document.getElementById(\"chat\").style.width = \"1000px\";\r\n      document.getElementById(\"video-div\").style.display = \"none\";\r\n\r\n   })\r\n\r\n   socket.on('calluser',async ({ from, name: callerName, signal })=> {\r\n    setCall({ isReceivingCall: true, from, name: callerName, signal });\r\n    \r\n  });\r\n\r\n   socket.on('moveDiv',e=>{\r\n      document.getElementById(\"container\").style.left = \"36%\"\r\n      document.getElementById(\"container\").style.width = \"70%\";\r\n      document.getElementById(\"chat\").style.width = \"800px\";\r\n      document.getElementById(\"video-div\").style.display = \"block\";\r\n      \r\n      \r\n   })\r\n\r\n    socket.on('dc',e=>{\r\n      leaveCall();\r\n    })\r\n\r\n  },[isCalling])\r\n\r\n  // useEffect(()=>{\r\n  //   if(callAccepted)\r\n  //   {\r\n  //     navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n  //     .then((currentStream) => {\r\n  //     setStream(currentStream);\r\n  //     myVideo.current.srcObject = currentStream;\r\n  //     });\r\n  //   }\r\n  // },[callAccepted])\r\n\r\n  const startCall  =()=>{\r\n    socket.emit('calling');\r\n  }\r\n  \r\n  const joinRoom = (roomId,userId,nickname) =>{\r\n      socket.emit('join',{userId,roomId});\r\n      setUserId(userId);\r\n      setRoomId(roomId);\r\n      // setName(nickname); \r\n      name=nickname;\r\n  }\r\n  let audio =true;\r\n  const muteAudio = ()=>{\r\n    audio  = !audio;\r\n    stream.getAudioTracks()[0].enabled = audio;\r\n  }\r\n\r\n  let video =true;\r\n  const muteVideo = ()=>{\r\n    video  = !video;\r\n    stream.getVideoTracks()[0].enabled = video;\r\n  }\r\n\r\n  const sendMsg = (msg,nickname) =>{\r\n      socket.emit('sendMsg',{msg,userId,nickname,roomId})\r\n  }\r\n\r\n  const declineCall = ()=>{\r\n    setCallEnded(true);\r\n    if(isCaller)\r\n    {\r\n      document.getElementById(\"container\").style.left = \"50%\"\r\n      document.getElementById(\"container\").style.width = \"70%\";\r\n      document.getElementById(\"chat\").style.width = \"800px\";\r\n      document.getElementById(\"video-div\").style.visibility = \"none\";\r\n    }\r\n    setIsCalling(false);\r\n    window.location.reload();\r\n  }\r\n\r\n  const answerCall = async() => {\r\n    let local;\r\n    await navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n    .then((currentStream) => {\r\n    setStream(currentStream);\r\n    local = currentStream;\r\n    myVideo.current.srcObject = currentStream;\r\n    }); \r\n    isAnswered = true;\r\n    setCallAccepted(true);\r\n    const peer = new Peer({ initiator: false, trickle: false, stream:local });\r\n    peer.on('signal', (data) => {\r\n      socket.emit('answercall', { signal: data, to: call.from });\r\n    });\r\n\r\n    peer.on('stream', (currentStream) => {\r\n      console.log(\"this is the remote stream: \" + currentStream);\r\n      userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    peer.signal(call.signal);\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n\r\n  const callUser = async() => {\r\n    if(noCall)\r\n    {\r\n      return null;\r\n    }\r\n    let local;\r\n    await navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n    .then((currentStream) => {\r\n    setStream(currentStream);\r\n    local = currentStream;\r\n    myVideo.current.srcObject = currentStream;\r\n    }); \r\n    isCaller = true;\r\n    const peer = new Peer({ initiator: true, trickle: false, stream:local });\r\n    peer.on('signal', (data) => {\r\n      socket.emit('calluser', {  signalData: data,  name });\r\n    });\r\n    peer.on('stream', (currentStream) => {\r\n      userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    socket.on('callaccepted', (signal) => {\r\n      console.log('call accepted: ' + signal);\r\n      setCallAccepted(true);\r\n      peer.signal(signal);\r\n    });\r\n\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n  const leaveCall = () => {\r\n    setCallEnded(true);\r\n    if(isCaller)\r\n    {\r\n      document.getElementById(\"container\").style.left = \"50%\"\r\n      document.getElementById(\"container\").style.width = \"70%\";\r\n      document.getElementById(\"chat\").style.width = \"800px\";\r\n      document.getElementById(\"video-div\").style.visibility = \"none\";\r\n    }\r\n    connectionRef.current.destroy();\r\n\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <SocketContext.Provider value={{\r\n      call,\r\n      callAccepted,\r\n      myVideo,\r\n      newMessage,\r\n      sendMsg,\r\n      joinRoom,\r\n      userVideo,\r\n      stream,\r\n      name,\r\n      callEnded,\r\n      callUser,\r\n      leaveCall,\r\n      answerCall,\r\n      users,\r\n      isOnline,\r\n      startCall,\r\n      muteAudio,\r\n      muteVideo,\r\n      declineCall,\r\n      isCaller,\r\n      isAnswered,\r\n    }}\r\n    >\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport { ContextProvider, SocketContext };","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoCall.js",["166","167","168","169","170","171"],"import { useContext, useEffect,useRef, useState } from \"react\"\r\nimport { SocketContext } from \"../SocketContext\";\r\nimport '../css/videoCall.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport CallEndIcon from '@material-ui/icons/CallEnd';\r\nimport MicOffIcon from '@material-ui/icons/MicOff';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\n\r\nexport default function VideoCall()\r\n{\r\n    const {name,callAccepted,myVideo,userVideo,callEnded,stream,callUser,leaveCall,initializeVideo,muteAudio,muteVideo,declineCall,isAnswered} = useContext(SocketContext);\r\n        const [isMuted,setIsMuted] = useState(false);\r\n        const [isDisplayed,setIsDisplayed] = useState(true);\r\n   \r\n \r\n   \r\n   function handleMute()\r\n   {\r\n           setIsMuted(!isMuted);\r\n           muteAudio();\r\n   }\r\n   function handleDisplay()\r\n   {\r\n           setIsDisplayed(!isDisplayed);\r\n           muteVideo();\r\n   }\r\n       console.log(isAnswered);\r\n        return <div className=\"video-div\" id=\"video-div\">\r\n\r\n                \r\n                <div className=\"vid-call\">\r\n                 <video playsInline muted ref={myVideo} autoPlay />        \r\n                </div>\r\n                {callAccepted&&!callEnded&&\r\n                <div className=\"vid-call1\">\r\n                <video playsInline muted ref={userVideo} autoPlay />\r\n                </div>}\r\n                <div className=\"option-div\">\r\n                <IconButton onClick={handleDisplay} className=\"option-btn\" id=\"display\">{isDisplayed?<VideocamIcon/>:<VideocamOffIcon/>}</IconButton>\r\n                <IconButton onClick={isAnswered?leaveCall:declineCall} className=\"option-btn\" id=\"end\"><CallEndIcon fontSize=\"inherit\"/></IconButton>\r\n                <IconButton onClick={handleMute} className=\"option-btn\">{isMuted?<MicOffIcon/>:<MicIcon/>}</IconButton>\r\n                </div>\r\n        </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoRespond.js",["172","173","174","175","176","177","178"],"import DoneIcon from '@material-ui/icons/Done';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { useContext, useEffect } from 'react';\r\nimport {SocketContext} from '../SocketContext';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { Icon } from '@material-ui/core';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nexport default function VideoRespond(props)\r\n{\r\n\r\n    const{answerCall,leaveCall,call,initializeVideo,callUser,declineCall,isCaller,isAnswered} = useContext(SocketContext);\r\n\r\n\r\n   \r\n\r\n\r\n   async function answer()\r\n    {\r\n        document.getElementById(\"container\").style.left = \"36%\"\r\n        document.getElementById(\"container\").style.width = \"70%\";\r\n        document.getElementById(\"chat\").style.width = \"800px\";\r\n        document.getElementById(\"video-div\").style.display = \"block\";\r\n        answerCall();\r\n        \r\n    }\r\n    return <div className=\"respond\">\r\n        <Avatar src=\"/gridFs/getPartnerProfile\" id=\"caller\"/>\r\n        <div className=\"description\">\r\n            <h3>{call.name} wants to call you</h3>\r\n        </div>\r\n        <div className=\"choice\">\r\n        <IconButton id=\"choice-btn\" onClick={answer}><DoneIcon/></IconButton>\r\n        <IconButton id=\"choice-canc\" onClick={declineCall}><ClearIcon/></IconButton>\r\n        </div>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Cinema.js",["179"],"import ReactPlayer from 'react-player'\r\nimport '../css/videoPlayer.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowLeftIcon from '@material-ui/icons/ArrowLeft';\r\nimport VideoList from './VideoList';\r\nimport VideoUploadDiv from './VideoUploadDiv';\r\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\r\nimport VolumeMuteIcon from '@material-ui/icons/VolumeMute';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff'; \r\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport { FullScreen, useFullScreenHandle } from \"react-full-screen\";\r\nimport io from 'socket.io-client';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nlet socket;\r\nexport default function Cinema()\r\n{\r\n  const ENDPOINT = 'localhost:5000';\r\n  const handle = useFullScreenHandle();\r\n  const [ready,setReady] = useState(false);\r\n  const [play,setPlay] =useState(false);\r\n  const [openUrl,setOpenUrl] = useState(false);\r\n  const [url,setUrl] = useState();\r\n  const [buffering,setBuffering] = useState(true);\r\n  const [volume,setVolume] = useState(0.5);\r\n  const [isMuted,setIsMuted] = useState(false);\r\n  const [isLoud,setIsLoud] = useState(false);\r\n  const [isFullScreen,setIsFullScreen] = useState(false);\r\n  const videoRef = useRef();\r\n  const urlRef = useRef(\"\");\r\n  const readyToPlay = useRef(false);\r\n  const initialRun = useRef(true);\r\n  useEffect(async()=>{\r\n      const ac = new AbortController();\r\n        socket = io(ENDPOINT);\r\n        if(initialRun.current)\r\n        {\r\n            await axios.get('/user/getRoomId')\r\n            .then(res=>res.data)\r\n            .catch(err=>console.log(err))\r\n            .then(res=>{\r\n                socket.emit('join',res.roomInfo._id);\r\n            });\r\n            \r\n            initialRun.current = false;\r\n        }\r\n        socket.on('changeState',state=>{\r\n            setPlay(state);\r\n        });\r\n\r\n        socket.on('update',time=>{\r\n            console.log(time);\r\n            if(urlRef.current===\"\")\r\n            {\r\n                urlRef.current = time.url;\r\n                setReady(true);\r\n                readyToPlay.current = true;\r\n                setBuffering(false);\r\n                return;\r\n            }\r\n            if(readyToPlay.current)\r\n            {\r\n                if(time.time>videoRef.current.getCurrentTime())\r\n                {\r\n                    if(videoRef.current.getCurrentTime()<(time.time)-1){\r\n                        videoRef.current.seekTo(String(time.time),'seconds');\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        socket.on('updateProgress',pointed=>{\r\n            videoRef.current.seekTo(pointed,'seconds');\r\n        })\r\n\r\n        socket.on('onlineUrl',data=>{\r\n            if(data===\"\")\r\n            {\r\n                document.getElementById('url').value = \"\";\r\n                return;\r\n            }\r\n            setReady(true);\r\n            console.log(data)\r\n            urlRef.current=data;\r\n            setUrl(data);\r\n            document.getElementById('url').value = \"\";\r\n        })\r\n\r\n      return function cancel(){\r\n          ac.abort();\r\n      }\r\n  },[])\r\n\r\n  function displayProgress()\r\n  {\r\n      socket.emit('keepUpdate',{time:videoRef.current.getCurrentTime(),url:url});\r\n      const point = document.getElementById('progress-point');\r\n      const value = videoRef.current.getCurrentTime()/(videoRef.current.getDuration()/100);\r\n      point.style.left = value+\"%\";\r\n  }\r\n   \r\n  function handleProgressChange(event)\r\n  {\r\n      const progressBarWidth = document.getElementById(\"progress-bar\");\r\n      const choose = event.nativeEvent.offsetX;\r\n      const pointed = (choose/progressBarWidth.offsetWidth)*videoRef.current.getDuration();     \r\n      socket.emit('changeProgress',pointed) \r\n      setPlay(true);\r\n  }\r\n  function handleVideoState()\r\n  {\r\n    socket.emit('changeVideoState',play);\r\n  }\r\n  \r\n  function submitUrl(event){\r\n    event.preventDefault();\r\n    const choosenUrl = document.getElementById('url').value;\r\n    socket.emit('onlineUrl',choosenUrl);\r\n  }\r\n\r\n  async function handleChooseMovie(filename)\r\n  {\r\n    \r\n    setReady(true);\r\n    const choosenUrl = \"/videoFs/choose/\"+filename;\r\n    socket.emit('onlineUrl',choosenUrl);\r\n  }\r\n  function handleUrlDiv()\r\n  {\r\n      let state = !openUrl;\r\n    if(state)\r\n    {\r\n        document.getElementById('submitUrl').style.marginLeft =0;\r\n    }\r\n    else\r\n    {\r\n        document.getElementById('submitUrl').style.marginLeft =\"-380px\";\r\n    };\r\n      setOpenUrl(!openUrl);  \r\n  }\r\n\r\n    function handlePlayerVolume()\r\n    {\r\n        const value=document.getElementById(\"volume\").value;\r\n        const actualVolume = parseFloat(value/100);\r\n        if(actualVolume===0)\r\n        {\r\n            setIsMuted(true);\r\n        }\r\n        else\r\n        {\r\n            setIsMuted(false);\r\n        }\r\n        if(value>50)\r\n        {\r\n            setIsLoud(true);\r\n        }\r\n        else\r\n        {\r\n            setIsLoud(false);\r\n        }\r\n        setVolume(actualVolume);\r\n    }\r\n    function handleMute()\r\n    {\r\n        let state = !isMuted;\r\n        if(state)\r\n        {\r\n            setVolume(0);\r\n            document.getElementById('volume').value =0;\r\n        }\r\n        else\r\n        {\r\n            setVolume(0.5);\r\n            document.getElementById('volume').value =50;\r\n        }\r\n        setIsMuted(!isMuted);\r\n    }\r\n\r\n    function handleBigScreen()\r\n    {\r\n        let state = !isFullScreen;\r\n        const controls = document.getElementById('controls');\r\n        if(state)\r\n        {\r\n            handle.enter();\r\n            controls.style.bottom=\"-150px\";\r\n            document.getElementById('progress-point').style.background=\"white\";\r\n            document.getElementById('control-btn').style.color=\"white\";\r\n            document.getElementById('control-vlm').style.color=\"white\";\r\n            document.getElementById('fullscreen-btn').style.color=\"white\";\r\n        }\r\n        else\r\n        {\r\n            handle.exit();\r\n            controls.style.bottom=\"-50px\";\r\n            document.getElementById('progress-point').style.background=\"black\";\r\n            document.getElementById('control-btn').style.color=\"black\";\r\n            document.getElementById('control-vlm').style.color=\"black\";\r\n            document.getElementById('fullscreen-btn').style.color=\"black\";\r\n        }\r\n        setIsFullScreen(!isFullScreen);\r\n    }\r\n    return <div>\r\n        <VideoList handleChooseMovie={handleChooseMovie}/>\r\n        <VideoUploadDiv/>\r\n        <div className=\"submit-url\" id=\"submitUrl\">\r\n            <form onSubmit={submitUrl}>\r\n            <input type=\"text\" id=\"url\" placeholder=\"enter url\"/>\r\n            <Button\r\n                type=\"submit\"\r\n                variant=\"outlined\"\r\n                id=\"submit-url-btn\"\r\n            > submit</Button>\r\n            </form>\r\n            <IconButton size=\"small\" id=\"handleUrlDiv\" onClick={handleUrlDiv}>\r\n                {openUrl?<ArrowLeftIcon/>:<ArrowRightIcon/>}\r\n            </IconButton>\r\n        </div>\r\n        <Button variant=\"outlined\" color=\"black\" href=\"/\" id=\"homeBtn\">\r\n        <HomeIcon/>\r\n         </Button>\r\n        <FullScreen\r\n        handle={handle}\r\n        >\r\n        <div className=\"video-player\" id=\"video-player\">\r\n        {buffering&&ready&&<div className=\"no-video\">\r\n            <h1>Loading....</h1>\r\n        </div>}\r\n        {ready?\r\n        <ReactPlayer \r\n            ref={videoRef}\r\n            playing={play}\r\n            height=\"100%\"\r\n            width= \"100%\"\r\n            url={urlRef.current}\r\n            volume={volume}\r\n            onProgress={displayProgress}\r\n            onReady ={()=>setBuffering(false)}   \r\n            onError={()=>setReady(false)}\r\n        />:\r\n        <div className=\"no-video\">\r\n            <h2>No Video</h2>\r\n        </div>\r\n        }\r\n        {/* <video src=\"/videoFs/getVideos\" type=\"video/mp4\"/> */}\r\n            <div style={{display:\"flex\"}} className=\"progress-bar-div\" id=\"controls\">\r\n                <IconButton onClick={handleVideoState} id=\"control-btn\" style={{color:\"black\"}}>{play?<PauseIcon/>:<PlayArrowIcon/>}</IconButton>\r\n                <IconButton onClick={handleMute} id=\"control-vlm\" style={{color:\"black\"}}>{isMuted?<VolumeOffIcon/>:isLoud?<VolumeUpIcon/>:<VolumeMuteIcon/>}</IconButton>\r\n                <input type=\"range\" min=\"0\" max=\"100\" id=\"volume\" onChange={handlePlayerVolume}/>\r\n                <div id=\"progress-bar\" className=\"progress-bar status\" onClick={handleProgressChange}>\r\n                <div id=\"progress-point\" className=\"progress-point\"></div>\r\n                </div>\r\n                <IconButton onClick={handleBigScreen} id=\"fullscreen-btn\" style={{color:\"black\"}}>{isFullScreen?<FullscreenExitIcon/>:<FullscreenIcon/>}</IconButton>\r\n            </div>\r\n        </div>\r\n        </FullScreen>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoList.js",["180"],"import { useEffect, useState } from \"react\";\r\nimport axios from 'axios';\r\nimport Button from '@material-ui/core/Button';\r\nimport ScrollMenu from 'react-horizontal-scrolling-menu';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function VideoList(props)\r\n{\r\n    const {handleChooseMovie} = props;\r\n    const [files,setFiles] = useState([]);\r\n    const [dropdown,setDropdown] = useState(false);\r\n    useEffect(()=>{\r\n        axios.get('/videoFs/getAllVideos')\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            console.log(res);\r\n            let temp = [];\r\n            for(let i=0;i<res.length;i++)\r\n            {\r\n                temp.push(res[i]);\r\n            }\r\n            setFiles(temp);\r\n        })\r\n\r\n    },[])   \r\n    function handleDropDown()\r\n    {\r\n        let state = !dropdown;\r\n        if(state)\r\n        {\r\n            document.getElementById('video-file').style.top=0;\r\n        }\r\n        else\r\n        {\r\n            document.getElementById('video-file').style.top  = \"-68px\";\r\n        }\r\n        setDropdown(!dropdown);\r\n    }\r\n\r\n    return<div className=\"video-file\" id=\"video-file\">\r\n        {files.map(file=>{\r\n            return<Button key={file._id} variant=\"outlined\" onClick={()=>handleChooseMovie(file.filename)} id=\"list\">{file.aliases}</Button>    \r\n        })} \r\n        <IconButton\r\n        size=\"small\"\r\n        id=\"drop-down\"\r\n        onClick={handleDropDown}\r\n        >\r\n        {dropdown?<ArrowDropUpIcon/>:<ArrowDropDownIcon/>}\r\n        </IconButton>\r\n    </div>\r\n\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoUploadDiv.js",[],{"ruleId":"181","replacedBy":"182"},{"ruleId":"183","replacedBy":"184"},{"ruleId":"185","severity":1,"message":"186","line":16,"column":8,"nodeType":"187","messageId":"188","endLine":16,"endColumn":19},{"ruleId":"189","severity":1,"message":"190","line":104,"column":9,"nodeType":"191","endLine":104,"endColumn":70},{"ruleId":"185","severity":1,"message":"192","line":1,"column":30,"nodeType":"187","messageId":"188","endLine":1,"endColumn":36},{"ruleId":"185","severity":1,"message":"193","line":17,"column":10,"nodeType":"187","messageId":"188","endLine":17,"endColumn":18},{"ruleId":"185","severity":1,"message":"194","line":17,"column":19,"nodeType":"187","messageId":"188","endLine":17,"endColumn":30},{"ruleId":"185","severity":1,"message":"195","line":19,"column":10,"nodeType":"187","messageId":"188","endLine":19,"endColumn":16},{"ruleId":"185","severity":1,"message":"196","line":19,"column":17,"nodeType":"187","messageId":"188","endLine":19,"endColumn":26},{"ruleId":"189","severity":1,"message":"190","line":16,"column":13,"nodeType":"191","endLine":16,"endColumn":120},{"ruleId":"181","replacedBy":"197"},{"ruleId":"183","replacedBy":"198"},{"ruleId":"189","severity":1,"message":"190","line":16,"column":13,"nodeType":"191","endLine":16,"endColumn":120},{"ruleId":"185","severity":1,"message":"186","line":3,"column":8,"nodeType":"187","messageId":"188","endLine":3,"endColumn":19},{"ruleId":"185","severity":1,"message":"199","line":5,"column":8,"nodeType":"187","messageId":"188","endLine":5,"endColumn":14},{"ruleId":"185","severity":1,"message":"200","line":11,"column":7,"nodeType":"187","messageId":"188","endLine":11,"endColumn":16},{"ruleId":"185","severity":1,"message":"193","line":22,"column":10,"nodeType":"187","messageId":"188","endLine":22,"endColumn":18},{"ruleId":"185","severity":1,"message":"201","line":23,"column":10,"nodeType":"187","messageId":"188","endLine":23,"endColumn":21},{"ruleId":"185","severity":1,"message":"202","line":24,"column":10,"nodeType":"187","messageId":"188","endLine":24,"endColumn":16},{"ruleId":"185","severity":1,"message":"203","line":24,"column":17,"nodeType":"187","messageId":"188","endLine":24,"endColumn":26},{"ruleId":"185","severity":1,"message":"204","line":25,"column":10,"nodeType":"187","messageId":"188","endLine":25,"endColumn":15},{"ruleId":"185","severity":1,"message":"205","line":25,"column":16,"nodeType":"187","messageId":"188","endLine":25,"endColumn":24},{"ruleId":"206","severity":1,"message":"207","line":57,"column":38,"nodeType":"208","messageId":"209","endLine":57,"endColumn":40},{"ruleId":"185","severity":1,"message":"210","line":79,"column":16,"nodeType":"187","messageId":"188","endLine":79,"endColumn":31},{"ruleId":"206","severity":1,"message":"207","line":108,"column":27,"nodeType":"208","messageId":"209","endLine":108,"endColumn":29},{"ruleId":"185","severity":1,"message":"211","line":46,"column":12,"nodeType":"187","messageId":"188","endLine":46,"endColumn":22},{"ruleId":"185","severity":1,"message":"212","line":46,"column":23,"nodeType":"187","messageId":"188","endLine":46,"endColumn":36},{"ruleId":"189","severity":1,"message":"190","line":149,"column":8,"nodeType":"191","endLine":149,"endColumn":68},{"ruleId":"185","severity":1,"message":"213","line":2,"column":10,"nodeType":"187","messageId":"188","endLine":2,"endColumn":20},{"ruleId":"185","severity":1,"message":"192","line":1,"column":29,"nodeType":"187","messageId":"188","endLine":1,"endColumn":35},{"ruleId":"185","severity":1,"message":"214","line":2,"column":8,"nodeType":"187","messageId":"188","endLine":2,"endColumn":10},{"ruleId":"185","severity":1,"message":"215","line":15,"column":11,"nodeType":"187","messageId":"188","endLine":15,"endColumn":19},{"ruleId":"185","severity":1,"message":"216","line":19,"column":12,"nodeType":"187","messageId":"188","endLine":19,"endColumn":16},{"ruleId":"185","severity":1,"message":"217","line":23,"column":12,"nodeType":"187","messageId":"188","endLine":23,"endColumn":18},{"ruleId":"185","severity":1,"message":"218","line":23,"column":19,"nodeType":"187","messageId":"188","endLine":23,"endColumn":28},{"ruleId":"185","severity":1,"message":"219","line":24,"column":26,"nodeType":"187","messageId":"188","endLine":24,"endColumn":42},{"ruleId":"185","severity":1,"message":"220","line":26,"column":40,"nodeType":"187","messageId":"188","endLine":26,"endColumn":48},{"ruleId":"185","severity":1,"message":"221","line":26,"column":54,"nodeType":"187","messageId":"188","endLine":26,"endColumn":56},{"ruleId":"185","severity":1,"message":"222","line":26,"column":70,"nodeType":"187","messageId":"188","endLine":26,"endColumn":76},{"ruleId":"185","severity":1,"message":"223","line":37,"column":19,"nodeType":"187","messageId":"188","endLine":37,"endColumn":26},{"ruleId":"224","severity":1,"message":"225","line":70,"column":7,"nodeType":"226","endLine":70,"endColumn":9,"suggestions":"227"},{"ruleId":"185","severity":1,"message":"228","line":11,"column":69,"nodeType":"187","messageId":"188","endLine":11,"endColumn":81},{"ruleId":"206","severity":1,"message":"207","line":27,"column":26,"nodeType":"208","messageId":"209","endLine":27,"endColumn":28},{"ruleId":"189","severity":1,"message":"190","line":41,"column":7,"nodeType":"191","endLine":41,"endColumn":46},{"ruleId":"185","severity":1,"message":"229","line":1,"column":9,"nodeType":"187","messageId":"188","endLine":1,"endColumn":18},{"ruleId":"185","severity":1,"message":"230","line":1,"column":20,"nodeType":"187","messageId":"188","endLine":1,"endColumn":28},{"ruleId":"189","severity":1,"message":"190","line":19,"column":13,"nodeType":"191","endLine":19,"endColumn":51},{"ruleId":"185","severity":1,"message":"231","line":21,"column":10,"nodeType":"187","messageId":"188","endLine":21,"endColumn":19},{"ruleId":"185","severity":1,"message":"232","line":21,"column":20,"nodeType":"187","messageId":"188","endLine":21,"endColumn":32},{"ruleId":"185","severity":1,"message":"233","line":24,"column":19,"nodeType":"187","messageId":"188","endLine":24,"endColumn":30},{"ruleId":"185","severity":1,"message":"234","line":25,"column":16,"nodeType":"187","messageId":"188","endLine":25,"endColumn":24},{"ruleId":"224","severity":1,"message":"235","line":53,"column":6,"nodeType":"226","endLine":53,"endColumn":8,"suggestions":"236"},{"ruleId":"185","severity":1,"message":"229","line":1,"column":22,"nodeType":"187","messageId":"188","endLine":1,"endColumn":31},{"ruleId":"185","severity":1,"message":"192","line":1,"column":32,"nodeType":"187","messageId":"188","endLine":1,"endColumn":38},{"ruleId":"185","severity":1,"message":"237","line":13,"column":12,"nodeType":"187","messageId":"188","endLine":13,"endColumn":16},{"ruleId":"185","severity":1,"message":"238","line":13,"column":58,"nodeType":"187","messageId":"188","endLine":13,"endColumn":64},{"ruleId":"185","severity":1,"message":"220","line":13,"column":65,"nodeType":"187","messageId":"188","endLine":13,"endColumn":73},{"ruleId":"185","severity":1,"message":"239","line":13,"column":84,"nodeType":"187","messageId":"188","endLine":13,"endColumn":99},{"ruleId":"185","severity":1,"message":"229","line":3,"column":22,"nodeType":"187","messageId":"188","endLine":3,"endColumn":31},{"ruleId":"185","severity":1,"message":"240","line":6,"column":10,"nodeType":"187","messageId":"188","endLine":6,"endColumn":14},{"ruleId":"185","severity":1,"message":"241","line":12,"column":22,"nodeType":"187","messageId":"188","endLine":12,"endColumn":31},{"ruleId":"185","severity":1,"message":"239","line":12,"column":37,"nodeType":"187","messageId":"188","endLine":12,"endColumn":52},{"ruleId":"185","severity":1,"message":"220","line":12,"column":53,"nodeType":"187","messageId":"188","endLine":12,"endColumn":61},{"ruleId":"185","severity":1,"message":"242","line":12,"column":74,"nodeType":"187","messageId":"188","endLine":12,"endColumn":82},{"ruleId":"185","severity":1,"message":"243","line":12,"column":83,"nodeType":"187","messageId":"188","endLine":12,"endColumn":93},{"ruleId":"224","severity":1,"message":"244","line":40,"column":13,"nodeType":"208","endLine":99,"endColumn":4},{"ruleId":"185","severity":1,"message":"245","line":4,"column":8,"nodeType":"187","messageId":"188","endLine":4,"endColumn":18},"no-native-reassign",["246"],"no-negated-in-lhs",["247"],"no-unused-vars","'ReactAvatar' is defined but never used.","Identifier","unusedVar","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'useRef' is defined but never used.","'userInfo' is assigned a value but never used.","'setUserInfo' is assigned a value but never used.","'imgUrl' is assigned a value but never used.","'setImgUrl' is assigned a value but never used.",["246"],["247"],"'Button' is defined but never used.","'useStyles' is assigned a value but never used.","'havePartner' is assigned a value but never used.","'roomId' is assigned a value but never used.","'setRoomId' is assigned a value but never used.","'reqId' is assigned a value but never used.","'setReqId' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'handleChatClick' is defined but never used.","'newProfile' is assigned a value but never used.","'setNewProfile' is assigned a value but never used.","'useContext' is defined but never used.","'io' is defined but never used.","'ENDPOINT' is assigned a value but never used.","'text' is assigned a value but never used.","'isUser' is assigned a value but never used.","'setIsUser' is assigned a value but never used.","'setPartnerStatus' is assigned a value but never used.","'callUser' is assigned a value but never used.","'me' is assigned a value but never used.","'onBoth' is assigned a value but never used.","'partner' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'joinRoom'. Either include it or remove the dependency array.","ArrayExpression",["248"],"'callAccepted' is assigned a value but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","'partnerId' is assigned a value but never used.","'setPartnerId' is assigned a value but never used.","'setIsOnline' is assigned a value but never used.","'setUsers' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'callUser'. Either include it or remove the dependency array.",["249"],"'name' is assigned a value but never used.","'stream' is assigned a value but never used.","'initializeVideo' is assigned a value but never used.","'Icon' is defined but never used.","'leaveCall' is assigned a value but never used.","'isCaller' is assigned a value but never used.","'isAnswered' is assigned a value but never used.","Effect callbacks are synchronous to prevent race conditions. Put the async function inside:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching","'ScrollMenu' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"250","fix":"251"},{"desc":"252","fix":"253"},"Update the dependencies array to be: [joinRoom]",{"range":"254","text":"255"},"Update the dependencies array to be: [callUser]",{"range":"256","text":"257"},[2670,2672],"[joinRoom]",[1439,1441],"[callUser]"]