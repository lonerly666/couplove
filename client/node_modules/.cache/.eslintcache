[{"C:\\Users\\PC\\myProject\\couplove\\client\\src\\index.js":"1","C:\\Users\\PC\\myProject\\couplove\\client\\src\\reportWebVitals.js":"2","C:\\Users\\PC\\myProject\\couplove\\client\\src\\App.js":"3","C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\UserProfileForm.js":"4","C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\Home.js":"5","C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\Login.js":"6","C:\\Users\\PC\\temp\\couplove\\client\\src\\index.js":"7","C:\\Users\\PC\\temp\\couplove\\client\\src\\App.js":"8","C:\\Users\\PC\\temp\\couplove\\client\\src\\reportWebVitals.js":"9","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Login.js":"10","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Home.js":"11","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\UserProfileForm.js":"12","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ActivityPane.js":"13","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatRoom.js":"14","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Navbar.js":"15","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\InputBox.js":"16","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatNav.js":"17","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatBubble.js":"18","C:\\Users\\PC\\temp\\couplove\\client\\src\\SocketContext.js":"19","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoCall.js":"20","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoRespond.js":"21","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Cinema.js":"22"},{"size":511,"mtime":1621334728533,"results":"23","hashOfConfig":"24"},{"size":375,"mtime":1621334728534,"results":"25","hashOfConfig":"24"},{"size":513,"mtime":1621337766271,"results":"26","hashOfConfig":"24"},{"size":5186,"mtime":1621358353494,"results":"27","hashOfConfig":"24"},{"size":1539,"mtime":1621292768417,"results":"28","hashOfConfig":"24"},{"size":628,"mtime":1621292768418,"results":"29","hashOfConfig":"24"},{"size":569,"mtime":1621916417416,"results":"30","hashOfConfig":"31"},{"size":831,"mtime":1622037561033,"results":"32","hashOfConfig":"31"},{"size":375,"mtime":1621457847902,"results":"33","hashOfConfig":"31"},{"size":628,"mtime":1621457847900,"results":"34","hashOfConfig":"31"},{"size":4044,"mtime":1622037440796,"results":"35","hashOfConfig":"31"},{"size":6717,"mtime":1621740792257,"results":"36","hashOfConfig":"31"},{"size":439,"mtime":1621907614420,"results":"37","hashOfConfig":"31"},{"size":4313,"mtime":1622036104426,"results":"38","hashOfConfig":"31"},{"size":347,"mtime":1621721588714,"results":"39","hashOfConfig":"31"},{"size":609,"mtime":1621813984363,"results":"40","hashOfConfig":"31"},{"size":1768,"mtime":1621953139852,"results":"41","hashOfConfig":"31"},{"size":700,"mtime":1621913248304,"results":"42","hashOfConfig":"31"},{"size":6248,"mtime":1622036235076,"results":"43","hashOfConfig":"31"},{"size":1980,"mtime":1622031337846,"results":"44","hashOfConfig":"31"},{"size":1313,"mtime":1622022543665,"results":"45","hashOfConfig":"31"},{"size":88,"mtime":1622037590589,"results":"46","hashOfConfig":"31"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},"ddlq0p",{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"49"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"49"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},"1v89za1",{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"64"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"64"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"64"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"64"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82","usedDeprecatedRules":"64"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"64"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"89","usedDeprecatedRules":"64"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"92","usedDeprecatedRules":"64"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"95","messages":"96","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"64"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"100","usedDeprecatedRules":"64"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\PC\\myProject\\couplove\\client\\src\\index.js",[],["103","104"],"C:\\Users\\PC\\myProject\\couplove\\client\\src\\reportWebVitals.js",[],"C:\\Users\\PC\\myProject\\couplove\\client\\src\\App.js",[],"C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\UserProfileForm.js",["105","106"],"C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\Home.js",["107","108","109","110","111"],"import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    minWidth: \"100%\",\r\n  },\r\n  large: {\r\n    width: theme.spacing(17),\r\n    height: theme.spacing(17),\r\n  },\r\n}));\r\nexport default function Home()\r\n{\r\n  const [userInfo,setUserInfo] = useState();\r\n  const classes = useStyles();\r\n  const [imgUrl,setImgUrl] = useState();\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn === false) {\r\n            window.open('/login', '_self');\r\n          } \r\n          else if(res.user.nickname===undefined||res.user.nickname===null||res.user.nickname===\"\")\r\n          {\r\n            window.open('/userProfileForm','_self');\r\n          }\r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      });\r\n\r\n      function handleLogout()\r\n      {\r\n        window.location.href = \"/auth/logout\";\r\n      }\r\n\r\n    return <div>\r\n        <ReactAvatar\r\n            style={{borderStyle: \"solid\", borderColor: \"#F0F2F5\", borderWidth: \"2px\", margin: \"auto\"}}\r\n            alt=\"\"\r\n            src =\"/gridFs/getProfile\"\r\n            className={classes.large} \r\n         />\r\n        <input type=\"submit\" value=\"logout\" onClick={handleLogout}/>\r\n    </div>\r\n}","C:\\Users\\PC\\myProject\\couplove\\client\\src\\components\\Login.js",["112"],"import Button from '@material-ui/core/Button';\r\nimport '../css/login.css';\r\n\r\nexport default function Login(){\r\n\r\n\r\n    function handleGoogleClick()\r\n    {\r\n        window.location.href = \"/auth/google\";\r\n    }\r\n\r\n    return <div>\r\n        <div className=\"login-page\">\r\n        <div className=\"title\"><h1>Welcome to Couplove!</h1></div>\r\n        <Button variant=\"contained\" onClick={handleGoogleClick} className=\"login-btn\">\r\n            <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" className=\"g-logo\"/>\r\n            &nbsp;&nbsp;Login With Google</Button>\r\n        </div>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\index.js",[],["113","114"],"C:\\Users\\PC\\temp\\couplove\\client\\src\\App.js",[],"C:\\Users\\PC\\temp\\couplove\\client\\src\\reportWebVitals.js",[],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Login.js",["115"],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Home.js",["116","117","118","119","120","121","122","123","124","125","126","127"],"import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Activity from './ActivityPane';\r\nimport Navbar from '../components/Navbar';\r\nimport '../css/home.css';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    minWidth: \"100%\",\r\n  },\r\n  large: {\r\n    width: theme.spacing(17),\r\n    height: theme.spacing(17),\r\n  },\r\n}));\r\nexport default function Home()\r\n{\r\n  const [userInfo,setUserInfo] = useState();\r\n  const [havePartner,setHavePartner] = useState(false);\r\n  const [roomId,setRoomId] = useState();\r\n  const [reqId,setReqId] = useState();\r\n  const [requestList,setRequestList]= useState([]);\r\n  const formRef = useRef();\r\n  const acceptRef = useRef();\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn===false)\r\n          {\r\n             window.open('/login','_self');\r\n          }\r\n          else\r\n          {\r\n            if(res.user.nickname===undefined)\r\n            {\r\n              window.open('/userProfileForm','_self');\r\n            }\r\n            else\r\n            {\r\n              axios({\r\n                method:'get',\r\n                url:'/user/getRequest',\r\n                headers: {'Content-Type': 'multipart/form-data'}\r\n              })\r\n              .then(res=>res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                let temp=[];\r\n                res.requests.map(list=>{\r\n                  temp.push({...list});\r\n                })\r\n                setRequestList(temp);\r\n              })\r\n              if(res.user.partner!==null)\r\n              {\r\n                setHavePartner(true); \r\n              }\r\n              setUserInfo({...res.user});\r\n            }\r\n          } \r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[]);\r\n\r\n      function handleLogout()\r\n      {\r\n        window.location.href = \"/auth/logout\";\r\n      }\r\n      function handleChatClick()\r\n      {\r\n        window.open('/chatRoom','_self');\r\n      }\r\n\r\n      function handleSendReq(event)\r\n      {\r\n        event.preventDefault();\r\n        const formData = new FormData(formRef.current);\r\n        axios({\r\n          method:'post',\r\n          url:'/user/sendRequest',\r\n          data:formData,\r\n          headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          if(res.isSent)\r\n          {\r\n             alert(\"sent!\");\r\n          }\r\n          else\r\n          {\r\n            alert(res.status);\r\n            console.log(res)\r\n          }\r\n        })\r\n      }\r\n      requestList.map(list=>{\r\n        console.log(list);\r\n      })\r\n\r\n      function acceptPartner(event)\r\n      {\r\n        event.preventDefault();\r\n        const formData = new FormData(acceptRef.current);\r\n        axios({\r\n          method:'post',\r\n          url:'/user/acceptRequest',\r\n          data:formData,\r\n          headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          if(res.result)\r\n          {\r\n            console.log(res);\r\n          }\r\n        })\r\n      }\r\n    return <div>\r\n      <Navbar handleSendReq={handleSendReq} formRef = {formRef}/>\r\n      \r\n\r\n        <Activity title={\"Chat\"} desc={\"Chat with your loved ones\"} link={\"/chatRoom\"} />\r\n        <Activity title={\"Cinema\"} desc={\"Watch Movie Together!\"} link ={\"/cinema\"}/>\r\n        <input type=\"submit\" value=\"logout\" onClick={handleLogout}/>\r\n\r\n        <form onSubmit={acceptPartner} ref={acceptRef}>\r\n        <input type=\"text\" id=\"reqId\" name=\"senderId\"/>\r\n        <input type=\"submit\"/>\r\n        </form>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\UserProfileForm.js",["128","129","130"],"import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport '../css/profileInfo.css';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nconst genders = [\r\n    {\r\n      value: 'male',\r\n      label: 'male',\r\n    },\r\n    {\r\n      value: 'female',\r\n      label: 'female',\r\n    },\r\n  ];\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n      marginTop:20,\r\n      minWidth: \"90%\",\r\n    },\r\n  }));\r\nexport default function UserProfileForm()\r\n{\r\n    const [nickname,setNickname] = useState(\"\");\r\n    const [bio,setBio] = useState(\"\");\r\n    const [croppedUrl, setCroppedUrl] = useState();\r\n    const [uploaded,setUploaded] = useState(false);\r\n    const [dob,setDob] = useState(new Date());\r\n    const [gender,setGender] = useState('male');\r\n    const [newProfile,setNewProfile]=useState(false);\r\n    const [partner,setPartner] = useState();\r\n    const formRef = useRef();\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn === false) {\r\n            window.open('/login', '_self');\r\n          } \r\n          else if(res.user.nickname)\r\n          {\r\n            setNickname(res.user.nickname);\r\n            setDob(res.user.dateOfBirth);\r\n            setGender(res.user.gender);\r\n            setBio(res.user.bio);\r\n            if(res.user.partner!==null)\r\n            {\r\n            setPartner(res.user.partner);\r\n            }\r\n          }\r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[]);\r\n      useEffect(() => {\r\n        const ac = new AbortController();\r\n      axios({\r\n        method:'get',\r\n        url:'/gridFs/checkExists',\r\n        headers: {'Content-Type': 'multipart/form-data'}\r\n      })\r\n      .then(res=>res.data)\r\n      .catch(err=>console.log(err))\r\n      .then(res=>{\r\n        if(res===true)\r\n        {\r\n           document.getElementById(\"overlay\").style.visibility=\"hidden\";\r\n        }\r\n      })\r\n      return function cancel() {\r\n        ac.abort()\r\n      }\r\n    },[]);\r\n      if(uploaded)\r\n      {\r\n        const reader = new FileReader();\r\n        reader.onload = function(event){\r\n          if(event.target.result===null)\r\n          {\r\n            return;\r\n          }\r\n          document.getElementById(\"avatarImg\").setAttribute(\"src\",event.target.result);\r\n        }\r\n        reader.readAsDataURL(croppedUrl);\r\n       \r\n      }\r\n      async function handleSubmit(event) {\r\n        if(uploaded){axios.get('/gridFs/deleteImg');}\r\n        event.preventDefault();\r\n        const formData = new FormData(formRef.current);\r\n        partner&&formData.append('partner',partner);\r\n         await  axios({\r\n            method:'post',\r\n            url:'/user/info',\r\n            data:formData,\r\n            headers: {'Content-Type': 'multipart/form-data'}\r\n          })\r\n          window.location.href = \"/\";\r\n      }\r\n\r\n      function toggleNewFile(event)\r\n      {\r\n        const file = event.target.files[0];\r\n         if(file===undefined)\r\n        {\r\n          return;\r\n        }\r\n        else\r\n        {\r\n         document.getElementById(\"overlay\").style.visibility=\"hidden\";\r\n         setCroppedUrl(file);\r\n         setUploaded(true);\r\n        }\r\n      }\r\n      \r\n      function uploadFile()\r\n      {\r\n         document.getElementById(\"file\").click();\r\n      }\r\n\r\n    return <div className=\"infoForm\" id=\"infoForm\">\r\n        \r\n    <form onSubmit={handleSubmit} ref={formRef}>\r\n      <div id=\"avatar\">\r\n       <ReactAvatar\r\n        id=\"overlay\"\r\n      />\r\n       <img src={uploaded?\"\":\"/gridFs/getProfile\"} id=\"avatarImg\"/>\r\n      </div>\r\n      <div className=\"fileIpt\">\r\n          <input type=\"file\" name=\"file\" id=\"file\" onChange={toggleNewFile}/>\r\n          <IconButton\r\n          id=\"uploadBtn\"\r\n          onClick={uploadFile}\r\n          >\r\n            <AddAPhotoIcon/>\r\n          </IconButton>\r\n      </div>\r\n          <br/>\r\n          <div className=\"infoDiv\">\r\n            <TextField\r\n            id=\"nickname\"\r\n            className=\"inputFields\"\r\n            label=\"Nickname\"\r\n            variant=\"outlined\"\r\n            name=\"nickname\"\r\n            value={nickname}\r\n            onChange={(e) => {setNickname(e.target.value)}}/>\r\n            <br/>\r\n            <FormControl variant=\"outlined\" className={classes.formControl}>\r\n            <InputLabel id=\"demo-simple-select-outlined-label\">Gender</InputLabel>\r\n            <Select\r\n              labelId=\"demo-simple-select-outlined-label\"\r\n              id=\"demo-simple-select-outlined\"\r\n              value={gender}\r\n              onChange={(e) => {setGender(e.target.value)}}\r\n              label=\"Gender\"\r\n              name=\"gender\"\r\n            >\r\n              {genders.map((option) => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl> \r\n          <br />\r\n          <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfBirth\"\r\n              label=\"Date of birth (mm/dd/yyyy)\"\r\n              name=\"dateOfBirth\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={dob}\r\n              onChange={(date) => {setDob(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>\r\n          \r\n          <br/>    \r\n        \r\n     \r\n          <TextField\r\n            id=\"bio\"\r\n            label=\"Bio\"\r\n            variant=\"outlined\"\r\n            name=\"bio\"\r\n            className=\"inputFields\"\r\n            value={bio}\r\n            onChange={(e) => {setBio(e.target.value)}}/>\r\n            <br/>\r\n            \r\n          <Button type=\"submit\" id=\"submitInfo\">\r\n              submit\r\n          </Button>\r\n          </div>\r\n        </form>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ActivityPane.js",["131"],"import Button from '@material-ui/core/Button';\r\nimport { useContext } from 'react';\r\n\r\n\r\nexport default function ActivityPane(props)\r\n{\r\n    const \r\n    {\r\n        title,\r\n        desc,\r\n        link,\r\n    }=props;\r\n\r\n    return<div>\r\n        <h1>{title}</h1>\r\n        <p>{desc}</p>\r\n        <Button\r\n        onClick={()=>{\r\n            window.open(link,'_self');\r\n        }}\r\n        >\r\n            Enter\r\n        </Button>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatRoom.js",["132","133","134","135","136","137","138","139","140","141","142"],"import {useEffect, useState,useRef, useContext} from 'react';\r\nimport io from 'socket.io-client';\r\nimport axios from 'axios';\r\nimport InputBox from './InputBox';\r\nimport '../css/chatroom.css';\r\nimport ChatNav from './ChatNav';\r\nimport ChatBubble from './ChatBubble';\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\nimport { SocketContext } from \"../SocketContext\";\r\nimport VideoRespond from './VideoRespond';\r\nimport VideoCall from './VideoCall';\r\n\r\nexport default function ChatRoom(props)\r\n{\r\n    const ENDPOINT = 'localhost:5000';\r\n    const [userInfo,setUserInfo] = useState();\r\n    const [userId,setUserId] = useState();\r\n    const [roomId,setRoomId] = useState();\r\n    const [text,setText] = useState(\"\");\r\n    const [userNickname,setUserNickname] = useState();\r\n    const [messages,setMessages] = useState([]);\r\n    const [partnerInfo,setPartnerInfo] = useState([]);\r\n    const [isUser,setIsUser] = useState(false);\r\n    const [partnerStatus,setPartnerStatus] = useState();\r\n    // const [isCalling,setIsCalling] = useState();\r\n    const {joinRoom,sendMsg,newMessage,callUser,call,me,callAccepted,onBoth,startCall} = useContext(SocketContext);\r\n\r\n    useEffect(()=>{\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n            if(res.isLoggedIn)\r\n            {\r\n              let userId = res.user._id;\r\n              let partner = res.user.partner;\r\n              let nickname = res.user.nickname;\r\n              console.log(nickname);\r\n              setPartnerInfo(res.partnerInfo)\r\n                if(res.user.partner!==null)\r\n                { \r\n                  axios({ \r\n                    method:'get',\r\n                    url:'/user/getRoomId',\r\n                    headers: {'Content-Type': 'multipart/form-data'}\r\n                  })\r\n                  .then(res=>res.data)\r\n                  .catch(err=>console.log(err))\r\n                  .then(res=>{\r\n                    setMessages(res.chatInfo.chats.reverse().map(chat=>{\r\n                      return chat;\r\n                    }))\r\n                    let roomId = res.roomInfo._id;\r\n                    setRoomId(roomId);\r\n                    if(nickname)\r\n                    {\r\n                       joinRoom(roomId,userId,nickname);  \r\n                    }\r\n                  })\r\n                }\r\n                setUserId(res.user._id);\r\n                setUserInfo({...res.user});\r\n                setUserNickname(res.user.nickname);\r\n            }\r\n        });\r\n        return function cancel() {\r\n            ac.abort();\r\n          }\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n      setMessages(prevData=>{\r\n        return[...prevData,newMessage]\r\n      })\r\n      \r\n    },[newMessage]);\r\n\r\n    \r\n    function handleSendMsg(event)\r\n    {\r\n      let msg = document.getElementById(\"chat\").value;\r\n      event.preventDefault();\r\n      if(msg.length>0&&roomId)\r\n      {\r\n        sendMsg(msg,roomId,userId,userNickname);\r\n        setText(\"\");\r\n      }\r\n      else{\r\n        console.log(\"You cant send anything\")\r\n      }\r\n      document.getElementById(\"chat\").value = null;\r\n    }\r\n\r\n    function toggleBackHome()\r\n    {\r\n      window.open('/','_self');\r\n    }\r\n\r\n    async function toggleVideoCall()\r\n    {\r\n      await startCall();\r\n      await callUser();\r\n    };\r\n    return<div>\r\n        {call.isReceivingCall &&!callAccepted&&<VideoRespond/>}\r\n     <VideoCall/>\r\n      \r\n      <div className=\"container\" id=\"container\">\r\n     \r\n\t\t<div className=\"chat_box\">\r\n\t\t\t<ChatNav toggleBackHome={toggleBackHome} partnerInfo={partnerInfo} partnerStatus={partnerStatus} toggleVideoCall={toggleVideoCall}/>\r\n\t\t\t<div className=\"body\">\r\n\t\t\t\t<div className=\"incoming\">\r\n          <ScrollToBottom>\r\n          {messages&&userInfo&&messages.map((chat,index)=>{\r\n            return <ChatBubble key={index}textInfo={chat} user={userInfo}/>\r\n          })} \r\n\r\n          </ScrollToBottom>\r\n          \r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <div class=\"typing\">\r\n\t\t\t\t\t<div class=\"bubble\">\r\n\t\t\t\t\t\t<div class=\"ellipsis dot_1\"></div>\r\n\t\t\t\t\t\t<div class=\"ellipsis dot_2\"></div>\r\n\t\t\t\t\t\t<div class=\"ellipsis dot_3\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t\t<InputBox handleSendMsg={handleSendMsg}/>\r\n\t\t</div>\r\n\t</div>\r\n\r\n  </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Navbar.js",[],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\InputBox.js",[],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatNav.js",["143","144","145"],"import '../css/chatNav.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\nimport PhoneIcon from '@material-ui/icons/Phone';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function ChatNav(props)\r\n{\r\n    const {toggleBackHome,partnerInfo,partnerStatus,toggleVideoCall,callAccepted} = props\r\n\tconst [readyDisplay,setReadyDisplay] = useState(false);\r\n\tconst [isOnline,setIsOnline] = useState(false);\r\n\tuseEffect(()=>{\r\n\t\tconst ac = new AbortController();\r\n\t\tif(partnerInfo)\r\n\t\t{\r\n\t\t\tsetReadyDisplay(true);\r\n\t\t}\r\n\t\treturn function cancel() {\r\n            ac.abort();\r\n          }\r\n\t},[partnerInfo])\r\n\r\n\t\tif(partnerStatus&&partnerInfo)\r\n\t\t{\r\n\t\t\tpartnerStatus.map(user=>{\r\n\t\t\t\tif(user===partnerInfo._id)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tsetIsOnline(true);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\r\n    return<div className=\"chatNav-div\">\r\n\t\t{isOnline&&<h1>ONLINE</h1>}\r\n        <div className=\"head\">\r\n        <IconButton id=\"backBtn\" onClick={toggleBackHome}><ArrowBackIcon/></IconButton> \r\n\t\t\t\t<div className=\"user\">\r\n\t\t\t\t\t<div className=\"avatar\" id=\"avatarStatus\">\r\n\t\t\t\t\t\t<img src=\"/gridFs/getPartnerProfile\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t\t{readyDisplay&&<div className=\"name\">{partnerInfo.nickname}</div>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul id=\"bar_tool\">\r\n\t\t\t\t\t<IconButton id=\"iconBtn\"><span className=\"alink\"><PhoneIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t\t<IconButton id=\"iconBtn\" onClick={toggleVideoCall}><span className=\"alink\"><VideocamIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t\t<IconButton id=\"iconBtn\"><span className=\"alink\"><MoreHorizIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\ChatBubble.js",["146","147","148"],"import {useEffect, useState} from 'react';\r\nimport '../css/chatBubble.css';\r\n\r\n\r\nexport default function ChatBubble(props)\r\n{\r\n    const{textInfo,user}= props;\r\n    if(textInfo&&textInfo.userId===user._id)\r\n    {       \r\n        return<div className=\"bubble-div right\">\r\n           <div className = \"context\">\r\n            <p>{textInfo&&textInfo.text}</p>\r\n           </div>\r\n        </div>\r\n    }\r\n    else{\r\n        return<div className=\"bubble-div left\">\r\n            <div className=\"img-div\">\r\n            <img src=\"/gridFs/getPartnerProfile\"/>\r\n            </div>\r\n            <div className = \"context\">\r\n            <p>{textInfo&&textInfo.text}</p>\r\n           </div>\r\n        </div>\r\n    }\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\SocketContext.js",["149","150"],"C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoCall.js",["151","152","153","154","155","156"],"import { useContext, useEffect,useRef, useState } from \"react\"\r\nimport { SocketContext } from \"../SocketContext\";\r\nimport '../css/videoCall.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport CallEndIcon from '@material-ui/icons/CallEnd';\r\nimport MicOffIcon from '@material-ui/icons/MicOff';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\n\r\nexport default function VideoCall()\r\n{\r\n    const {name,callAccepted,myVideo,userVideo,callEnded,stream,callUser,leaveCall,initializeVideo,muteAudio,muteVideo,declineCall,isAnswered} = useContext(SocketContext);\r\n        const [isMuted,setIsMuted] = useState(false);\r\n        const [isDisplayed,setIsDisplayed] = useState(true);\r\n   \r\n \r\n   \r\n   function handleMute()\r\n   {\r\n           setIsMuted(!isMuted);\r\n           muteAudio();\r\n   }\r\n   function handleDisplay()\r\n   {\r\n           setIsDisplayed(!isDisplayed);\r\n           muteVideo();\r\n   }\r\n       console.log(isAnswered);\r\n        return <div className=\"video-div\" id=\"video-div\">\r\n\r\n                \r\n                <div className=\"vid-call\">\r\n                 <video playsInline muted ref={myVideo} autoPlay />        \r\n                </div>\r\n                {callAccepted&&!callEnded&&\r\n                <div className=\"vid-call1\">\r\n                <video playsInline muted ref={userVideo} autoPlay />\r\n                </div>}\r\n                <div className=\"option-div\">\r\n                <IconButton onClick={handleDisplay} className=\"option-btn\" id=\"display\">{isDisplayed?<VideocamIcon/>:<VideocamOffIcon/>}</IconButton>\r\n                <IconButton onClick={isAnswered?leaveCall:declineCall} className=\"option-btn\" id=\"end\"><CallEndIcon fontSize=\"inherit\"/></IconButton>\r\n                <IconButton onClick={handleMute} className=\"option-btn\">{isMuted?<MicOffIcon/>:<MicIcon/>}</IconButton>\r\n                </div>\r\n        </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\VideoRespond.js",["157","158","159","160","161","162","163"],"import DoneIcon from '@material-ui/icons/Done';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { useContext, useEffect } from 'react';\r\nimport {SocketContext} from '../SocketContext';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { Icon } from '@material-ui/core';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nexport default function VideoRespond(props)\r\n{\r\n\r\n    const{answerCall,leaveCall,call,initializeVideo,callUser,declineCall,isCaller,isAnswered} = useContext(SocketContext);\r\n\r\n\r\n   \r\n\r\n\r\n   async function answer()\r\n    {\r\n        document.getElementById(\"container\").style.left = \"36%\"\r\n        document.getElementById(\"container\").style.width = \"70%\";\r\n        document.getElementById(\"chat\").style.width = \"800px\";\r\n        document.getElementById(\"video-div\").style.display = \"block\";\r\n        answerCall();\r\n        \r\n    }\r\n\r\n    return <div className=\"respond\">\r\n        <Avatar src=\"/gridFs/getPartnerProfile\" id=\"caller\"/>\r\n        <div className=\"description\">\r\n            <h3>{call.name} wants to call you</h3>\r\n        </div>\r\n        <div className=\"choice\">\r\n        <IconButton id=\"choice-btn\" onClick={answer}><DoneIcon/></IconButton>\r\n        <IconButton id=\"choice-canc\" onClick={declineCall}><ClearIcon/></IconButton>\r\n        </div>\r\n    </div>\r\n}","C:\\Users\\PC\\temp\\couplove\\client\\src\\components\\Cinema.js",[],{"ruleId":"164","replacedBy":"165"},{"ruleId":"166","replacedBy":"167"},{"ruleId":"168","severity":1,"message":"169","line":16,"column":8,"nodeType":"170","messageId":"171","endLine":16,"endColumn":19},{"ruleId":"172","severity":1,"message":"173","line":104,"column":9,"nodeType":"174","endLine":104,"endColumn":70},{"ruleId":"168","severity":1,"message":"175","line":1,"column":30,"nodeType":"170","messageId":"171","endLine":1,"endColumn":36},{"ruleId":"168","severity":1,"message":"176","line":17,"column":10,"nodeType":"170","messageId":"171","endLine":17,"endColumn":18},{"ruleId":"168","severity":1,"message":"177","line":17,"column":19,"nodeType":"170","messageId":"171","endLine":17,"endColumn":30},{"ruleId":"168","severity":1,"message":"178","line":19,"column":10,"nodeType":"170","messageId":"171","endLine":19,"endColumn":16},{"ruleId":"168","severity":1,"message":"179","line":19,"column":17,"nodeType":"170","messageId":"171","endLine":19,"endColumn":26},{"ruleId":"172","severity":1,"message":"173","line":16,"column":13,"nodeType":"174","endLine":16,"endColumn":120},{"ruleId":"164","replacedBy":"180"},{"ruleId":"166","replacedBy":"181"},{"ruleId":"172","severity":1,"message":"173","line":16,"column":13,"nodeType":"174","endLine":16,"endColumn":120},{"ruleId":"168","severity":1,"message":"169","line":3,"column":8,"nodeType":"170","messageId":"171","endLine":3,"endColumn":19},{"ruleId":"168","severity":1,"message":"182","line":5,"column":8,"nodeType":"170","messageId":"171","endLine":5,"endColumn":14},{"ruleId":"168","severity":1,"message":"183","line":11,"column":7,"nodeType":"170","messageId":"171","endLine":11,"endColumn":16},{"ruleId":"168","severity":1,"message":"176","line":22,"column":10,"nodeType":"170","messageId":"171","endLine":22,"endColumn":18},{"ruleId":"168","severity":1,"message":"184","line":23,"column":10,"nodeType":"170","messageId":"171","endLine":23,"endColumn":21},{"ruleId":"168","severity":1,"message":"185","line":24,"column":10,"nodeType":"170","messageId":"171","endLine":24,"endColumn":16},{"ruleId":"168","severity":1,"message":"186","line":24,"column":17,"nodeType":"170","messageId":"171","endLine":24,"endColumn":26},{"ruleId":"168","severity":1,"message":"187","line":25,"column":10,"nodeType":"170","messageId":"171","endLine":25,"endColumn":15},{"ruleId":"168","severity":1,"message":"188","line":25,"column":16,"nodeType":"170","messageId":"171","endLine":25,"endColumn":24},{"ruleId":"189","severity":1,"message":"190","line":57,"column":38,"nodeType":"191","messageId":"192","endLine":57,"endColumn":40},{"ruleId":"168","severity":1,"message":"193","line":79,"column":16,"nodeType":"170","messageId":"171","endLine":79,"endColumn":31},{"ruleId":"189","severity":1,"message":"190","line":108,"column":27,"nodeType":"191","messageId":"192","endLine":108,"endColumn":29},{"ruleId":"168","severity":1,"message":"194","line":46,"column":12,"nodeType":"170","messageId":"171","endLine":46,"endColumn":22},{"ruleId":"168","severity":1,"message":"195","line":46,"column":23,"nodeType":"170","messageId":"171","endLine":46,"endColumn":36},{"ruleId":"172","severity":1,"message":"173","line":149,"column":8,"nodeType":"174","endLine":149,"endColumn":68},{"ruleId":"168","severity":1,"message":"196","line":2,"column":10,"nodeType":"170","messageId":"171","endLine":2,"endColumn":20},{"ruleId":"168","severity":1,"message":"175","line":1,"column":29,"nodeType":"170","messageId":"171","endLine":1,"endColumn":35},{"ruleId":"168","severity":1,"message":"197","line":2,"column":8,"nodeType":"170","messageId":"171","endLine":2,"endColumn":10},{"ruleId":"168","severity":1,"message":"198","line":15,"column":11,"nodeType":"170","messageId":"171","endLine":15,"endColumn":19},{"ruleId":"168","severity":1,"message":"199","line":19,"column":12,"nodeType":"170","messageId":"171","endLine":19,"endColumn":16},{"ruleId":"168","severity":1,"message":"200","line":23,"column":12,"nodeType":"170","messageId":"171","endLine":23,"endColumn":18},{"ruleId":"168","severity":1,"message":"201","line":23,"column":19,"nodeType":"170","messageId":"171","endLine":23,"endColumn":28},{"ruleId":"168","severity":1,"message":"202","line":24,"column":26,"nodeType":"170","messageId":"171","endLine":24,"endColumn":42},{"ruleId":"168","severity":1,"message":"203","line":26,"column":54,"nodeType":"170","messageId":"171","endLine":26,"endColumn":56},{"ruleId":"168","severity":1,"message":"204","line":26,"column":70,"nodeType":"170","messageId":"171","endLine":26,"endColumn":76},{"ruleId":"168","severity":1,"message":"205","line":37,"column":19,"nodeType":"170","messageId":"171","endLine":37,"endColumn":26},{"ruleId":"206","severity":1,"message":"207","line":70,"column":7,"nodeType":"208","endLine":70,"endColumn":9,"suggestions":"209"},{"ruleId":"168","severity":1,"message":"210","line":11,"column":69,"nodeType":"170","messageId":"171","endLine":11,"endColumn":81},{"ruleId":"189","severity":1,"message":"190","line":27,"column":26,"nodeType":"191","messageId":"192","endLine":27,"endColumn":28},{"ruleId":"172","severity":1,"message":"173","line":41,"column":7,"nodeType":"174","endLine":41,"endColumn":46},{"ruleId":"168","severity":1,"message":"211","line":1,"column":9,"nodeType":"170","messageId":"171","endLine":1,"endColumn":18},{"ruleId":"168","severity":1,"message":"212","line":1,"column":20,"nodeType":"170","messageId":"171","endLine":1,"endColumn":28},{"ruleId":"172","severity":1,"message":"173","line":19,"column":13,"nodeType":"174","endLine":19,"endColumn":51},{"ruleId":"168","severity":1,"message":"213","line":23,"column":19,"nodeType":"170","messageId":"171","endLine":23,"endColumn":30},{"ruleId":"168","severity":1,"message":"214","line":24,"column":16,"nodeType":"170","messageId":"171","endLine":24,"endColumn":24},{"ruleId":"168","severity":1,"message":"211","line":1,"column":22,"nodeType":"170","messageId":"171","endLine":1,"endColumn":31},{"ruleId":"168","severity":1,"message":"175","line":1,"column":32,"nodeType":"170","messageId":"171","endLine":1,"endColumn":38},{"ruleId":"168","severity":1,"message":"215","line":13,"column":12,"nodeType":"170","messageId":"171","endLine":13,"endColumn":16},{"ruleId":"168","severity":1,"message":"216","line":13,"column":58,"nodeType":"170","messageId":"171","endLine":13,"endColumn":64},{"ruleId":"168","severity":1,"message":"217","line":13,"column":65,"nodeType":"170","messageId":"171","endLine":13,"endColumn":73},{"ruleId":"168","severity":1,"message":"218","line":13,"column":84,"nodeType":"170","messageId":"171","endLine":13,"endColumn":99},{"ruleId":"168","severity":1,"message":"211","line":3,"column":22,"nodeType":"170","messageId":"171","endLine":3,"endColumn":31},{"ruleId":"168","severity":1,"message":"219","line":6,"column":10,"nodeType":"170","messageId":"171","endLine":6,"endColumn":14},{"ruleId":"168","severity":1,"message":"220","line":12,"column":22,"nodeType":"170","messageId":"171","endLine":12,"endColumn":31},{"ruleId":"168","severity":1,"message":"218","line":12,"column":37,"nodeType":"170","messageId":"171","endLine":12,"endColumn":52},{"ruleId":"168","severity":1,"message":"217","line":12,"column":53,"nodeType":"170","messageId":"171","endLine":12,"endColumn":61},{"ruleId":"168","severity":1,"message":"221","line":12,"column":74,"nodeType":"170","messageId":"171","endLine":12,"endColumn":82},{"ruleId":"168","severity":1,"message":"222","line":12,"column":83,"nodeType":"170","messageId":"171","endLine":12,"endColumn":93},"no-native-reassign",["223"],"no-negated-in-lhs",["224"],"no-unused-vars","'ReactAvatar' is defined but never used.","Identifier","unusedVar","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","'useRef' is defined but never used.","'userInfo' is assigned a value but never used.","'setUserInfo' is assigned a value but never used.","'imgUrl' is assigned a value but never used.","'setImgUrl' is assigned a value but never used.",["223"],["224"],"'Button' is defined but never used.","'useStyles' is assigned a value but never used.","'havePartner' is assigned a value but never used.","'roomId' is assigned a value but never used.","'setRoomId' is assigned a value but never used.","'reqId' is assigned a value but never used.","'setReqId' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'handleChatClick' is defined but never used.","'newProfile' is assigned a value but never used.","'setNewProfile' is assigned a value but never used.","'useContext' is defined but never used.","'io' is defined but never used.","'ENDPOINT' is assigned a value but never used.","'text' is assigned a value but never used.","'isUser' is assigned a value but never used.","'setIsUser' is assigned a value but never used.","'setPartnerStatus' is assigned a value but never used.","'me' is assigned a value but never used.","'onBoth' is assigned a value but never used.","'partner' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'joinRoom'. Either include it or remove the dependency array.","ArrayExpression",["225"],"'callAccepted' is assigned a value but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","'setIsOnline' is assigned a value but never used.","'setUsers' is assigned a value but never used.","'name' is assigned a value but never used.","'stream' is assigned a value but never used.","'callUser' is assigned a value but never used.","'initializeVideo' is assigned a value but never used.","'Icon' is defined but never used.","'leaveCall' is assigned a value but never used.","'isCaller' is assigned a value but never used.","'isAnswered' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"226","fix":"227"},"Update the dependencies array to be: [joinRoom]",{"range":"228","text":"229"},[2670,2672],"[joinRoom]"]