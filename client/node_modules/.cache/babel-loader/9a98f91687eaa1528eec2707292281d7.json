{"ast":null,"code":"import _slicedToArray from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState,useRef}from'react';import axios from'axios';import NavBar from'../Navbar';import'../../css/memoryBook.css';import CreatePost from'./CreatePost';import MemoryPost from'./MemoryPost';import Button from'@material-ui/core/Button';import AddCircleOutlineIcon from'@material-ui/icons/AddCircleOutline';import IconButton from'@material-ui/core/IconButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MemoryBook(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),userInfo=_useState2[0],setUserInfo=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),partnerInfo=_useState4[0],setPartnerInfo=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),postData=_useState6[0],setPostData=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isEditing=_useState8[0],setIsEditing=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPosting=_useState10[0],setIsPosting=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),posts=_useState12[0],setPosts=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),havePartner=_useState14[0],setHavePartner=_useState14[1];var formRef=useRef();useEffect(function(){axios.get('/auth/isLoggedIn').then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){if(res.isLoggedIn){if(res.user.partner!==null){setHavePartner(true);}setUserInfo(res.user);setPartnerInfo(res.partnerInfo);axios({method:'post',url:'/post/getPosts'}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){if(res.success){setPosts(res.posts);}});}});},[]);function handlePost(){setIsPosting(false);setIsEditing(false);setPostData();}return/*#__PURE__*/_jsxs(\"div\",{className:\"memoryBook\",children:[isPosting&&/*#__PURE__*/_jsx(CreatePost,{setPostData:setPostData,setPost:setPosts,postData:postData,handlePost:handlePost,userInfo:userInfo,setIsPosting:setIsPosting,isEditing:isEditing,setIsEditing:setIsEditing}),/*#__PURE__*/_jsxs(\"div\",{className:\"memoryBook-div\",id:\"memoryBook\",style:{opacity:isPosting||isEditing?\"0.3\":\"1\"},children:[/*#__PURE__*/_jsx(NavBar,{havePartner:havePartner}),/*#__PURE__*/_jsx(\"div\",{className:\"postDiv\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post-option\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Post Some Memorable Moment Here\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",id:\"memory-create-post\",onClick:function onClick(){return setIsPosting(true);},children:\"Create Memory \\uD83E\\uDD0D\"})]})}),posts.map(function(post){return/*#__PURE__*/_jsx(MemoryPost,{setPost:setPosts,setPostData:setPostData,setIsPosting:setIsPosting,isEditing:isEditing,setIsEditing:setIsEditing,post:post,userId:userInfo._id},post._id);})]})]});}","map":{"version":3,"sources":["C:/Users/PC/temp/couplove/client/src/components/MemoryBook/MemoryBook.js"],"names":["useEffect","useState","useRef","axios","NavBar","CreatePost","MemoryPost","Button","AddCircleOutlineIcon","IconButton","MemoryBook","userInfo","setUserInfo","partnerInfo","setPartnerInfo","postData","setPostData","isEditing","setIsEditing","isPosting","setIsPosting","posts","setPosts","havePartner","setHavePartner","formRef","get","then","res","data","catch","err","console","log","isLoggedIn","user","partner","method","url","success","handlePost","opacity","map","post","_id"],"mappings":"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","sourcesContent":["import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport NavBar from '../Navbar';\r\nimport '../../css/memoryBook.css';\r\nimport CreatePost from './CreatePost';\r\nimport MemoryPost from './MemoryPost';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function MemoryBook()\r\n{\r\n    const [userInfo,setUserInfo] = useState();\r\n    const [partnerInfo,setPartnerInfo] = useState();\r\n    const [postData,setPostData] = useState();\r\n    const [isEditing,setIsEditing] = useState(false);\r\n    const [isPosting,setIsPosting] = useState(false);\r\n    const [posts,setPosts] = useState([]);\r\n    const [havePartner,setHavePartner] = useState(false);\r\n\r\n    const formRef = useRef();\r\n\r\n\r\n   \r\n\r\n\r\n    useEffect(()=>{\r\n         axios.get('/auth/isLoggedIn')\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            if(res.isLoggedIn)\r\n            {\r\n                if(res.user.partner!==null)\r\n                {\r\n                    setHavePartner(true);\r\n                }\r\n                setUserInfo(res.user);\r\n                setPartnerInfo(res.partnerInfo);\r\n\r\n                axios({\r\n                    method:'post',\r\n                    url:'/post/getPosts',\r\n                })\r\n                .then(res=>res.data)\r\n                .catch(err=>console.log(err))\r\n                .then(res=>{\r\n                    if(res.success)\r\n                    {\r\n                        setPosts(res.posts)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },[])  \r\n\r\n    function handlePost()\r\n    {\r\n        setIsPosting(false);\r\n        setIsEditing(false);\r\n        setPostData();\r\n    }\r\n    return <div className=\"memoryBook\">\r\n        {isPosting&&<CreatePost  setPostData={setPostData} setPost={setPosts} postData={postData} handlePost={handlePost} userInfo={userInfo} setIsPosting={setIsPosting} isEditing={isEditing} setIsEditing={setIsEditing}/>}\r\n        <div className=\"memoryBook-div\" id=\"memoryBook\" style={{opacity:isPosting||isEditing?\"0.3\":\"1\"}}>\r\n            <NavBar havePartner={havePartner}/>\r\n                <div className=\"postDiv\">\r\n                    <div className=\"post-option\">\r\n                    <h3>Post Some Memorable Moment Here</h3>\r\n                    <Button variant=\"contained\" id=\"memory-create-post\" onClick={()=>setIsPosting(true)}>\r\n                    Create Memory ü§ç\r\n                    </Button>\r\n                    </div>\r\n            </div>\r\n            {posts.map(post=>{\r\n              return  <MemoryPost key={post._id}  setPost={setPosts} setPostData={setPostData} setIsPosting={setIsPosting} isEditing={isEditing} setIsEditing={setIsEditing} post={post} userId={userInfo._id}/>\r\n            })}\r\n        </div>\r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}