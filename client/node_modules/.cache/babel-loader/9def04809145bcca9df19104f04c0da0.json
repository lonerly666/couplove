{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import axios from'axios';import Button from'@material-ui/core/Button';import ArrowDropDownIcon from'@material-ui/icons/ArrowDropDown';import ArrowDropUpIcon from'@material-ui/icons/ArrowDropUp';import IconButton from'@material-ui/core/IconButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function VideoList(props){var handleChooseMovie=props.handleChooseMovie,socket=props.socket;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setFiles=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),dropdown=_useState4[0],setDropdown=_useState4[1];useEffect(function(){axios.get('/videoFs/getAllVideos').then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){var temp=[];for(var i=0;i<res.length;i++){temp.push(res[i]);}setFiles(temp);});},[]);function handleDropDown(){var state=!dropdown;if(state){document.getElementById('video-file').style.top=0;}else{document.getElementById('video-file').style.top=\"-68px\";}setDropdown(!dropdown);}function handleDeleteVideo(_x){return _handleDeleteVideo.apply(this,arguments);}function _handleDeleteVideo(){_handleDeleteVideo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(videoId){var formdata;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:formdata=new FormData();formdata.append('videoId',videoId);_context.next=4;return axios({method:'post',url:'/videoFs/deleteVideo',data:formdata,headers:{'Content-Type':'multipart/form-data'}}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){console.log(res);if(res){setFiles(function(prev){return prev.filter(function(file){return file._id!==videoId;});});if(socket)socket.emit('deletedVideo');}});case 4:case\"end\":return _context.stop();}}},_callee);}));return _handleDeleteVideo.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"video-file\",id:\"video-file\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"video-scroll\",children:files.map(function(file){return/*#__PURE__*/_jsxs(\"div\",{className:\"video-list-div\",children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:function onClick(){return handleChooseMovie(file.filename);},id:\"list\",children:file.aliases},file._id),/*#__PURE__*/_jsx(\"button\",{id:\"video-delete\",onClick:function onClick(){return handleDeleteVideo(file._id);},children:\"x\"})]});})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",id:\"drop-down\",onClick:handleDropDown,children:dropdown?/*#__PURE__*/_jsx(ArrowDropUpIcon,{}):/*#__PURE__*/_jsx(ArrowDropDownIcon,{})})]});}","map":{"version":3,"sources":["C:/Users/PC/temp/couplove/client/src/components/VideoList.js"],"names":["useEffect","useState","axios","Button","ArrowDropDownIcon","ArrowDropUpIcon","IconButton","VideoList","props","handleChooseMovie","socket","files","setFiles","dropdown","setDropdown","get","then","res","data","catch","err","console","log","temp","i","length","push","handleDropDown","state","document","getElementById","style","top","handleDeleteVideo","videoId","formdata","FormData","append","method","url","headers","prev","filter","file","_id","emit","map","filename","aliases"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport axios from 'axios';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function VideoList(props)\r\n{\r\n    const {handleChooseMovie,socket} = props;\r\n    const [files,setFiles] = useState([]);\r\n    const [dropdown,setDropdown] = useState(false);\r\n    useEffect(()=>{\r\n        axios.get('/videoFs/getAllVideos')\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            let temp = [];\r\n            for(let i=0;i<res.length;i++)\r\n            {\r\n                temp.push(res[i]);\r\n            }\r\n            setFiles(temp);\r\n        })\r\n\r\n    },[])   \r\n    function handleDropDown()\r\n    {\r\n        let state = !dropdown;\r\n        if(state)\r\n        {\r\n            document.getElementById('video-file').style.top=0;\r\n        }\r\n        else\r\n        {\r\n            document.getElementById('video-file').style.top  = \"-68px\";\r\n        }\r\n        setDropdown(!dropdown);\r\n    }\r\n    async function handleDeleteVideo(videoId)\r\n    {\r\n        const formdata = new FormData();\r\n        formdata.append('videoId',videoId);\r\n        await axios({\r\n            method:'post',\r\n            url:'/videoFs/deleteVideo',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            console.log(res);\r\n            if(res)\r\n            {\r\n              setFiles(prev=>{\r\n                  return prev.filter(file=>{\r\n                      return file._id!==videoId\r\n                  })\r\n              })\r\n              if(socket)socket.emit('deletedVideo');\r\n           }\r\n        })\r\n    }\r\n\r\n    return<div className=\"video-file\" id=\"video-file\">\r\n        <div className=\"video-scroll\">\r\n        {files.map(file=>{\r\n            return<div className=\"video-list-div\">\r\n                \r\n                <Button key={file._id} variant=\"outlined\" onClick={()=>handleChooseMovie(file.filename)} id=\"list\">{file.aliases}</Button> \r\n                <button id=\"video-delete\" onClick={()=>handleDeleteVideo(file._id)}>x</button>\r\n            </div>  \r\n        })} \r\n        </div>\r\n        <IconButton\r\n        size=\"small\"\r\n        id=\"drop-down\"\r\n        onClick={handleDropDown}\r\n        >\r\n        {dropdown?<ArrowDropUpIcon/>:<ArrowDropDownIcon/>}\r\n        </IconButton>\r\n    </div>\r\n\r\n}"]},"metadata":{},"sourceType":"module"}