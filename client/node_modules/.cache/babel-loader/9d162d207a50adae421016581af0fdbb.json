{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import'../css/chatNav.css';import IconButton from'@material-ui/core/IconButton';import VideocamIcon from'@material-ui/icons/Videocam';import MoreHorizIcon from'@material-ui/icons/MoreHoriz';import PhotoIcon from'@material-ui/icons/Photo';import{useEffect,useState,useRef}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ChatNav(props){var toggleBackHome=props.toggleBackHome,partnerInfo=props.partnerInfo,partnerStatus=props.partnerStatus,toggleVideoCall=props.toggleVideoCall,callAccepted=props.callAccepted,setBackgroundUrl=props.setBackgroundUrl;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),readyDisplay=_useState2[0],setReadyDisplay=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOnline=_useState4[0],setIsOnline=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),openMore=_useState6[0],setOpenMore=_useState6[1];var imgRef=useRef();useEffect(function(){var ac=new AbortController();if(partnerInfo){setReadyDisplay(true);}return function cancel(){ac.abort();};},[partnerInfo]);if(partnerStatus&&partnerInfo){partnerStatus.map(function(user){if(user===partnerInfo._id){setIsOnline(true);}});}function toggleChangeBackground(_x){return _toggleChangeBackground.apply(this,arguments);}function _toggleChangeBackground(){_toggleChangeBackground=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var formdata;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/chat/deleteBackground');case 2:formdata=new FormData();formdata.append('file',event.target.files[0]);_context.next=6;return axios({method:'post',url:'/chat/uploadChatImg',data:formdata,headers:{'Content-Type':'multipart/form-data'}});case 6:window.location.reload();case 7:case\"end\":return _context.stop();}}},_callee);}));return _toggleChangeBackground.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"chatNav-div\",children:[isOnline&&/*#__PURE__*/_jsx(\"h1\",{children:\"ONLINE\"}),openMore&&/*#__PURE__*/_jsx(\"div\",{className:\"chatNav-moreOption\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"chatNav-changeBackground\",onClick:function onClick(){return document.getElementById('chatNav-file').click();},children:[/*#__PURE__*/_jsx(PhotoIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"file\",hidden:true,id:\"chatNav-file\",onChange:toggleChangeBackground})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"head\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"avatar\",id:\"avatarStatus\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/gridFs/getPartnerProfile\"})}),readyDisplay&&/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:partnerInfo.nickname})]}),/*#__PURE__*/_jsxs(\"ul\",{id:\"bar_tool\",children:[/*#__PURE__*/_jsx(IconButton,{id:\"iconBtn\",onClick:toggleVideoCall,children:/*#__PURE__*/_jsx(\"span\",{className:\"alink\",children:/*#__PURE__*/_jsx(VideocamIcon,{id:\"contact\"})})}),/*#__PURE__*/_jsx(IconButton,{id:\"iconBtn\",onClick:function onClick(){return setOpenMore(!openMore);},children:/*#__PURE__*/_jsx(\"span\",{className:\"alink\",children:/*#__PURE__*/_jsx(MoreHorizIcon,{id:\"contact\"})})})]})]})]});}","map":{"version":3,"sources":["C:/Users/PC/temp/couplove/client/src/components/ChatNav.js"],"names":["IconButton","VideocamIcon","MoreHorizIcon","PhotoIcon","useEffect","useState","useRef","axios","ChatNav","props","toggleBackHome","partnerInfo","partnerStatus","toggleVideoCall","callAccepted","setBackgroundUrl","readyDisplay","setReadyDisplay","isOnline","setIsOnline","openMore","setOpenMore","imgRef","ac","AbortController","cancel","abort","map","user","_id","toggleChangeBackground","event","get","formdata","FormData","append","target","files","method","url","data","headers","window","location","reload","document","getElementById","click","nickname"],"mappings":"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","sourcesContent":["import '../css/chatNav.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport { useEffect, useState,useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function ChatNav(props)\r\n{\r\n    const {toggleBackHome,partnerInfo,partnerStatus,toggleVideoCall,callAccepted,setBackgroundUrl} = props\r\n\tconst [readyDisplay,setReadyDisplay] = useState(false);\r\n\tconst [isOnline,setIsOnline] = useState(false);\r\n\tconst [openMore,setOpenMore] = useState(false);\r\n\r\n\r\n\tconst imgRef = useRef();\r\n\r\n\tuseEffect(()=>{\r\n\t\tconst ac = new AbortController();\r\n\t\tif(partnerInfo)\r\n\t\t{\r\n\t\t\tsetReadyDisplay(true);\r\n\t\t}\r\n\t\treturn function cancel() {\r\n            ac.abort();\r\n          }\r\n\t},[partnerInfo])\r\n\r\n\t\tif(partnerStatus&&partnerInfo)\r\n\t\t{\r\n\t\t\tpartnerStatus.map(user=>{\r\n\t\t\t\tif(user===partnerInfo._id)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tsetIsOnline(true);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\r\n\r\n\tasync function toggleChangeBackground(event)\r\n\t{\r\n\t\tawait axios.get('/chat/deleteBackground')\r\n\t\tconst formdata = new FormData();\r\n\t\tformdata.append('file',event.target.files[0])\r\n\t\tawait axios({\r\n\t\t\tmethod:'post',\r\n\t\t\turl:'/chat/uploadChatImg',\r\n\t\t\tdata:formdata,\r\n\t\t\theaders:{'Content-Type': 'multipart/form-data'}\r\n\t\t})\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n    return<div className=\"chatNav-div\">\r\n\t\t{isOnline&&<h1>ONLINE</h1>}\r\n\t\t{openMore&&<div className=\"chatNav-moreOption\">\r\n\t\t\t<div className=\"chatNav-changeBackground\" onClick={()=>document.getElementById('chatNav-file').click()}> \r\n\t\t\t\t<PhotoIcon/>\r\n\t\t\t\t<input type=\"file\" name=\"file\" hidden id=\"chatNav-file\" onChange={toggleChangeBackground}/>\t\r\n\t\t\t</div>\r\n\t\t</div>}\r\n        <div className=\"head\">\r\n\t\t\t\t<div className=\"user\">\r\n\t\t\t\t\t<div className=\"avatar\" id=\"avatarStatus\">\r\n\t\t\t\t\t\t<img src=\"/gridFs/getPartnerProfile\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t\t{readyDisplay&&<div className=\"name\">{partnerInfo.nickname}</div>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul id=\"bar_tool\">\r\n\t\t\t\t\t<IconButton id=\"iconBtn\" onClick={toggleVideoCall}><span className=\"alink\"><VideocamIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t\t<IconButton id=\"iconBtn\" onClick={()=>setOpenMore(!openMore)}><span className=\"alink\"><MoreHorizIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}