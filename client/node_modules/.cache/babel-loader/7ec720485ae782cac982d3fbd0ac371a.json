{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import ArrowLeftIcon from'@material-ui/icons/ArrowLeft';import CloudUploadIcon from'@material-ui/icons/CloudUpload';import ArrowRightIcon from'@material-ui/icons/ArrowRight';import IconButton from'@material-ui/core/IconButton';import Button from'@material-ui/core/Button';import{useState,useRef}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function VideoUploadDiv(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openUpload=_useState2[0],setOpenUpload=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),uploadProgress=_useState4[0],setUploadProgress=_useState4[1];var formRef=useRef();function handleUploadDiv(){var state=!openUpload;if(state){document.getElementById('upload-file').style.marginLeft=0;}else{document.getElementById('upload-file').style.marginLeft=\"-380px\";}setOpenUpload(!openUpload);}function displayFileName(event){document.getElementById('file-name').textContent=event.target.files[0].name;}function handleUploadVideo(_x){return _handleUploadVideo.apply(this,arguments);}function _handleUploadVideo(){_handleUploadVideo=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var formdata;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();if(!(document.getElementById('video').value===\"\")){_context.next=3;break;}return _context.abrupt(\"return\");case 3:setUploadProgress(true);formdata=new FormData(formRef.current);_context.next=7;return axios({method:'post',url:'/videoFs/upload',data:formdata,headers:{'Content-Type':'multipart/form-data'},onUploadProgress:function onUploadProgress(progressEvent){var progress=progressEvent.loaded/progressEvent.total*100;document.getElementById(\"uploadFileProgress\").style.width=progress+\"%\";if(progress===100){window.location.reload();}}});case 7:case\"end\":return _context.stop();}}},_callee);}));return _handleUploadVideo.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"upload-file\",id:\"upload-file\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUploadVideo,ref:formRef,children:[/*#__PURE__*/_jsx(IconButton,{size:\"medium\",onClick:function onClick(){return document.getElementById('video').click();},style:{color:\"white\"},children:/*#__PURE__*/_jsx(CloudUploadIcon,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"video\",id:\"video\",hidden:true,onChange:displayFileName}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"default\",type:\"submit\",children:\"Upload\"})]}),/*#__PURE__*/_jsx(\"p\",{id:\"file-name\",style:{color:\"rgb(56, 245, 71)\"}}),uploadProgress&&/*#__PURE__*/_jsx(\"div\",{className:\"uploadProgress\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progressBar\",id:\"uploadFileProgress\"})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",id:\"openUploadDiv\",onClick:handleUploadDiv,children:openUpload?/*#__PURE__*/_jsx(ArrowLeftIcon,{}):/*#__PURE__*/_jsx(ArrowRightIcon,{})})]});}","map":{"version":3,"sources":["C:/Users/PC/temp/couplove/client/src/components/VideoUploadDiv.js"],"names":["ArrowLeftIcon","CloudUploadIcon","ArrowRightIcon","IconButton","Button","useState","useRef","axios","VideoUploadDiv","props","openUpload","setOpenUpload","uploadProgress","setUploadProgress","formRef","handleUploadDiv","state","document","getElementById","style","marginLeft","displayFileName","event","textContent","target","files","name","handleUploadVideo","preventDefault","value","formdata","FormData","current","method","url","data","headers","onUploadProgress","progressEvent","progress","loaded","total","width","window","location","reload","click","color"],"mappings":"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","sourcesContent":["import ArrowLeftIcon from '@material-ui/icons/ArrowLeft';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport { useState,useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function VideoUploadDiv(props)\r\n{\r\n    const [openUpload,setOpenUpload] = useState(false);\r\n    const [uploadProgress,setUploadProgress] = useState(false);\r\n\r\n    const formRef = useRef();\r\n\r\n    function handleUploadDiv()\r\n    {\r\n      let state = !openUpload;\r\n      if(state)\r\n      {\r\n          document.getElementById('upload-file').style.marginLeft=0;\r\n      }\r\n      else\r\n      {\r\n          document.getElementById('upload-file').style.marginLeft=\"-380px\";\r\n      }\r\n      setOpenUpload(!openUpload);\r\n    }\r\n\r\n    function displayFileName(event)\r\n  {\r\n     document.getElementById('file-name').textContent= event.target.files[0].name;\r\n  }\r\n\r\n  async function handleUploadVideo(event)\r\n  {\r\n      event.preventDefault();\r\n      if(document.getElementById('video').value===\"\")\r\n      {\r\n          return;\r\n      }\r\n      setUploadProgress(true);\r\n      const formdata = new FormData(formRef.current);\r\n      await axios({\r\n          method:'post',\r\n          url:'/videoFs/upload',\r\n          data:formdata,\r\n          headers: {'Content-Type': 'multipart/form-data'},\r\n          onUploadProgress:progressEvent=>{\r\n            const progress=(progressEvent.loaded/progressEvent.total)*100\r\n            document.getElementById(\"uploadFileProgress\").style.width = progress+\"%\";\r\n            if(progress===100)\r\n            {\r\n                window.location.reload();\r\n            }\r\n          },\r\n      })\r\n  }\r\n\r\n    return <div className=\"upload-file\" id=\"upload-file\">\r\n        <form onSubmit={handleUploadVideo} ref={formRef}>\r\n        <IconButton\r\n        size=\"medium\"\r\n        onClick={()=>document.getElementById('video').click()}\r\n        style={{color:\"white\"}}\r\n        >\r\n        <CloudUploadIcon/>\r\n        </IconButton>\r\n        <input type=\"file\" name=\"video\" id=\"video\" hidden onChange={displayFileName}/>\r\n        <Button\r\n        variant=\"contained\"\r\n        color=\"default\"\r\n        type=\"submit\"   \r\n      >\r\n        Upload\r\n      </Button> \r\n        </form>\r\n        <p id=\"file-name\" style={{color:\"rgb(56, 245, 71)\"}}></p>\r\n        {uploadProgress&&\r\n        <div className=\"uploadProgress\">   \r\n            <div className=\"progressBar\" id=\"uploadFileProgress\"> \r\n            </div>\r\n        </div>}\r\n        <IconButton\r\n        size=\"small\"\r\n        id=\"openUploadDiv\"\r\n        onClick={handleUploadDiv}\r\n        >{openUpload?\r\n            <ArrowLeftIcon/>\r\n            :\r\n            <ArrowRightIcon/>\r\n         }\r\n        </IconButton>\r\n    </div>\r\n}"]},"metadata":{},"sourceType":"module"}