{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _defineProperty from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _asyncToGenerator from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/PC/temp/couplove/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState,useRef}from'react';import axios from'axios';import Button from'@material-ui/core/Button';import Navbar from'../components/Navbar';import'../css/home.css';import{IconButton}from'@material-ui/core';import AddIcon from'@material-ui/icons/Add';import ClearIcon from'@material-ui/icons/Clear';import{MuiPickersUtilsProvider,KeyboardDatePicker}from'@material-ui/pickers';import DateFnsUtils from'@date-io/date-fns';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){var _jsx2;var _useState=useState(),_useState2=_slicedToArray(_useState,2),userInfo=_useState2[0],setUserInfo=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),partnerInfo=_useState4[0],setPartnerInfo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),havePartner=_useState6[0],setHavePartner=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),requestList=_useState8[0],setRequestList=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),dayWidget=_useState10[0],setDayWidget=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),specialWidget=_useState12[0],setSpecialWidget=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),bdayWidget=_useState14[0],setBdayWidget=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),dateOfRelation=_useState16[0],setDateOfRelation=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isSetting=_useState18[0],setIsSetting=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),totalDay=_useState20[0],setTotalDay=_useState20[1];var _useState21=useState(),_useState22=_slicedToArray(_useState21,2),userBday=_useState22[0],setUserBday=_useState22[1];var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),partnerBday=_useState24[0],setPartnerBday=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),yourCountDown=_useState26[0],setYourCountDown=_useState26[1];var _useState27=useState(),_useState28=_slicedToArray(_useState27,2),partnerCountDown=_useState28[0],setPartnerCountDown=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),upComingEvent=_useState30[0],setUpComingEvent=_useState30[1];var _useState31=useState(),_useState32=_slicedToArray(_useState31,2),upComingDay=_useState32[0],setUpComingDay=_useState32[1];var _useState33=useState(''),_useState34=_slicedToArray(_useState33,2),backgroundUrl=_useState34[0],setBackgroundUrl=_useState34[1];var _useState35=useState(true),_useState36=_slicedToArray(_useState35,2),isHome=_useState36[0],setIsHome=_useState36[1];var _useState37=useState(),_useState38=_slicedToArray(_useState37,2),date=_useState38[0],setDate=_useState38[1];var formRef=useRef();var acceptRef=useRef();var dateRef=useRef();var monthMap={\"01\":\"January\",\"02\":\"February\",\"03\":\"March\",\"04\":\"April\",\"05\":\"May\",\"06\":\"June\",\"07\":\"July\",\"08\":\"August\",\"09\":\"September\",\"10\":\"October\",\"11\":\"November\",\"12\":\"December\"};useEffect(function(){var ac=new AbortController();axios.get('/auth/isLoggedIn').then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){if(res.isLoggedIn===false){window.open('/login','_self');}else{if(res.user.nickname===undefined){window.open('/userProfileForm','_self');}else{axios.get('/home/getBackground').then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){if(!res){setBackgroundUrl('https://s3-us-west-2.amazonaws.com/s.cdpn.io/751678/my-illustration-background.png');document.getElementById('foreground').style.visibility=\"visible\";}else{setBackgroundUrl('/home/getBackground');document.getElementById('foreground').style.visibility=\"hidden\";}});var anniverse=new Date(res.user.dateOfRelationship);var month=anniverse.getMonth()+1;var day=anniverse.getDate();var _date=\"0\"+month+\"/\"+day;var specialEvent=[{date:\"02/14\",event:\"Valentines Day\"},{date:\"05/20\",event:\"520 Day\"},{date:\"12/25\",event:\"Christmas Day\"},{date:\"12/31\",event:\"New Year Eve\"},{date:_date,event:\"Anniversary Day\"}];setPartnerInfo(res.partnerInfo);setUserInfo(res.user);if(res.user.dateOfRelationship!==null){setDateOfRelation(true);setDate(res.user.dateOfRelationship);if(res.widget){for(var i=0;i<res.widget.widget.length;i++){if(res.widget.widget[i].type===\"day\"){setDayWidget(true);var current=new Date();var original=new Date(res.user.dateOfRelationship);var difference=current.getTime()-original.getTime();var _day=difference/(1000*3600*24);setTotalDay(parseInt(_day)+1);}else if(res.widget.widget[i].type===\"bday\"){var partner=formatDate(res.partnerInfo.dateOfBirth);var you=formatDate(res.user.dateOfBirth);setPartnerBday(partner);setUserBday(you);var _current=new Date();var date1=new Date(res.partnerInfo.dateOfBirth);var date2=new Date(res.user.dateOfBirth);date1.setFullYear(_current.getFullYear());date2.setFullYear(_current.getFullYear());if(_current>date1){date1.setFullYear(_current.getFullYear()+1);}if(_current>date2){date2.setFullYear(_current.getFullYear()+1);}var temp1=parseInt((date1.getTime()-_current.getTime())/(1000*3600*24));var temp2=parseInt((date2.getTime()-_current.getTime())/(1000*3600*24));if(temp1===0){setPartnerCountDown(\"Today is your partner's Birthday!\");}else{setPartnerCountDown(Math.abs(temp1));}if(temp2===0){setYourCountDown(\"Today is your Birthday!\");}else{setYourCountDown(Math.abs(temp2));}setBdayWidget(true);}else if(res.widget.widget[i].type===\"special\"){(function(){setSpecialWidget(true);var currentDate=new Date();var currentYear=currentDate.getFullYear();var closest=99999999999;specialEvent.map(function(date){var temp=new Date(currentYear+\"/\"+date.date);if(currentDate>temp){temp.setFullYear(currentDate+1);}var result=Math.abs(parseInt(currentDate.getTime()-temp.getTime())/(1000*3600*24));if(result<closest){closest=result+1;setUpComingEvent(date.event);}});if(Math.round(closest)===0){setUpComingDay(\"Today is \"+_date.event+\" !\");}else{setUpComingDay(Math.round(closest));}})();}}}}axios({method:'get',url:'/user/getRequest',headers:{'Content-Type':'multipart/form-data'}}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){var temp=[];res.requests.map(function(list){temp.push(_objectSpread({},list));});setRequestList(temp);});if(res.user.partner!==null){setHavePartner(true);}}}});return function cancel(){ac.abort();};},[dayWidget,specialWidget,bdayWidget]);function formatDate(date){var today=new Date(parseInt(Date.parse(date),10));var dd=String(today.getDate()).padStart(2,'0');var mm=String(today.getMonth()+1).padStart(2,'0');//January is 0!\nvar yyyy=today.getFullYear();// return mm + '/' + dd + '/' + yyyy;\nreturn dd+\" \"+monthMap[mm];}function handleLogout(){window.location.href=\"/auth/logout\";}function handleSendReq(event){event.preventDefault();var formData=new FormData(formRef.current);axios({method:'post',url:'/user/sendRequest',data:formData,headers:{'Content-Type':'multipart/form-data'}}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){if(res.isSent){alert(\"sent!\");}else{alert(res.status);console.log(res);}});document.getElementById('reqId').value=\"\";}requestList.map(function(list){console.log(list);});function onHoverAddWidget(type){if(type===\"special\"){document.getElementById('hover-special').style.opacity=\"1\";}else if(type===\"day\"){document.getElementById('hover-day').style.opacity=\"1\";}else if(type===\"bday\"){document.getElementById('hover-bday').style.opacity=\"1\";}}function offHoverAddWidget(type){if(type===\"special\"){document.getElementById('hover-special').style.opacity=\"0\";}else if(type===\"day\"){document.getElementById('hover-day').style.opacity=\"0\";}else if(type===\"bday\"){document.getElementById('hover-bday').style.opacity=\"0\";}}function handleCreateWidget(_x){return _handleCreateWidget.apply(this,arguments);}function _handleCreateWidget(){_handleCreateWidget=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(type){var formdata,_formdata,_formdata2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(type===\"day\")){_context.next=12;break;}if(!dateOfRelation){_context.next=8;break;}formdata=new FormData();formdata.append('type',type);_context.next=6;return axios({method:'post',url:'/widget/createWidget',data:formdata,headers:{'Content-Type':'multipart/form-data'}}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){setDayWidget(true);});case 6:_context.next=10;break;case 8:document.getElementById(\"noDayWidget\").style.display=\"none\";setIsSetting(true);case 10:_context.next=24;break;case 12:if(!(type===\"bday\")){_context.next=19;break;}_formdata=new FormData();_formdata.append('type',\"bday\");_context.next=17;return axios({method:'post',url:'/widget/createWidget',data:_formdata,headers:{'Content-Type':'multipart/form-data'}}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){if(res){setBdayWidget(true);}});case 17:_context.next=24;break;case 19:if(!(type===\"special\")){_context.next=24;break;}_formdata2=new FormData();_formdata2.append('type',\"special\");_context.next=24;return axios({method:'post',url:'/widget/createWidget',data:_formdata2,headers:{'Content-Type':'multipart/formdata'}}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){if(res){setSpecialWidget(true);}});case 24:case\"end\":return _context.stop();}}},_callee);}));return _handleCreateWidget.apply(this,arguments);}function handleUpdateDate(_x2){return _handleUpdateDate.apply(this,arguments);}function _handleUpdateDate(){_handleUpdateDate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var formdata;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();formdata=new FormData(dateRef.current);formdata.append('type',\"day\");_context2.next=5;return axios({method:'post',url:'/widget/createWidget',data:formdata,headers:{'Content-Type':'multipart/form-data'}}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){setIsSetting(false);setDayWidget(true);});case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _handleUpdateDate.apply(this,arguments);}function onHoverWidget(type){if(type===\"day\"){document.getElementById(\"home-delete-dayWidget\").style.visibility=\"visible\";}else if(type===\"bday\"){document.getElementById('home-delete-bdayWidget').style.visibility=\"visible\";}else if(type===\"special\"){document.getElementById('home-delete-specialWidget').style.visibility=\"visible\";}}function offHoverWidget(){if(dayWidget)document.getElementById(\"home-delete-dayWidget\").style.visibility=\"hidden\";if(bdayWidget)document.getElementById('home-delete-bdayWidget').style.visibility=\"hidden\";if(specialWidget)document.getElementById('home-delete-specialWidget').style.visibility=\"hidden\";}function handleDeleteWidget(_x3){return _handleDeleteWidget.apply(this,arguments);}function _handleDeleteWidget(){_handleDeleteWidget=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(type){var formdata;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:formdata=new FormData();formdata.append('type',type);_context3.next=4;return axios({method:'post',url:'/widget/deleteWidget',data:formdata,headers:{'Content-Type':'multipart/form-data'}}).then(function(res){return res.data;}).catch(function(err){return console.log(err);}).then(function(res){if(res){if(type===\"day\")setDayWidget(false);if(type===\"bday\")setBdayWidget(false);if(type===\"special\")setSpecialWidget(false);}});case 4:case\"end\":return _context3.stop();}}},_callee3);}));return _handleDeleteWidget.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"home-div\",children:[/*#__PURE__*/_jsx(Navbar,(_jsx2={isHome:isHome,setRequestList:setRequestList,setHavePartner:setHavePartner,requestList:requestList,havePartner:havePartner,handleSendReq:handleSendReq,formRef:formRef,handleLogout:handleLogout},_defineProperty(_jsx2,\"handleSendReq\",handleSendReq),_defineProperty(_jsx2,\"acceptRef\",acceptRef),_jsx2)),/*#__PURE__*/_jsxs(\"div\",{className:\"home-background\",style:{backgroundImage:\"url(\"+backgroundUrl+\")\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home-overlay\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"home-widget anniverse\",children:[!havePartner&&/*#__PURE__*/_jsx(\"div\",{className:\"home-noPartner\",children:\"You need to have a partner to access this widget\"}),specialWidget?/*#__PURE__*/_jsxs(\"div\",{className:\"home-event-div\",onMouseOut:offHoverWidget,onMouseOver:function onMouseOver(){return onHoverWidget(\"special\");},children:[/*#__PURE__*/_jsx(IconButton,{id:\"home-delete-specialWidget\",onClick:function onClick(){return handleDeleteWidget(\"special\");},children:/*#__PURE__*/_jsx(ClearIcon,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-event-title\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Up Coming Event:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h1\",{children:upComingEvent})]}),/*#__PURE__*/_jsx(\"div\",{className:\"home-event-day\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[upComingDay,\" days left\"]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"home-noWidget\",children:[/*#__PURE__*/_jsx(IconButton,{id:\"home-add-widget\",onClick:function onClick(){return handleCreateWidget(\"special\");},onMouseOver:function onMouseOver(){return onHoverAddWidget(\"special\");},onMouseOut:function onMouseOut(){return offHoverAddWidget(\"special\");},children:/*#__PURE__*/_jsx(AddIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"home-add-hover\",id:\"hover-special\",children:\"Add this widget to get to know up coming special events\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-widget days\",children:[!havePartner&&/*#__PURE__*/_jsx(\"div\",{className:\"home-noPartner\",children:\"You need to have a partner to access this widget\"}),dayWidget?/*#__PURE__*/_jsxs(\"div\",{className:\"home-totalDay-widget\",onMouseOut:offHoverWidget,onMouseOver:function onMouseOver(){return onHoverWidget(\"day\");},children:[/*#__PURE__*/_jsx(IconButton,{id:\"home-delete-dayWidget\",onClick:function onClick(){return handleDeleteWidget(\"day\");},children:/*#__PURE__*/_jsx(ClearIcon,{})}),/*#__PURE__*/_jsxs(\"h1\",{children:[totalDay,\" DAYS\"]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"home-noWidget\",id:\"noDayWidget\",children:[/*#__PURE__*/_jsx(IconButton,{id:\"home-add-widget\",onClick:function onClick(){return handleCreateWidget(\"day\");},onMouseOver:function onMouseOver(){return onHoverAddWidget(\"day\");},onMouseOut:function onMouseOut(){return offHoverAddWidget(\"day\");},children:/*#__PURE__*/_jsx(AddIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"home-add-hover\",id:\"hover-day\",children:\"Add this widget to get to know total days together\"})]}),isSetting&&/*#__PURE__*/_jsxs(\"div\",{className:\"home-setDate\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"home-setDate-title\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Please set the date of you with your partner\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleUpdateDate,ref:dateRef,children:[/*#__PURE__*/_jsx(MuiPickersUtilsProvider,{utils:DateFnsUtils,children:/*#__PURE__*/_jsx(KeyboardDatePicker,{margin:\"normal\",id:\"dateOfRelation\",label:\"Date of Relationship\",name:\"dateOfRelation\",format:\"MM/dd/yyyy\",value:date,onChange:function onChange(date){setDate(date);},KeyboardButtonProps:{'aria-label':'change date'}})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",id:\"home-submit-day\",children:\"SUBMIT\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-widget special\",children:[!havePartner&&/*#__PURE__*/_jsx(\"div\",{className:\"home-noPartner\",children:\"You need to have a partner to access this widget\"}),bdayWidget?/*#__PURE__*/_jsxs(\"div\",{className:\"home-dob-div\",onMouseOut:offHoverWidget,onMouseOver:function onMouseOver(){return onHoverWidget(\"bday\");},children:[/*#__PURE__*/_jsx(IconButton,{id:\"home-delete-bdayWidget\",onClick:function onClick(){return handleDeleteWidget(\"bday\");},children:/*#__PURE__*/_jsx(ClearIcon,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-bday-div you\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"home-bday-name\",children:/*#__PURE__*/_jsx(\"h1\",{children:userInfo.nickname})}),/*#__PURE__*/_jsx(\"div\",{className:\"home-bday-border\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"home-bday-calander\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{borderBottom:\"1px solid white\"},children:userBday}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h1\",{children:[yourCountDown,\" days left\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"home-bday-div partner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"home-bday-name\",children:/*#__PURE__*/_jsx(\"h1\",{children:partnerInfo.nickname})}),/*#__PURE__*/_jsx(\"div\",{className:\"home-bday-border\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"home-bday-calander\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{borderBottom:\"1px solid white\"},children:partnerBday}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h1\",{children:[partnerCountDown,\" days left\"]})]})})]})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"home-noWidget\",children:[/*#__PURE__*/_jsx(IconButton,{id:\"home-add-widget\",onClick:function onClick(){return handleCreateWidget(\"bday\");},onMouseOver:function onMouseOver(){return onHoverAddWidget(\"bday\");},onMouseOut:function onMouseOut(){return offHoverAddWidget(\"bday\");},children:/*#__PURE__*/_jsx(AddIcon,{fontSize:\"large\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"home-add-hover\",id:\"hover-bday\",children:\"Add this widget to get to know each other birthdays\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"foreground\",id:\"foreground\"})]})]});}","map":{"version":3,"sources":["C:/Users/PC/temp/couplove/client/src/components/Home.js"],"names":["useEffect","useState","useRef","axios","Button","Navbar","IconButton","AddIcon","ClearIcon","MuiPickersUtilsProvider","KeyboardDatePicker","DateFnsUtils","Home","userInfo","setUserInfo","partnerInfo","setPartnerInfo","havePartner","setHavePartner","requestList","setRequestList","dayWidget","setDayWidget","specialWidget","setSpecialWidget","bdayWidget","setBdayWidget","dateOfRelation","setDateOfRelation","isSetting","setIsSetting","totalDay","setTotalDay","userBday","setUserBday","partnerBday","setPartnerBday","yourCountDown","setYourCountDown","partnerCountDown","setPartnerCountDown","upComingEvent","setUpComingEvent","upComingDay","setUpComingDay","backgroundUrl","setBackgroundUrl","isHome","setIsHome","date","setDate","formRef","acceptRef","dateRef","monthMap","ac","AbortController","get","then","res","data","catch","err","console","log","isLoggedIn","window","open","user","nickname","undefined","document","getElementById","style","visibility","anniverse","Date","dateOfRelationship","month","getMonth","day","getDate","specialEvent","event","widget","i","length","type","current","original","difference","getTime","parseInt","partner","formatDate","dateOfBirth","you","date1","date2","setFullYear","getFullYear","temp1","temp2","Math","abs","currentDate","currentYear","closest","map","temp","result","round","method","url","headers","requests","list","push","cancel","abort","today","parse","dd","String","padStart","mm","yyyy","handleLogout","location","href","handleSendReq","preventDefault","formData","FormData","isSent","alert","status","value","onHoverAddWidget","opacity","offHoverAddWidget","handleCreateWidget","formdata","append","display","handleUpdateDate","onHoverWidget","offHoverWidget","handleDeleteWidget","backgroundImage","borderBottom"],"mappings":"ivBAAA,OAAQA,SAAR,CAAmBC,QAAnB,CAA6BC,MAA7B,KAA0C,OAA1C,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAO,iBAAP,CACA,OAASC,UAAT,KAA2B,mBAA3B,CACA,MAAOC,CAAAA,OAAP,KAAoB,wBAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,0BAAtB,CACA,OACEC,uBADF,CAEEC,kBAFF,KAGO,sBAHP,CAIA,MAAOC,CAAAA,YAAP,KAAyB,mBAAzB,C,wFAIA,cAAe,SAASC,CAAAA,IAAT,EACf,WACE,cAA+BX,QAAQ,EAAvC,wCAAOY,QAAP,eAAgBC,WAAhB,eACA,eAAoCb,QAAQ,EAA5C,yCAAOc,WAAP,eAAmBC,cAAnB,eACA,eAAqCf,QAAQ,CAAC,KAAD,CAA7C,yCAAOgB,WAAP,eAAmBC,cAAnB,eACA,eAAoCjB,QAAQ,CAAC,EAAD,CAA5C,yCAAOkB,WAAP,eAAmBC,cAAnB,eACA,eAAiCnB,QAAQ,CAAC,KAAD,CAAzC,0CAAOoB,SAAP,gBAAiBC,YAAjB,gBACA,gBAAyCrB,QAAQ,CAAC,KAAD,CAAjD,2CAAOsB,aAAP,gBAAqBC,gBAArB,gBACA,gBAAmCvB,QAAQ,CAAC,KAAD,CAA3C,2CAAOwB,UAAP,gBAAkBC,aAAlB,gBACA,gBAA2CzB,QAAQ,CAAC,KAAD,CAAnD,2CAAO0B,cAAP,gBAAsBC,iBAAtB,gBACA,gBAAiC3B,QAAQ,CAAC,KAAD,CAAzC,2CAAO4B,SAAP,gBAAiBC,YAAjB,gBACA,gBAA+B7B,QAAQ,EAAvC,2CAAO8B,QAAP,gBAAgBC,WAAhB,gBACA,gBAA+B/B,QAAQ,EAAvC,2CAAOgC,QAAP,gBAAgBC,WAAhB,gBACA,gBAAqCjC,QAAQ,EAA7C,2CAAOkC,WAAP,gBAAmBC,cAAnB,gBACA,gBAAyCnC,QAAQ,EAAjD,2CAAOoC,aAAP,gBAAqBC,gBAArB,gBACA,gBAA+CrC,QAAQ,EAAvD,2CAAOsC,gBAAP,gBAAwBC,mBAAxB,gBACA,gBAAyCvC,QAAQ,EAAjD,2CAAOwC,aAAP,gBAAqBC,gBAArB,gBACA,gBAAqCzC,QAAQ,EAA7C,2CAAO0C,WAAP,gBAAmBC,cAAnB,gBACA,gBAAyC3C,QAAQ,CAAC,EAAD,CAAjD,2CAAO4C,aAAP,gBAAqBC,gBAArB,gBACA,gBAA2B7C,QAAQ,CAAC,IAAD,CAAnC,2CAAO8C,MAAP,gBAAcC,SAAd,gBACA,gBAAuB/C,QAAQ,EAA/B,2CAAOgD,IAAP,gBAAYC,OAAZ,gBAEA,GAAMC,CAAAA,OAAO,CAAGjD,MAAM,EAAtB,CACA,GAAMkD,CAAAA,SAAS,CAAGlD,MAAM,EAAxB,CACA,GAAMmD,CAAAA,OAAO,CAAGnD,MAAM,EAAtB,CAGA,GAAMoD,CAAAA,QAAQ,CAAG,CACf,KAAM,SADS,CAEf,KAAM,UAFS,CAGf,KAAM,OAHS,CAIf,KAAM,OAJS,CAKf,KAAM,KALS,CAMf,KAAM,MANS,CAOf,KAAM,MAPS,CAQf,KAAM,QARS,CASf,KAAM,WATS,CAUf,KAAM,SAVS,CAWf,KAAM,UAXS,CAYf,KAAM,UAZS,CAAjB,CAiBEtD,SAAS,CAAC,UAAM,CACZ,GAAMuD,CAAAA,EAAE,CAAG,GAAIC,CAAAA,eAAJ,EAAX,CACArD,KAAK,CAACsD,GAAN,CAAU,kBAAV,EACCC,IADD,CACM,SAAAC,GAAG,QAAGA,CAAAA,GAAG,CAACC,IAAP,EADT,EAECC,KAFD,CAEO,SAAAC,GAAG,QAAIC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAJ,EAFV,EAGCJ,IAHD,CAGM,SAAAC,GAAG,CAAI,CACX,GAAIA,GAAG,CAACM,UAAJ,GAAiB,KAArB,CACA,CACGC,MAAM,CAACC,IAAP,CAAY,QAAZ,CAAqB,OAArB,EACF,CAHD,IAKA,CACE,GAAGR,GAAG,CAACS,IAAJ,CAASC,QAAT,GAAoBC,SAAvB,CACA,CACEJ,MAAM,CAACC,IAAP,CAAY,kBAAZ,CAA+B,OAA/B,EACD,CAHD,IAKA,CAEEhE,KAAK,CAACsD,GAAN,CAAU,qBAAV,EACCC,IADD,CACM,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EADT,EAECC,KAFD,CAEO,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAFV,EAGCJ,IAHD,CAGM,SAAAC,GAAG,CAAE,CACT,GAAG,CAACA,GAAJ,CACA,CACEb,gBAAgB,CAAC,oFAAD,CAAhB,CACAyB,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,UAA5C,CAAuD,SAAvD,CACD,CAJD,IAMA,CACE5B,gBAAgB,CAAC,qBAAD,CAAhB,CACAyB,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CC,UAA5C,CAAuD,QAAvD,CACD,CACF,CAdD,EAgBA,GAAIC,CAAAA,SAAS,CAAG,GAAIC,CAAAA,IAAJ,CAASjB,GAAG,CAACS,IAAJ,CAASS,kBAAlB,CAAhB,CACA,GAAIC,CAAAA,KAAK,CAAGH,SAAS,CAACI,QAAV,GAAqB,CAAjC,CACA,GAAIC,CAAAA,GAAG,CAAGL,SAAS,CAACM,OAAV,EAAV,CACA,GAAIhC,CAAAA,KAAI,CAAE,IAAK6B,KAAL,CAAW,GAAX,CAAeE,GAAzB,CACA,GAAME,CAAAA,YAAY,CAAG,CACnB,CAACjC,IAAI,CAAC,OAAN,CAAckC,KAAK,CAAC,gBAApB,CADmB,CAEnB,CAAClC,IAAI,CAAC,OAAN,CAAckC,KAAK,CAAC,SAApB,CAFmB,CAGnB,CAAClC,IAAI,CAAC,OAAN,CAAckC,KAAK,CAAC,eAApB,CAHmB,CAInB,CAAClC,IAAI,CAAC,OAAN,CAAckC,KAAK,CAAC,cAApB,CAJmB,CAKnB,CAAClC,IAAI,CAACA,KAAN,CAAWkC,KAAK,CAAC,iBAAjB,CALmB,CAArB,CASAnE,cAAc,CAAC2C,GAAG,CAAC5C,WAAL,CAAd,CACAD,WAAW,CAAC6C,GAAG,CAACS,IAAL,CAAX,CACA,GAAGT,GAAG,CAACS,IAAJ,CAASS,kBAAT,GAA8B,IAAjC,CACA,CACEjD,iBAAiB,CAAC,IAAD,CAAjB,CACAsB,OAAO,CAACS,GAAG,CAACS,IAAJ,CAASS,kBAAV,CAAP,CACA,GAAGlB,GAAG,CAACyB,MAAP,CACA,CACI,IAAI,GAAIC,CAAAA,CAAC,CAAC,CAAV,CAAYA,CAAC,CAAC1B,GAAG,CAACyB,MAAJ,CAAWA,MAAX,CAAkBE,MAAhC,CAAuCD,CAAC,EAAxC,CACA,CACE,GAAG1B,GAAG,CAACyB,MAAJ,CAAWA,MAAX,CAAkBC,CAAlB,EAAqBE,IAArB,GAA4B,KAA/B,CACA,CACEjE,YAAY,CAAC,IAAD,CAAZ,CACA,GAAIkE,CAAAA,OAAO,CAAG,GAAIZ,CAAAA,IAAJ,EAAd,CACA,GAAIa,CAAAA,QAAQ,CAAG,GAAIb,CAAAA,IAAJ,CAASjB,GAAG,CAACS,IAAJ,CAASS,kBAAlB,CAAf,CACA,GAAIa,CAAAA,UAAU,CAAGF,OAAO,CAACG,OAAR,GAAkBF,QAAQ,CAACE,OAAT,EAAnC,CACA,GAAIX,CAAAA,IAAG,CAAGU,UAAU,EAAG,KAAO,IAAP,CAAc,EAAjB,CAApB,CACA1D,WAAW,CAAC4D,QAAQ,CAACZ,IAAD,CAAR,CAAc,CAAf,CAAX,CACD,CARD,IASK,IAAGrB,GAAG,CAACyB,MAAJ,CAAWA,MAAX,CAAkBC,CAAlB,EAAqBE,IAArB,GAA4B,MAA/B,CACL,CAEE,GAAMM,CAAAA,OAAO,CAAGC,UAAU,CAACnC,GAAG,CAAC5C,WAAJ,CAAgBgF,WAAjB,CAA1B,CACA,GAAMC,CAAAA,GAAG,CAAGF,UAAU,CAACnC,GAAG,CAACS,IAAJ,CAAS2B,WAAV,CAAtB,CACA3D,cAAc,CAACyD,OAAD,CAAd,CACA3D,WAAW,CAAC8D,GAAD,CAAX,CACA,GAAMR,CAAAA,QAAO,CAAG,GAAIZ,CAAAA,IAAJ,EAAhB,CACA,GAAMqB,CAAAA,KAAK,CAAG,GAAIrB,CAAAA,IAAJ,CAASjB,GAAG,CAAC5C,WAAJ,CAAgBgF,WAAzB,CAAd,CACA,GAAMG,CAAAA,KAAK,CAAG,GAAItB,CAAAA,IAAJ,CAASjB,GAAG,CAACS,IAAJ,CAAS2B,WAAlB,CAAd,CACAE,KAAK,CAACE,WAAN,CAAkBX,QAAO,CAACY,WAAR,EAAlB,EACAF,KAAK,CAACC,WAAN,CAAkBX,QAAO,CAACY,WAAR,EAAlB,EACA,GAAGZ,QAAO,CAACS,KAAX,CACA,CACEA,KAAK,CAACE,WAAN,CAAkBX,QAAO,CAACY,WAAR,GAAsB,CAAxC,EACD,CACD,GAAGZ,QAAO,CAACU,KAAX,CACA,CACEA,KAAK,CAACC,WAAN,CAAkBX,QAAO,CAACY,WAAR,GAAsB,CAAxC,EACD,CACD,GAAMC,CAAAA,KAAK,CAAGT,QAAQ,CAAC,CAACK,KAAK,CAACN,OAAN,GAAgBH,QAAO,CAACG,OAAR,EAAjB,GAAsC,KAAO,IAAP,CAAc,EAApD,CAAD,CAAtB,CACA,GAAMW,CAAAA,KAAK,CAAGV,QAAQ,CAAC,CAACM,KAAK,CAACP,OAAN,GAAgBH,QAAO,CAACG,OAAR,EAAjB,GAAsC,KAAO,IAAP,CAAc,EAApD,CAAD,CAAtB,CACA,GAAGU,KAAK,GAAG,CAAX,CACA,CACE7D,mBAAmB,CAAC,mCAAD,CAAnB,CACD,CAHD,IAII,CACFA,mBAAmB,CAAC+D,IAAI,CAACC,GAAL,CAASH,KAAT,CAAD,CAAnB,CACD,CACD,GAAGC,KAAK,GAAG,CAAX,CACA,CACEhE,gBAAgB,CAAC,yBAAD,CAAhB,CACD,CAHD,IAKA,CACGA,gBAAgB,CAACiE,IAAI,CAACC,GAAL,CAASF,KAAT,CAAD,CAAhB,CACF,CACD5E,aAAa,CAAC,IAAD,CAAb,CACD,CAtCI,IAuCA,IAAGiC,GAAG,CAACyB,MAAJ,CAAWA,MAAX,CAAkBC,CAAlB,EAAqBE,IAArB,GAA4B,SAA/B,CACL,aACE/D,gBAAgB,CAAC,IAAD,CAAhB,CACA,GAAMiF,CAAAA,WAAW,CAAG,GAAI7B,CAAAA,IAAJ,EAApB,CACA,GAAM8B,CAAAA,WAAW,CAAGD,WAAW,CAACL,WAAZ,EAApB,CACA,GAAIO,CAAAA,OAAO,CAAE,WAAb,CACAzB,YAAY,CAAC0B,GAAb,CAAiB,SAAA3D,IAAI,CAAE,CACrB,GAAI4D,CAAAA,IAAI,CAAG,GAAIjC,CAAAA,IAAJ,CAAS8B,WAAW,CAAC,GAAZ,CAAgBzD,IAAI,CAACA,IAA9B,CAAX,CACA,GAAGwD,WAAW,CAACI,IAAf,CACA,CACEA,IAAI,CAACV,WAAL,CAAiBM,WAAW,CAAC,CAA7B,EACD,CACD,GAAIK,CAAAA,MAAM,CAAGP,IAAI,CAACC,GAAL,CAAUZ,QAAQ,CAACa,WAAW,CAACd,OAAZ,GAAsBkB,IAAI,CAAClB,OAAL,EAAvB,CAAR,EAAiD,KAAO,IAAP,CAAc,EAA/D,CAAV,CAAb,CACA,GAAGmB,MAAM,CAACH,OAAV,CACA,CACEA,OAAO,CAAGG,MAAM,CAAC,CAAjB,CACApE,gBAAgB,CAACO,IAAI,CAACkC,KAAN,CAAhB,CACD,CACF,CAZD,EAaA,GAAGoB,IAAI,CAACQ,KAAL,CAAWJ,OAAX,IAAsB,CAAzB,CACA,CACE/D,cAAc,CAAC,YAAYK,KAAI,CAACkC,KAAjB,CAAuB,IAAxB,CAAd,CACD,CAHD,IAKA,CACEvC,cAAc,CAAC2D,IAAI,CAACQ,KAAL,CAAWJ,OAAX,CAAD,CAAd,CACD,CAzBH,KA4BC,CACF,CACJ,CACF,CACDxG,KAAK,CAAC,CACJ6G,MAAM,CAAC,KADH,CAEJC,GAAG,CAAC,kBAFA,CAGJC,OAAO,CAAE,CAAC,eAAgB,qBAAjB,CAHL,CAAD,CAAL,CAKCxD,IALD,CAKM,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EALT,EAMCC,KAND,CAMO,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EANV,EAOCJ,IAPD,CAOM,SAAAC,GAAG,CAAE,CACT,GAAIkD,CAAAA,IAAI,CAAC,EAAT,CACAlD,GAAG,CAACwD,QAAJ,CAAaP,GAAb,CAAiB,SAAAQ,IAAI,CAAE,CACrBP,IAAI,CAACQ,IAAL,kBAAcD,IAAd,GACD,CAFD,EAGAhG,cAAc,CAACyF,IAAD,CAAd,CACD,CAbD,EAcA,GAAGlD,GAAG,CAACS,IAAJ,CAASyB,OAAT,GAAmB,IAAtB,CACA,CACE3E,cAAc,CAAC,IAAD,CAAd,CACD,CAEF,CACF,CACF,CA9JD,EA+JA,MAAO,SAASoG,CAAAA,MAAT,EAAkB,CACvB/D,EAAE,CAACgE,KAAH,GACD,CAFD,CAGD,CApKM,CAoKL,CAAClG,SAAD,CAAWE,aAAX,CAAyBE,UAAzB,CApKK,CAAT,CAuKE,QAASqE,CAAAA,UAAT,CAAoB7C,IAApB,CAA0B,CACxB,GAAMuE,CAAAA,KAAK,CAAG,GAAI5C,CAAAA,IAAJ,CAASgB,QAAQ,CAAChB,IAAI,CAAC6C,KAAL,CAAWxE,IAAX,CAAD,CAAmB,EAAnB,CAAjB,CAAd,CACA,GAAIyE,CAAAA,EAAE,CAAGC,MAAM,CAACH,KAAK,CAACvC,OAAN,EAAD,CAAN,CAAwB2C,QAAxB,CAAiC,CAAjC,CAAoC,GAApC,CAAT,CACA,GAAIC,CAAAA,EAAE,CAAGF,MAAM,CAACH,KAAK,CAACzC,QAAN,GAAmB,CAApB,CAAN,CAA6B6C,QAA7B,CAAsC,CAAtC,CAAyC,GAAzC,CAAT,CAAwD;AACxD,GAAIE,CAAAA,IAAI,CAAGN,KAAK,CAACpB,WAAN,EAAX,CACA;AACA,MAAOsB,CAAAA,EAAE,CAAG,GAAL,CAAWpE,QAAQ,CAACuE,EAAD,CAA1B,CACD,CACD,QAASE,CAAAA,YAAT,EACA,CACE7D,MAAM,CAAC8D,QAAP,CAAgBC,IAAhB,CAAuB,cAAvB,CACD,CACD,QAASC,CAAAA,aAAT,CAAuB/C,KAAvB,CACA,CACEA,KAAK,CAACgD,cAAN,GACA,GAAMC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,CAAalF,OAAO,CAACqC,OAArB,CAAjB,CACArF,KAAK,CAAC,CACJ6G,MAAM,CAAC,MADH,CAEJC,GAAG,CAAC,mBAFA,CAGJrD,IAAI,CAACwE,QAHD,CAIJlB,OAAO,CAAE,CAAC,eAAgB,qBAAjB,CAJL,CAAD,CAAL,CAMCxD,IAND,CAMM,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EANT,EAOCC,KAPD,CAOO,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAPV,EAQCJ,IARD,CAQM,SAAAC,GAAG,CAAE,CACT,GAAGA,GAAG,CAAC2E,MAAP,CACA,CACGC,KAAK,CAAC,OAAD,CAAL,CACF,CAHD,IAKA,CACEA,KAAK,CAAC5E,GAAG,CAAC6E,MAAL,CAAL,CACAzE,OAAO,CAACC,GAAR,CAAYL,GAAZ,EACD,CACF,CAlBD,EAmBAY,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCiE,KAAjC,CAAyC,EAAzC,CACD,CACDtH,WAAW,CAACyF,GAAZ,CAAgB,SAAAQ,IAAI,CAAE,CACpBrD,OAAO,CAACC,GAAR,CAAYoD,IAAZ,EACD,CAFD,EAMA,QAASsB,CAAAA,gBAAT,CAA0BnD,IAA1B,CACA,CACE,GAAGA,IAAI,GAAG,SAAV,CACA,CACEhB,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CkE,OAA/C,CAAuD,GAAvD,CACD,CAHD,IAIK,IAAGpD,IAAI,GAAG,KAAV,CACL,CACEhB,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkE,OAA3C,CAAmD,GAAnD,CACD,CAHI,IAIA,IAAGpD,IAAI,GAAG,MAAV,CACL,CACEhB,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CkE,OAA5C,CAAoD,GAApD,CACD,CACF,CAED,QAASC,CAAAA,iBAAT,CAA2BrD,IAA3B,CACA,CACE,GAAGA,IAAI,GAAG,SAAV,CACA,CACEhB,QAAQ,CAACC,cAAT,CAAwB,eAAxB,EAAyCC,KAAzC,CAA+CkE,OAA/C,CAAuD,GAAvD,CACD,CAHD,IAIK,IAAGpD,IAAI,GAAG,KAAV,CACL,CACEhB,QAAQ,CAACC,cAAT,CAAwB,WAAxB,EAAqCC,KAArC,CAA2CkE,OAA3C,CAAmD,GAAnD,CACD,CAHI,IAIA,IAAGpD,IAAI,GAAG,MAAV,CACL,CACEhB,QAAQ,CAACC,cAAT,CAAwB,YAAxB,EAAsCC,KAAtC,CAA4CkE,OAA5C,CAAoD,GAApD,CACD,CACF,CA3RP,QA6RqBE,CAAAA,kBA7RrB,kKA6RM,iBAAkCtD,IAAlC,yJAEKA,IAAI,GAAG,KAFZ,+BAIO5D,cAJP,yBAMYmH,QANZ,CAMuB,GAAIT,CAAAA,QAAJ,EANvB,CAOMS,QAAQ,CAACC,MAAT,CAAgB,MAAhB,CAAuBxD,IAAvB,EAPN,sBAQYpF,CAAAA,KAAK,CAAC,CACV6G,MAAM,CAAC,MADG,CAEVC,GAAG,CAAC,sBAFM,CAGVrD,IAAI,CAACkF,QAHK,CAIV5B,OAAO,CAAC,CAAC,eAAgB,qBAAjB,CAJE,CAAD,CAAL,CAMLxD,IANK,CAMA,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EANH,EAOLC,KAPK,CAOC,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAPJ,EAQLJ,IARK,CAQA,SAAAC,GAAG,CAAE,CACTrC,YAAY,CAAC,IAAD,CAAZ,CACD,CAVK,CARZ,sCAsBMiD,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,CAA6CuE,OAA7C,CAAqD,MAArD,CACAlH,YAAY,CAAC,IAAD,CAAZ,CAvBN,4CA0BUyD,IAAI,GAAG,MA1BjB,2BA4BUuD,SA5BV,CA4BqB,GAAIT,CAAAA,QAAJ,EA5BrB,CA6BIS,SAAQ,CAACC,MAAT,CAAgB,MAAhB,CAAuB,MAAvB,EA7BJ,uBA8BU5I,CAAAA,KAAK,CAAC,CACV6G,MAAM,CAAC,MADG,CAEVC,GAAG,CAAC,sBAFM,CAGVrD,IAAI,CAACkF,SAHK,CAIV5B,OAAO,CAAC,CAAC,eAAgB,qBAAjB,CAJE,CAAD,CAAL,CAMLxD,IANK,CAMA,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EANH,EAOLC,KAPK,CAOC,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAPJ,EAQLJ,IARK,CAQA,SAAAC,GAAG,CAAE,CACT,GAAGA,GAAH,CACA,CACEjC,aAAa,CAAC,IAAD,CAAb,CACD,CACF,CAbK,CA9BV,6CA6CU6D,IAAI,GAAG,SA7CjB,2BA+CUuD,UA/CV,CA+CqB,GAAIT,CAAAA,QAAJ,EA/CrB,CAgDIS,UAAQ,CAACC,MAAT,CAAgB,MAAhB,CAAuB,SAAvB,EAhDJ,uBAiDU5I,CAAAA,KAAK,CAAC,CACV6G,MAAM,CAAC,MADG,CAEVC,GAAG,CAAC,sBAFM,CAGVrD,IAAI,CAACkF,UAHK,CAIV5B,OAAO,CAAC,CAAC,eAAe,oBAAhB,CAJE,CAAD,CAAL,CAMLxD,IANK,CAMA,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EANH,EAOLC,KAPK,CAOC,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAPJ,EAQLJ,IARK,CAQA,SAAAC,GAAG,CAAE,CACT,GAAGA,GAAH,CACA,CACEnC,gBAAgB,CAAC,IAAD,CAAhB,CACD,CACF,CAbK,CAjDV,wDA7RN,6DA+VqByH,CAAAA,gBA/VrB,6JA+VM,kBAAgC9D,KAAhC,mIAEEA,KAAK,CAACgD,cAAN,GACMW,QAHR,CAGmB,GAAIT,CAAAA,QAAJ,CAAahF,OAAO,CAACmC,OAArB,CAHnB,CAIEsD,QAAQ,CAACC,MAAT,CAAgB,MAAhB,CAAuB,KAAvB,EAJF,uBAKQ5I,CAAAA,KAAK,CAAC,CACV6G,MAAM,CAAC,MADG,CAEVC,GAAG,CAAC,sBAFM,CAGVrD,IAAI,CAACkF,QAHK,CAIV5B,OAAO,CAAC,CAAC,eAAgB,qBAAjB,CAJE,CAAD,CAAL,CAMLxD,IANK,CAMA,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EANH,EAOLC,KAPK,CAOC,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAPJ,EAQLJ,IARK,CAQA,SAAAC,GAAG,CAAE,CACT7B,YAAY,CAAC,KAAD,CAAZ,CACAR,YAAY,CAAC,IAAD,CAAZ,CACD,CAXK,CALR,yDA/VN,mDAkXM,QAAS4H,CAAAA,aAAT,CAAuB3D,IAAvB,CACA,CACE,GAAGA,IAAI,GAAG,KAAV,CACA,CACEhB,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,EAAiDC,KAAjD,CAAuDC,UAAvD,CAAoE,SAApE,CACD,CAHD,IAIK,IAAGa,IAAI,GAAG,MAAV,CACL,CACEhB,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,CAAwDC,UAAxD,CAAqE,SAArE,CACD,CAHI,IAIA,IAAGa,IAAI,GAAG,SAAV,CACL,CACEhB,QAAQ,CAACC,cAAT,CAAwB,2BAAxB,EAAqDC,KAArD,CAA2DC,UAA3D,CAAwE,SAAxE,CACD,CACF,CACD,QAASyE,CAAAA,cAAT,EACA,CACE,GAAG9H,SAAH,CACAkD,QAAQ,CAACC,cAAT,CAAwB,uBAAxB,EAAiDC,KAAjD,CAAuDC,UAAvD,CAAoE,QAApE,CACA,GAAGjD,UAAH,CACA8C,QAAQ,CAACC,cAAT,CAAwB,wBAAxB,EAAkDC,KAAlD,CAAwDC,UAAxD,CAAoE,QAApE,CACA,GAAGnD,aAAH,CACAgD,QAAQ,CAACC,cAAT,CAAwB,2BAAxB,EAAqDC,KAArD,CAA2DC,UAA3D,CAAwE,QAAxE,CACD,CAzYP,QA2YqB0E,CAAAA,kBA3YrB,mKA2YM,kBAAkC7D,IAAlC,mIAESuD,QAFT,CAEoB,GAAIT,CAAAA,QAAJ,EAFpB,CAGGS,QAAQ,CAACC,MAAT,CAAgB,MAAhB,CAAuBxD,IAAvB,EAHH,uBAISpF,CAAAA,KAAK,CAAC,CACV6G,MAAM,CAAC,MADG,CAEVC,GAAG,CAAC,sBAFM,CAGVrD,IAAI,CAACkF,QAHK,CAIV5B,OAAO,CAAC,CAAC,eAAgB,qBAAjB,CAJE,CAAD,CAAL,CAMLxD,IANK,CAMA,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAN,EANH,EAOLC,KAPK,CAOC,SAAAC,GAAG,QAAEC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAF,EAPJ,EAQLJ,IARK,CAQA,SAAAC,GAAG,CAAE,CACT,GAAGA,GAAH,CACA,CACE,GAAG4B,IAAI,GAAG,KAAV,CACAjE,YAAY,CAAC,KAAD,CAAZ,CACA,GAAGiE,IAAI,GAAG,MAAV,CACA7D,aAAa,CAAC,KAAD,CAAb,CACA,GAAG6D,IAAI,GAAG,SAAV,CACA/D,gBAAgB,CAAC,KAAD,CAAhB,CACD,CACF,CAlBK,CAJT,yDA3YN,qDAqaI,mBAAO,aAAK,SAAS,CAAC,UAAf,wBACL,KAAC,MAAD,SAAQ,MAAM,CAAEuB,MAAhB,CAAwB,cAAc,CAAE3B,cAAxC,CAAwD,cAAc,CAAEF,cAAxE,CAAyF,WAAW,CAAEC,WAAtG,CAAmH,WAAW,CAAEF,WAAhI,CAA6I,aAAa,CAAEiH,aAA5J,CAA2K,OAAO,CAAI/E,OAAtL,CAA+L,YAAY,CAAE4E,YAA7M,wCAA0OG,aAA1O,oCAAoQ9E,SAApQ,SADK,cAEL,aAAK,SAAS,CAAC,iBAAf,CAAiC,KAAK,CAAE,CAACiG,eAAe,CAAC,OAAOxG,aAAP,CAAqB,GAAtC,CAAxC,wBACE,aAAK,SAAS,CAAC,cAAf,wBACI,aAAK,SAAS,CAAC,uBAAf,WACC,CAAC5B,WAAD,eAAc,YAAK,SAAS,CAAC,gBAAf,8DADf,CAECM,aAAa,cACd,aAAK,SAAS,CAAC,gBAAf,CAAgC,UAAU,CAAE4H,cAA5C,CAA4D,WAAW,CAAE,6BAAID,CAAAA,aAAa,CAAC,SAAD,CAAjB,EAAzE,wBACE,KAAC,UAAD,EAAY,EAAE,CAAC,2BAAf,CAA2C,OAAO,CAAE,yBAAIE,CAAAA,kBAAkB,CAAC,SAAD,CAAtB,EAApD,uBAAuF,KAAC,SAAD,IAAvF,EADF,cAEE,aAAK,SAAS,CAAC,kBAAf,wBACE,wCADF,cAC2B,aAD3B,cAEE,oBAAK3G,aAAL,EAFF,GAFF,cAME,YAAK,SAAS,CAAC,gBAAf,uBACA,sBAAKE,WAAL,gBADA,EANF,GADc,cAYd,aAAK,SAAS,CAAC,eAAf,wBACE,KAAC,UAAD,EAAY,EAAE,CAAC,iBAAf,CAAiC,OAAO,CAAE,yBAAIkG,CAAAA,kBAAkB,CAAC,SAAD,CAAtB,EAA1C,CAA6E,WAAW,CAAE,6BAAIH,CAAAA,gBAAgB,CAAC,SAAD,CAApB,EAA1F,CAA2H,UAAU,CAAE,4BAAIE,CAAAA,iBAAiB,CAAC,SAAD,CAArB,EAAvI,uBAAyK,KAAC,OAAD,EAAS,QAAQ,CAAC,OAAlB,EAAzK,EADF,cAEE,YAAK,SAAS,CAAC,gBAAf,CAAgC,EAAE,CAAC,eAAnC,qEAFF,GAdA,GADJ,cAoBI,aAAK,SAAS,CAAC,kBAAf,WACC,CAAC3H,WAAD,eAAc,YAAK,SAAS,CAAC,gBAAf,8DADf,CAECI,SAAS,cACV,aAAK,SAAS,CAAC,sBAAf,CAAuC,UAAU,CAAE8H,cAAnD,CAAmE,WAAW,CAAE,6BAAID,CAAAA,aAAa,CAAC,KAAD,CAAjB,EAAhF,wBAA0G,KAAC,UAAD,EAAY,EAAE,CAAC,uBAAf,CAAuC,OAAO,CAAE,yBAAIE,CAAAA,kBAAkB,CAAC,KAAD,CAAtB,EAAhD,uBAA+E,KAAC,SAAD,IAA/E,EAA1G,cAAkN,sBAAKrH,QAAL,WAAlN,GADU,cAGV,aAAK,SAAS,CAAC,eAAf,CAAgC,EAAE,CAAC,aAAnC,wBACE,KAAC,UAAD,EAAY,EAAE,CAAC,iBAAf,CAAkC,OAAO,CAAE,yBAAI8G,CAAAA,kBAAkB,CAAC,KAAD,CAAtB,EAA3C,CAA0E,WAAW,CAAE,6BAAIH,CAAAA,gBAAgB,CAAC,KAAD,CAApB,EAAvF,CAAoH,UAAU,CAAE,4BAAIE,CAAAA,iBAAiB,CAAC,KAAD,CAArB,EAAhI,uBAA8J,KAAC,OAAD,EAAS,QAAQ,CAAC,OAAlB,EAA9J,EADF,cAEE,YAAK,SAAS,CAAC,gBAAf,CAAgC,EAAE,CAAC,WAAnC,gEAFF,GALA,CASC/G,SAAS,eAAE,aAAK,SAAS,CAAC,cAAf,wBACV,YAAK,SAAS,CAAC,oBAAf,uBAAoC,oEAApC,EADU,cAEZ,cAAM,QAAQ,CAAEoH,gBAAhB,CAAkC,GAAG,CAAE5F,OAAvC,wBACA,KAAC,uBAAD,EAAyB,KAAK,CAAE1C,YAAhC,uBACA,KAAC,kBAAD,EACE,MAAM,CAAC,QADT,CAEE,EAAE,CAAC,gBAFL,CAGE,KAAK,CAAC,sBAHR,CAIE,IAAI,CAAC,gBAJP,CAKE,MAAM,CAAC,YALT,CAME,KAAK,CAAEsC,IANT,CAOE,QAAQ,CAAE,kBAACA,IAAD,CAAU,CAACC,OAAO,CAACD,IAAD,CAAP,CAAc,CAPrC,CAQE,mBAAmB,CAAE,CACnB,aAAc,aADK,CARvB,EADA,EADA,cAeF,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,EAAE,CAAC,iBAAzB,oBAfE,GAFY,GATZ,GApBJ,cAkDI,aAAK,SAAS,CAAC,qBAAf,WACG,CAAChC,WAAD,eAAc,YAAK,SAAS,CAAC,gBAAf,8DADjB,CAECQ,UAAU,cACX,aAAK,SAAS,CAAC,cAAf,CAA8B,UAAU,CAAE0H,cAA1C,CAA0D,WAAW,CAAE,6BAAID,CAAAA,aAAa,CAAC,MAAD,CAAjB,EAAvE,wBACE,KAAC,UAAD,EAAY,EAAE,CAAC,wBAAf,CAAwC,OAAO,CAAE,yBAAIE,CAAAA,kBAAkB,CAAC,MAAD,CAAtB,EAAjD,uBAAiF,KAAC,SAAD,IAAjF,EADF,cAEE,aAAK,SAAS,CAAC,mBAAf,wBACA,YAAK,SAAS,CAAC,gBAAf,uBAAgC,oBAAKvI,QAAQ,CAACwD,QAAd,EAAhC,EADA,cAEE,YAAK,SAAS,CAAC,kBAAf,uBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,WAAI,KAAK,CAAE,CAACiF,YAAY,CAAC,iBAAd,CAAX,UAA8CrH,QAA9C,EADF,cAC8D,aAD9D,cACmE,aADnE,cACwE,aADxE,cAEE,sBAAKI,aAAL,gBAFF,GADF,EAFF,GAFF,cAWE,aAAK,SAAS,CAAC,uBAAf,wBACA,YAAK,SAAS,CAAC,gBAAf,uBAAgC,oBAAKtB,WAAW,CAACsD,QAAjB,EAAhC,EADA,cAEE,YAAK,SAAS,CAAC,kBAAf,uBACE,aAAK,SAAS,CAAC,oBAAf,wBACE,WAAI,KAAK,CAAE,CAACiF,YAAY,CAAC,iBAAd,CAAX,UAA8CnH,WAA9C,EADF,cACiE,aADjE,cACsE,aADtE,cAC2E,aAD3E,cAEE,sBAAKI,gBAAL,gBAFF,GADF,EAFF,GAXF,GADW,cAwBX,aAAK,SAAS,CAAC,eAAf,wBACE,KAAC,UAAD,EAAY,EAAE,CAAC,iBAAf,CAAiC,OAAO,CAAE,yBAAIsG,CAAAA,kBAAkB,CAAC,MAAD,CAAtB,EAA1C,CAA0E,WAAW,CAAE,6BAAIH,CAAAA,gBAAgB,CAAC,MAAD,CAApB,EAAvF,CAAqH,UAAU,CAAE,4BAAIE,CAAAA,iBAAiB,CAAC,MAAD,CAArB,EAAjI,uBAAgK,KAAC,OAAD,EAAS,QAAQ,CAAC,OAAlB,EAAhK,EADF,cAEE,YAAK,SAAS,CAAC,gBAAf,CAAgC,EAAE,CAAC,YAAnC,iEAFF,GA1BA,GAlDJ,GADF,cAoFM,YAAK,SAAS,CAAC,YAAf,CAA4B,EAAE,CAAC,YAA/B,EApFN,GAFK,GAAP,CA0FH","sourcesContent":["import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport Button from '@material-ui/core/Button';\r\nimport Navbar from '../components/Navbar';\r\nimport '../css/home.css';\r\nimport { IconButton } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\n\r\n\r\n\r\nexport default function Home()\r\n{\r\n  const [userInfo,setUserInfo] = useState();\r\n  const [partnerInfo,setPartnerInfo]= useState();\r\n  const [havePartner,setHavePartner] = useState(false);\r\n  const [requestList,setRequestList]= useState([]);\r\n  const [dayWidget,setDayWidget] = useState(false);\r\n  const [specialWidget,setSpecialWidget] = useState(false);\r\n  const [bdayWidget,setBdayWidget] = useState(false);\r\n  const [dateOfRelation,setDateOfRelation] = useState(false);\r\n  const [isSetting,setIsSetting] = useState(false);\r\n  const [totalDay,setTotalDay] = useState();\r\n  const [userBday,setUserBday] = useState();\r\n  const [partnerBday,setPartnerBday] = useState();\r\n  const [yourCountDown,setYourCountDown] = useState();\r\n  const [partnerCountDown,setPartnerCountDown] = useState();\r\n  const [upComingEvent,setUpComingEvent] = useState();\r\n  const [upComingDay,setUpComingDay] = useState();\r\n  const [backgroundUrl,setBackgroundUrl] = useState('');\r\n  const [isHome,setIsHome] = useState(true);\r\n  const [date,setDate] = useState();\r\n\r\n  const formRef = useRef();\r\n  const acceptRef = useRef();\r\n  const dateRef = useRef();\r\n  \r\n\r\n  const monthMap = {\r\n    \"01\": \"January\",\r\n    \"02\": \"February\",\r\n    \"03\": \"March\",\r\n    \"04\": \"April\",\r\n    \"05\": \"May\",\r\n    \"06\": \"June\",\r\n    \"07\": \"July\",\r\n    \"08\": \"August\",\r\n    \"09\": \"September\",\r\n    \"10\": \"October\",\r\n    \"11\": \"November\",\r\n    \"12\": \"December\",\r\n  }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn===false)\r\n          {\r\n             window.open('/login','_self');\r\n          }\r\n          else\r\n          {\r\n            if(res.user.nickname===undefined)\r\n            {\r\n              window.open('/userProfileForm','_self');\r\n            }\r\n            else\r\n            {\r\n            \r\n              axios.get('/home/getBackground')\r\n              .then(res=>res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                if(!res)\r\n                {\r\n                  setBackgroundUrl('https://s3-us-west-2.amazonaws.com/s.cdpn.io/751678/my-illustration-background.png');\r\n                  document.getElementById('foreground').style.visibility=\"visible\";\r\n                }\r\n                else\r\n                {\r\n                  setBackgroundUrl('/home/getBackground');\r\n                  document.getElementById('foreground').style.visibility=\"hidden\";\r\n                }\r\n              })\r\n\r\n              let anniverse = new Date(res.user.dateOfRelationship);\r\n              let month = anniverse.getMonth()+1;\r\n              let day = anniverse.getDate();\r\n              let date =\"0\"+ month+\"/\"+day;\r\n              const specialEvent = [\r\n                {date:\"02/14\",event:\"Valentines Day\"},\r\n                {date:\"05/20\",event:\"520 Day\"},\r\n                {date:\"12/25\",event:\"Christmas Day\"},\r\n                {date:\"12/31\",event:\"New Year Eve\"},\r\n                {date:date,event:\"Anniversary Day\"},\r\n           \r\n             ]\r\n\r\n              setPartnerInfo(res.partnerInfo);\r\n              setUserInfo(res.user);\r\n              if(res.user.dateOfRelationship!==null)\r\n              {\r\n                setDateOfRelation(true);\r\n                setDate(res.user.dateOfRelationship);\r\n                if(res.widget)\r\n                {\r\n                    for(let i=0;i<res.widget.widget.length;i++)\r\n                    {\r\n                      if(res.widget.widget[i].type===\"day\")\r\n                      {\r\n                        setDayWidget(true);\r\n                        let current = new Date();\r\n                        let original = new Date(res.user.dateOfRelationship);\r\n                        let difference = current.getTime()-original.getTime();\r\n                        let day = difference/ (1000 * 3600 * 24);\r\n                        setTotalDay(parseInt(day)+1);\r\n                      }\r\n                      else if(res.widget.widget[i].type===\"bday\")\r\n                      {\r\n                        \r\n                        const partner = formatDate(res.partnerInfo.dateOfBirth);\r\n                        const you = formatDate(res.user.dateOfBirth);\r\n                        setPartnerBday(partner);\r\n                        setUserBday(you);\r\n                        const current = new Date();\r\n                        const date1 = new Date(res.partnerInfo.dateOfBirth);\r\n                        const date2 = new Date(res.user.dateOfBirth);\r\n                        date1.setFullYear(current.getFullYear());\r\n                        date2.setFullYear(current.getFullYear());\r\n                        if(current>date1)\r\n                        {\r\n                          date1.setFullYear(current.getFullYear()+1);\r\n                        }\r\n                        if(current>date2)\r\n                        {\r\n                          date2.setFullYear(current.getFullYear()+1);\r\n                        }\r\n                        const temp1 = parseInt((date1.getTime()-current.getTime())/ (1000 * 3600 * 24));\r\n                        const temp2 = parseInt((date2.getTime()-current.getTime())/ (1000 * 3600 * 24));\r\n                        if(temp1===0)\r\n                        {\r\n                          setPartnerCountDown(\"Today is your partner's Birthday!\");\r\n                        }\r\n                        else{\r\n                          setPartnerCountDown(Math.abs(temp1));\r\n                        }\r\n                        if(temp2===0)\r\n                        {\r\n                          setYourCountDown(\"Today is your Birthday!\")\r\n                        }\r\n                        else\r\n                        {\r\n                           setYourCountDown(Math.abs(temp2));\r\n                        }\r\n                        setBdayWidget(true);\r\n                      }\r\n                      else if(res.widget.widget[i].type===\"special\")\r\n                      {\r\n                        setSpecialWidget(true);\r\n                        const currentDate = new Date();\r\n                        const currentYear = currentDate.getFullYear();\r\n                        let closest =99999999999;\r\n                        specialEvent.map(date=>{\r\n                          let temp = new Date(currentYear+\"/\"+date.date);\r\n                          if(currentDate>temp)\r\n                          {\r\n                            temp.setFullYear(currentDate+1);\r\n                          }\r\n                          let result = Math.abs((parseInt(currentDate.getTime()-temp.getTime())/ (1000 * 3600 * 24)));\r\n                          if(result<closest)\r\n                          {\r\n                            closest = result+1;\r\n                            setUpComingEvent(date.event);\r\n                          }\r\n                        })\r\n                        if(Math.round(closest)===0)\r\n                        {\r\n                          setUpComingDay(\"Today is \"+date.event+\" !\");\r\n                        }\r\n                        else\r\n                        {\r\n                          setUpComingDay(Math.round(closest));\r\n                        }\r\n                        \r\n                        \r\n                      }\r\n                    }\r\n                }\r\n              }\r\n              axios({\r\n                method:'get',\r\n                url:'/user/getRequest',\r\n                headers: {'Content-Type': 'multipart/form-data'}\r\n              })\r\n              .then(res=>res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                let temp=[];\r\n                res.requests.map(list=>{\r\n                  temp.push({...list});\r\n                })\r\n                setRequestList(temp);\r\n              })\r\n              if(res.user.partner!==null)\r\n              {\r\n                setHavePartner(true); \r\n              }\r\n             \r\n            }\r\n          } \r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[dayWidget,specialWidget,bdayWidget]);\r\n\r\n      \r\n      function formatDate(date) {\r\n        const today = new Date(parseInt(Date.parse(date), 10));\r\n        var dd = String(today.getDate()).padStart(2, '0');\r\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n        var yyyy = today.getFullYear();\r\n        // return mm + '/' + dd + '/' + yyyy;\r\n        return dd + \" \" + monthMap[mm] \r\n      }\r\n      function handleLogout()\r\n      {\r\n        window.location.href = \"/auth/logout\";\r\n      }\r\n      function handleSendReq(event)\r\n      {\r\n        event.preventDefault();\r\n        const formData = new FormData(formRef.current);\r\n        axios({\r\n          method:'post',\r\n          url:'/user/sendRequest',\r\n          data:formData,\r\n          headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          if(res.isSent)\r\n          {\r\n             alert(\"sent!\");\r\n          }\r\n          else\r\n          {\r\n            alert(res.status);\r\n            console.log(res)\r\n          }\r\n        })\r\n        document.getElementById('reqId').value = \"\";\r\n      }\r\n      requestList.map(list=>{\r\n        console.log(list);\r\n      })\r\n\r\n      \r\n\r\n      function onHoverAddWidget(type)\r\n      {\r\n        if(type===\"special\")\r\n        {\r\n          document.getElementById('hover-special').style.opacity=\"1\";\r\n        }\r\n        else if(type===\"day\")\r\n        {\r\n          document.getElementById('hover-day').style.opacity=\"1\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('hover-bday').style.opacity=\"1\";\r\n        }\r\n      }\r\n\r\n      function offHoverAddWidget(type)\r\n      {\r\n        if(type===\"special\")\r\n        {\r\n          document.getElementById('hover-special').style.opacity=\"0\";\r\n        }\r\n        else if(type===\"day\")\r\n        {\r\n          document.getElementById('hover-day').style.opacity=\"0\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('hover-bday').style.opacity=\"0\";\r\n        }\r\n      }\r\n\r\n      async function handleCreateWidget(type)\r\n      {\r\n        if(type===\"day\")\r\n        {\r\n          if(dateOfRelation)\r\n          {\r\n            const formdata = new FormData();\r\n            formdata.append('type',type);\r\n            await axios({\r\n              method:'post',\r\n              url:'/widget/createWidget',\r\n              data:formdata,\r\n              headers:{'Content-Type': 'multipart/form-data'}\r\n            })\r\n            .then(res=>res.data)\r\n            .catch(err=>console.log(err))\r\n            .then(res=>{\r\n              setDayWidget(true);\r\n            })  \r\n          }\r\n          else\r\n          {\r\n            document.getElementById(\"noDayWidget\").style.display=\"none\";\r\n            setIsSetting(true);\r\n          }\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          const formdata = new FormData();\r\n          formdata.append('type',\"bday\");\r\n          await axios({\r\n            method:'post',\r\n            url:'/widget/createWidget',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n          })\r\n          .then(res=>res.data)\r\n          .catch(err=>console.log(err))\r\n          .then(res=>{\r\n            if(res)\r\n            {\r\n              setBdayWidget(true);\r\n            }\r\n          })\r\n        }\r\n        else if(type===\"special\")\r\n        {\r\n          const formdata = new FormData();\r\n          formdata.append('type',\"special\");\r\n          await axios({\r\n            method:'post',\r\n            url:'/widget/createWidget',\r\n            data:formdata,\r\n            headers:{'Content-Type':'multipart/formdata'}\r\n          })\r\n          .then(res=>res.data)\r\n          .catch(err=>console.log(err))\r\n          .then(res=>{\r\n            if(res)\r\n            {\r\n              setSpecialWidget(true);\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      async function handleUpdateDate(event)\r\n      {\r\n        event.preventDefault();\r\n        const formdata = new FormData(dateRef.current);\r\n        formdata.append('type',\"day\");\r\n        await axios({\r\n          method:'post',\r\n          url:'/widget/createWidget',\r\n          data:formdata,\r\n          headers:{'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          setIsSetting(false);\r\n          setDayWidget(true);\r\n        })\r\n      }\r\n\r\n      function onHoverWidget(type)\r\n      {\r\n        if(type===\"day\")\r\n        {\r\n          document.getElementById(\"home-delete-dayWidget\").style.visibility = \"visible\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('home-delete-bdayWidget').style.visibility = \"visible\";\r\n        }\r\n        else if(type===\"special\")\r\n        {\r\n          document.getElementById('home-delete-specialWidget').style.visibility = \"visible\";\r\n        }\r\n      }\r\n      function offHoverWidget()\r\n      {\r\n        if(dayWidget)\r\n        document.getElementById(\"home-delete-dayWidget\").style.visibility = \"hidden\";\r\n        if(bdayWidget)\r\n        document.getElementById('home-delete-bdayWidget').style.visibility =\"hidden\";\r\n        if(specialWidget)\r\n        document.getElementById('home-delete-specialWidget').style.visibility = \"hidden\";\r\n      }\r\n\r\n      async function handleDeleteWidget(type)\r\n      {\r\n         const formdata = new FormData();\r\n         formdata.append('type',type);\r\n         await axios({\r\n           method:'post',\r\n           url:'/widget/deleteWidget',\r\n           data:formdata,\r\n           headers:{'Content-Type': 'multipart/form-data'}\r\n         })\r\n         .then(res=>res.data)\r\n         .catch(err=>console.log(err))\r\n         .then(res=>{\r\n           if(res)\r\n           {\r\n             if(type===\"day\")\r\n             setDayWidget(false)\r\n             if(type===\"bday\")\r\n             setBdayWidget(false)\r\n             if(type===\"special\")\r\n             setSpecialWidget(false)\r\n           }\r\n         })\r\n      }\r\n\r\n\r\n    return <div className=\"home-div\">\r\n      <Navbar isHome={isHome} setRequestList={setRequestList} setHavePartner={setHavePartner}  requestList={requestList} havePartner={havePartner} handleSendReq={handleSendReq} formRef = {formRef} handleLogout={handleLogout} handleSendReq={handleSendReq} acceptRef={acceptRef}/>\r\n      <div className=\"home-background\" style={{backgroundImage:\"url(\"+backgroundUrl+\")\"}}>\r\n        <div className=\"home-overlay\">\r\n            <div className=\"home-widget anniverse\">\r\n            {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {specialWidget?\r\n            <div className=\"home-event-div\" onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"special\")}>\r\n              <IconButton id=\"home-delete-specialWidget\" onClick={()=>handleDeleteWidget(\"special\")}><ClearIcon/></IconButton>\r\n              <div className=\"home-event-title\">\r\n                <h3>Up Coming Event:</h3><br/>\r\n                <h1>{upComingEvent}</h1>\r\n              </div>\r\n              <div className=\"home-event-day\">\r\n              <h1>{upComingDay} days left</h1>\r\n              </div>\r\n            </div>\r\n            :\r\n            <div className=\"home-noWidget\">\r\n              <IconButton id=\"home-add-widget\" onClick={()=>handleCreateWidget(\"special\")} onMouseOver={()=>onHoverAddWidget(\"special\")} onMouseOut={()=>offHoverAddWidget(\"special\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-special\">Add this widget to get to know up coming special events</div>\r\n            </div>}\r\n            </div>\r\n            <div className=\"home-widget days\">\r\n            {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {dayWidget?\r\n            <div className=\"home-totalDay-widget\"  onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"day\")}><IconButton id=\"home-delete-dayWidget\" onClick={()=>handleDeleteWidget(\"day\")}><ClearIcon/></IconButton><h1>{totalDay} DAYS</h1></div>\r\n            :\r\n            <div className=\"home-noWidget\"  id=\"noDayWidget\">\r\n              <IconButton id=\"home-add-widget\"  onClick={()=>handleCreateWidget(\"day\")} onMouseOver={()=>onHoverAddWidget(\"day\")} onMouseOut={()=>offHoverAddWidget(\"day\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-day\">Add this widget to get to know total days together</div>\r\n            </div>}\r\n            {isSetting&&<div className=\"home-setDate\">\r\n              <div className=\"home-setDate-title\"><h2>Please set the date of you with your partner</h2></div>\r\n            <form onSubmit={handleUpdateDate} ref={dateRef}>\r\n            <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfRelation\"\r\n              label=\"Date of Relationship\"\r\n              name=\"dateOfRelation\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={date}\r\n              onChange={(date) => {setDate(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>\r\n          <Button type=\"submit\" id=\"home-submit-day\">SUBMIT</Button>\r\n          </form>\r\n            </div>}\r\n            </div>\r\n            <div className=\"home-widget special\">\r\n              {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {bdayWidget?\r\n            <div className=\"home-dob-div\" onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"bday\")}>\r\n              <IconButton id=\"home-delete-bdayWidget\" onClick={()=>handleDeleteWidget(\"bday\")}><ClearIcon/></IconButton>\r\n              <div className=\"home-bday-div you\">\r\n              <div className=\"home-bday-name\"><h1>{userInfo.nickname}</h1></div>\r\n                <div className=\"home-bday-border\">\r\n                  <div className=\"home-bday-calander\">\r\n                    <h2 style={{borderBottom:\"1px solid white\"}}>{userBday}</h2><br/><br/><br/>\r\n                    <h1>{yourCountDown} days left</h1>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"home-bday-div partner\">\r\n              <div className=\"home-bday-name\"><h1>{partnerInfo.nickname}</h1></div>\r\n                <div className=\"home-bday-border\">\r\n                  <div className=\"home-bday-calander\">\r\n                    <h2 style={{borderBottom:\"1px solid white\"}}>{partnerBday}</h2><br/><br/><br/>\r\n                    <h1>{partnerCountDown} days left</h1>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n            :\r\n            <div className=\"home-noWidget\">\r\n              <IconButton id=\"home-add-widget\" onClick={()=>handleCreateWidget(\"bday\")} onMouseOver={()=>onHoverAddWidget(\"bday\")} onMouseOut={()=>offHoverAddWidget(\"bday\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-bday\">Add this widget to get to know each other birthdays</div>\r\n            </div>}\r\n            </div>\r\n\r\n        </div>\r\n            <div className=\"foreground\" id=\"foreground\"></div>\r\n      </div>\r\n    </div>\r\n    \r\n}"]},"metadata":{},"sourceType":"module"}