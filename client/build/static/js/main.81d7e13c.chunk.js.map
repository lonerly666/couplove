{"version":3,"sources":["components/Login.js","components/RequestInfo.js","components/PartnerReq.js","components/Navbar.js","components/Home.js","components/UserProfileForm.js","components/InputBox.js","components/ChatNav.js","components/ChatBubble.js","SocketContext.js","components/VideoRespond.js","components/VideoCall.js","components/ChatRoom.js","components/VideoList.js","components/VideoUploadDiv.js","components/Cinema.js","components/SelectedImage.js","components/MemoryBook/CreatePost.js","components/MemoryBook/MemoryPost.js","components/MemoryBook/MemoryBook.js","App.js","reportWebVitals.js","index.js"],"names":["Login","className","Button","variant","onClick","window","location","href","id","src","RequestInfo","props","reqInfo","setHavePartner","setRequestList","url","senderId","event","a","preventDefault","formdata","FormData","append","axios","method","data","header","then","res","catch","err","console","log","prev","filter","info","alert","senderNickname","IconButton","headers","result","PartnerReq","requestList","map","Navbar","handleSendReq","formRef","havePartner","isHome","useState","viewList","setViewList","target","files","reload","open","style","color","document","getElementById","click","type","hidden","onChange","name","onSubmit","ref","placeholder","value","makeStyles","theme","formControl","minWidth","large","width","spacing","height","Home","userInfo","setUserInfo","partnerInfo","setPartnerInfo","dayWidget","setDayWidget","specialWidget","setSpecialWidget","bdayWidget","setBdayWidget","dateOfRelation","setDateOfRelation","isSetting","setIsSetting","Date","date","setDate","totalDay","setTotalDay","userBday","setUserBday","partnerBday","setPartnerBday","yourCountDown","setYourCountDown","partnerCountDown","setPartnerCountDown","upComingEvent","setUpComingEvent","upComingDay","setUpComingDay","backgroundUrl","setBackgroundUrl","useRef","acceptRef","dateRef","monthMap","formatDate","today","parseInt","parse","dd","String","getDate","padStart","mm","getMonth","getFullYear","formData","current","isSent","status","onHoverAddWidget","opacity","offHoverAddWidget","handleCreateWidget","display","onHoverWidget","visibility","offHoverWidget","handleDeleteWidget","useEffect","ac","AbortController","get","isLoggedIn","undefined","user","nickname","anniverse","dateOfRelationship","specialEvent","widget","i","length","original","difference","getTime","partner","dateOfBirth","you","date1","date2","setFullYear","temp1","temp2","Math","abs","currentDate","currentYear","closest","temp","round","requests","list","push","abort","handleLogout","backgroundImage","onMouseOut","onMouseOver","fontSize","utils","DateFnsUtils","margin","label","format","KeyboardButtonProps","borderBottom","genders","useStyles","marginTop","UserProfileForm","setNickname","bio","setBio","croppedUrl","setCroppedUrl","uploaded","setUploaded","dob","setDob","gender","setGender","setPartner","setDateOfRelationship","classes","reader","FileReader","onload","setAttribute","readAsDataURL","file","TextField","e","FormControl","InputLabel","Select","labelId","option","MenuItem","marginLeft","InputBox","handleSendMsg","ChatNav","toggleBackHome","partnerStatus","toggleVideoCall","callAccepted","readyDisplay","setReadyDisplay","isOnline","setIsOnline","openMore","setOpenMore","_id","ChatBubble","textInfo","userId","text","socket","SocketContext","createContext","isCaller","isAnswered","ContextProvider","children","setCallAccepted","callEnded","setCallEnded","stream","setStream","call","setCall","setUserId","roomId","setRoomId","newMessage","setNewMessage","isCalling","setIsCalling","noCall","setNoCall","users","myVideo","userVideo","connectionRef","io","on","chat","callUser","marginRight","from","callerName","signal","isReceivingCall","leaveCall","audio","video","answerCall","navigator","mediaDevices","getUserMedia","currentStream","local","srcObject","peer","Peer","initiator","trickle","emit","to","signalData","destroy","Provider","sendMsg","msg","joinRoom","startCall","muteAudio","getAudioTracks","enabled","muteVideo","getVideoTracks","declineCall","VideoRespond","useContext","initializeVideo","Avatar","VideoCall","isMuted","setIsMuted","isDisplayed","setIsDisplayed","playsInline","muted","autoPlay","ChatRoom","setText","userNickname","setUserNickname","messages","setMessages","scrollDir","me","onBoth","backgroundSize","chatInfo","chats","reverse","roomInfo","prevData","scrollTo","scrollHeight","index","VideoList","handleChooseMovie","setFiles","dropdown","setDropdown","videoId","filename","aliases","handleDeleteVideo","size","state","top","VideoUploadDiv","openUpload","setOpenUpload","uploadProgress","setUploadProgress","onUploadProgress","progressEvent","progress","loaded","total","textContent","Cinema","handle","useFullScreenHandle","ready","setReady","play","setPlay","openUrl","setOpenUrl","setUrl","buffering","setBuffering","volume","setVolume","isLoud","setIsLoud","isFullScreen","setIsFullScreen","videoRef","urlRef","readyToPlay","initialRun","choosenUrl","time","getCurrentTime","seekTo","pointed","playing","onProgress","point","getDuration","left","onReady","onError","min","max","actualVolume","parseFloat","progressBarWidth","nativeEvent","offsetX","offsetWidth","controls","enter","bottom","background","exit","Checkmark","selected","position","zIndex","fill","cx","cy","r","d","imgStyle","transition","selectedImgStyle","transform","cont","backgroundColor","cursor","overflow","SelectedImage","photo","direction","handleChooseNotToDeleteFile","handleChooseToDeleteFile","isSelected","setIsSelected","actualHeight","sx","sy","alt","title","CreatePost","setPost","handlePost","isEditing","setIsPosting","setIsEditing","postData","setPostData","uploadedFiles","setUploadedFiles","feeling","setFeeling","willBeDeletedFiles","setWillBeDeletedFiles","deletedExistingFiles","setDeletedExistingFiles","selectAll","imageRenderer","useCallback","key","val","tempDeletedFiles","sort","tempUploadedFiles","fileId","splice","set","post","j","docs","NativeSelect","aria-label","rows","photos","renderImage","test","URL","createObjectURL","MemoryPost","posts","yyyy","timeOfCreation","items","showFullscreenButton","showPlayButton","showThumbnails","MemoryBook","isPosting","setPosts","success","App","path","exact","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.81d7e13c.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\r\nimport '../css/login.css';\r\n\r\nexport default function Login(){\r\n\r\n\r\n    function handleGoogleClick()\r\n    {\r\n        window.location.href = \"/auth/google\";\r\n    }\r\n\r\n    return <div className=\"login-page-div\">\r\n        <div className=\"login-page\">\r\n        <div className=\"title\"><h1>Welcome to Couplove!</h1></div>\r\n        <Button variant=\"contained\" onClick={handleGoogleClick} id=\"home-login-btn\">\r\n            <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" className=\"g-logo\"/>\r\n            &nbsp;&nbsp;Login With Google</Button>\r\n        </div>\r\n    </div>\r\n}","import ReactAvatar from '@material-ui/core/Avatar';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { IconButton } from '@material-ui/core';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nimport axios from 'axios';\r\n\r\n\r\n\r\n\r\nexport default function RequestInfo(props)\r\n{\r\n    const {reqInfo,setHavePartner,setRequestList} = props;\r\n    const url = \"/gridFs/getOtherProfile/\"+reqInfo.senderId;\r\n\r\n\r\n    function acceptPartner(event)\r\n    {\r\n      event.preventDefault();\r\n      const formdata = new FormData();\r\n      formdata.append('senderId',reqInfo.senderId);\r\n      axios({\r\n        method:'post',\r\n        url:'/user/acceptRequest',\r\n        data:formdata,\r\n        headers: {'Content-Type': 'multipart/form-data'}\r\n      })\r\n      .then(res=>res.data)\r\n      .catch(err=>console.log(err))\r\n      .then(res=>{\r\n        if(res.result)\r\n        {\r\n          setRequestList(prev=>{\r\n            return prev.filter(info=>{\r\n              return info.senderId!==reqInfo.senderId\r\n            })\r\n          })\r\n          setHavePartner(true);\r\n        }\r\n      })\r\n    }\r\n    async function declinePartner(event)\r\n    {\r\n      event.preventDefault();\r\n      const formdata = new FormData();\r\n      formdata.append('senderId',reqInfo.senderId)\r\n      await axios({\r\n        method:'post',\r\n        url:'/user/declineUser',\r\n        data:formdata,\r\n        header:{'Content-Type': 'multipart/form-data'}\r\n      })\r\n      .then(res=>res.data)\r\n      .catch(err=>console.log(err))\r\n      .then(res=>{\r\n        if(res)\r\n        {\r\n          setRequestList(prev=>{\r\n            return prev.filter(info=>{\r\n              return info.senderId!==reqInfo.senderId\r\n            })\r\n          })\r\n        }\r\n        else\r\n        {\r\n          alert(\"Opps something wrong with the server\")\r\n        }\r\n      })\r\n      \r\n    }\r\n\r\n    return <div className=\"info-div\">\r\n        <div className=\"info-sender-profile-div\">\r\n            <ReactAvatar\r\n            id=\"info-sender-avatar\"\r\n            src={url}\r\n            />\r\n        </div>\r\n        <div className=\"info-sender-desc\">\r\n            {reqInfo.senderNickname} wants to be your partner<br/>\r\n            <IconButton id=\"info-req-option\" onClick={acceptPartner} ><CheckIcon/></IconButton>\r\n            <IconButton id=\"info-req-option\" onClick={declinePartner}><ClearIcon/></IconButton>\r\n        </div>\r\n    </div>\r\n}","import '../css/requestList.css';\r\n\r\nimport RequestInfo from './RequestInfo';\r\n\r\n\r\n\r\n\r\nexport default function PartnerReq(props)\r\n{\r\n    const {requestList,setHavePartner,setRequestList} = props;\r\n    \r\n\r\n    return<div className=\"req-list-div\">\r\n        {requestList.map(info=>{\r\n            return <RequestInfo setRequestList={setRequestList} reqInfo={info} setHavePartner={setHavePartner}/>\r\n        })}\r\n    </div>\r\n}","import '../css/navbar.css';\r\n\r\nimport PartnerReq from  './PartnerReq';\r\nimport PeopleAltIcon from '@material-ui/icons/PeopleAlt';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { useState,useRef } from 'react';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport axios from 'axios';\r\n\r\nexport default function Navbar(props)\r\n{\r\n    const {handleSendReq,formRef,havePartner,requestList,setHavePartner,setRequestList,isHome} = props;\r\n    const [viewList,setViewList] = useState(false);\r\n\r\n\r\n    \r\n    async function handleChangeBackground(event)\r\n    {\r\n      await axios({\r\n        method:'post',\r\n        url:'/home/checkExist'\r\n      })\r\n      const formdata = new FormData();\r\n      formdata.append('file',event.target.files[0]);\r\n        await axios({\r\n          method:'post',\r\n          url:'/home/upload',\r\n          data:formdata,\r\n          headers:{'Content-Type':'multipart/formdata'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            window.location.reload();\r\n        })\r\n    }\r\n\r\n    return<div className=\"nav-div\">\r\n        <div className=\"nav-title\" onClick={()=>window.open('/','_self')}><h3>Couplove</h3></div>\r\n        <div className=\"nav-activity-div\">\r\n        <div className=\"nav-activity logout\"  onClick={()=>window.location.href = \"/auth/logout\"}>Logout</div> \r\n        {isHome&&<IconButton style={{color:\"white\"}} onClick={()=>document.getElementById('background-file').click()}><PhotoIcon/></IconButton>}\r\n        {isHome&&<input type=\"file\"  hidden id=\"background-file\" onChange={handleChangeBackground} name=\"file\"/>}\r\n        <div className=\"nav-activity profile\"  onClick={()=>window.location.href = \"/userProfileForm\"}>Profile</div> \r\n        {havePartner&&<div className=\"nav-activity chat\" onClick={()=>window.open('/chatRoom','_self')}>Chat Room</div>}\r\n        {havePartner&&<div className=\"nav-activity cinema\" onClick={()=>window.open('/cinema','_self')}>Cinema</div>}\r\n        {havePartner&&<div className=\"nav-activity memory\" onClick={()=>window.open('/memoryBook','_self')}>Memory Book</div>}\r\n        {!havePartner&&<div className=\"nav-sendRequest\">\r\n        <form onSubmit={handleSendReq} ref={formRef}>\r\n        <input type=\"text\" id=\"reqId\" name=\"reqId\" placeholder=\"Partner ID\"/>\r\n        <input type=\"submit\" value=\"+\" className=\"nav-submit\" />\r\n        </form>    \r\n        </div>}\r\n        {!havePartner&&<div className=\"nav-request\">\r\n        <IconButton style={{color:\"whitesmoke\"}} onClick={()=>setViewList(!viewList)}><PeopleAltIcon/></IconButton>\r\n        {viewList&&<PartnerReq requestList={requestList} setHavePartner={setHavePartner} setRequestList={setRequestList} />}\r\n        </div>}\r\n        </div>\r\n    </div>\r\n}","import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Activity from './ActivityPane';\r\nimport Navbar from '../components/Navbar';\r\nimport '../css/home.css';\r\nimport { IconButton } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\n\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  formControl: {\r\n    minWidth: \"100%\",\r\n  },\r\n  large: {\r\n    width: theme.spacing(17),\r\n    height: theme.spacing(17),\r\n  },\r\n}));\r\nexport default function Home()\r\n{\r\n  const [userInfo,setUserInfo] = useState();\r\n  const [partnerInfo,setPartnerInfo]= useState();\r\n  const [havePartner,setHavePartner] = useState(false);\r\n  const [roomId,setRoomId] = useState();\r\n  const [reqId,setReqId] = useState();\r\n  const [requestList,setRequestList]= useState([]);\r\n  const [dayWidget,setDayWidget] = useState(false);\r\n  const [specialWidget,setSpecialWidget] = useState(false);\r\n  const [bdayWidget,setBdayWidget] = useState(false);\r\n  const [dateOfRelation,setDateOfRelation] = useState(false);\r\n  const [isSetting,setIsSetting] = useState(false);\r\n  const [date,setDate] = useState(new Date());\r\n  const [totalDay,setTotalDay] = useState();\r\n  const [userBday,setUserBday] = useState();\r\n  const [partnerBday,setPartnerBday] = useState();\r\n  const [yourCountDown,setYourCountDown] = useState();\r\n  const [partnerCountDown,setPartnerCountDown] = useState();\r\n  const [upComingEvent,setUpComingEvent] = useState();\r\n  const [upComingDay,setUpComingDay] = useState();\r\n  const [backgroundUrl,setBackgroundUrl] = useState('');\r\n  const [isHome,setIsHome] = useState(true);\r\n\r\n  const formRef = useRef();\r\n  const acceptRef = useRef();\r\n  const dateRef = useRef();\r\n  \r\n\r\n  const monthMap = {\r\n    \"01\": \"January\",\r\n    \"02\": \"February\",\r\n    \"03\": \"March\",\r\n    \"04\": \"April\",\r\n    \"05\": \"May\",\r\n    \"06\": \"June\",\r\n    \"07\": \"July\",\r\n    \"08\": \"August\",\r\n    \"09\": \"September\",\r\n    \"10\": \"October\",\r\n    \"11\": \"November\",\r\n    \"12\": \"December\",\r\n  }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn===false)\r\n          {\r\n             window.open('/login','_self');\r\n          }\r\n          else\r\n          {\r\n            if(res.user.nickname===undefined)\r\n            {\r\n              window.open('/userProfileForm','_self');\r\n            }\r\n            else\r\n            {\r\n\r\n              axios.get('/home/getBackground')\r\n              .then(res=>res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                if(!res)\r\n                {\r\n                  setBackgroundUrl('https://s3-us-west-2.amazonaws.com/s.cdpn.io/751678/my-illustration-background.png');\r\n                  document.getElementById('foreground').style.visibility=\"visible\";\r\n                }\r\n                else\r\n                {\r\n                  setBackgroundUrl('/home/getBackground');\r\n                  document.getElementById('foreground').style.visibility=\"hidden\";\r\n                }\r\n              })\r\n\r\n              let anniverse = new Date(res.user.dateOfRelationship);\r\n              let month = anniverse.getMonth()+1;\r\n              let day = anniverse.getDate();\r\n              let date =\"0\"+ month+\"/\"+day;\r\n              const specialEvent = [\r\n                {date:\"02/14\",event:\"Valentines Day\"},\r\n                {date:\"05/20\",event:\"520 Day\"},\r\n                {date:\"12/25\",event:\"Christmas Day\"},\r\n                {date:\"12/31\",event:\"New Year Eve\"},\r\n                {date:date,event:\"Anniversary Day\"},\r\n           \r\n             ]\r\n\r\n              setPartnerInfo(res.partnerInfo);\r\n              setUserInfo(res.user);\r\n              if(res.user.dateOfRelationship!==null)\r\n              {\r\n                setDateOfRelation(true);\r\n                setDate(res.user.dateOfRelationship);\r\n                if(res.widget)\r\n                {\r\n                    for(let i=0;i<res.widget.widget.length;i++)\r\n                    {\r\n                      if(res.widget.widget[i].type===\"day\")\r\n                      {\r\n                        setDayWidget(true);\r\n                        let current = new Date();\r\n                        let original = new Date(res.user.dateOfRelationship);\r\n                        let difference = current.getTime()-original.getTime();\r\n                        let day = difference/ (1000 * 3600 * 24);\r\n                        setTotalDay(parseInt(day)+1);\r\n                      }\r\n                      else if(res.widget.widget[i].type===\"bday\")\r\n                      {\r\n                        \r\n                        const partner = formatDate(res.partnerInfo.dateOfBirth);\r\n                        const you = formatDate(res.user.dateOfBirth);\r\n                        setPartnerBday(partner);\r\n                        setUserBday(you);\r\n                        const current = new Date();\r\n                        const date1 = new Date(res.partnerInfo.dateOfBirth);\r\n                        const date2 = new Date(res.user.dateOfBirth);\r\n                        date1.setFullYear(current.getFullYear());\r\n                        date2.setFullYear(current.getFullYear());\r\n                        if(current>date1)\r\n                        {\r\n                          date1.setFullYear(current.getFullYear()+1);\r\n                        }\r\n                        if(current>date2)\r\n                        {\r\n                          date2.setFullYear(current.getFullYear()+1);\r\n                        }\r\n                        const temp1 = parseInt((date1.getTime()-current.getTime())/ (1000 * 3600 * 24));\r\n                        const temp2 = parseInt((date2.getTime()-current.getTime())/ (1000 * 3600 * 24));\r\n                        if(temp1===0)\r\n                        {\r\n                          setPartnerCountDown(\"Today is your partner's Birthday!\");\r\n                        }\r\n                        else{\r\n                          setPartnerCountDown(Math.abs(temp1));\r\n                        }\r\n                        if(temp2===0)\r\n                        {\r\n                          setYourCountDown(\"Today is your Birthday!\")\r\n                        }\r\n                        else\r\n                        {\r\n                           setYourCountDown(Math.abs(temp2));\r\n                        }\r\n                        setBdayWidget(true);\r\n                      }\r\n                      else if(res.widget.widget[i].type===\"special\")\r\n                      {\r\n                        setSpecialWidget(true);\r\n                        const currentDate = new Date();\r\n                        const currentYear = currentDate.getFullYear();\r\n                        let closest =99999999999;\r\n                        specialEvent.map(date=>{\r\n                          let temp = new Date(currentYear+\"/\"+date.date);\r\n                          if(currentDate>temp)\r\n                          {\r\n                            temp.setFullYear(currentDate+1);\r\n                          }\r\n                          let result = Math.abs((parseInt(currentDate.getTime()-temp.getTime())/ (1000 * 3600 * 24)));\r\n                          if(result<closest)\r\n                          {\r\n                            closest = result+1;\r\n                            setUpComingEvent(date.event);\r\n                          }\r\n                        })\r\n                        if(Math.round(closest)===0)\r\n                        {\r\n                          setUpComingDay(\"Today is \"+date.event+\" !\");\r\n                        }\r\n                        else\r\n                        {\r\n                          setUpComingDay(Math.round(closest));\r\n                        }\r\n                        \r\n                        \r\n                      }\r\n                    }\r\n                }\r\n              }\r\n              axios({\r\n                method:'get',\r\n                url:'/user/getRequest',\r\n                headers: {'Content-Type': 'multipart/form-data'}\r\n              })\r\n              .then(res=>res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                let temp=[];\r\n                res.requests.map(list=>{\r\n                  temp.push({...list});\r\n                })\r\n                setRequestList(temp);\r\n              })\r\n              if(res.user.partner!==null)\r\n              {\r\n                setHavePartner(true); \r\n              }\r\n             \r\n            }\r\n          } \r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[dayWidget,specialWidget,bdayWidget]);\r\n\r\n      \r\n      function formatDate(date) {\r\n        const today = new Date(parseInt(Date.parse(date), 10));\r\n        var dd = String(today.getDate()).padStart(2, '0');\r\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n        var yyyy = today.getFullYear();\r\n        // return mm + '/' + dd + '/' + yyyy;\r\n        return dd + \" \" + monthMap[mm] \r\n      }\r\n      function handleLogout()\r\n      {\r\n        window.location.href = \"/auth/logout\";\r\n      }\r\n      function handleSendReq(event)\r\n      {\r\n        event.preventDefault();\r\n        const formData = new FormData(formRef.current);\r\n        axios({\r\n          method:'post',\r\n          url:'/user/sendRequest',\r\n          data:formData,\r\n          headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          if(res.isSent)\r\n          {\r\n             alert(\"sent!\");\r\n          }\r\n          else\r\n          {\r\n            alert(res.status);\r\n            console.log(res)\r\n          }\r\n        })\r\n        document.getElementById('reqId').value = \"\";\r\n      }\r\n      requestList.map(list=>{\r\n        console.log(list);\r\n      })\r\n\r\n      \r\n\r\n      function onHoverAddWidget(type)\r\n      {\r\n        if(type===\"special\")\r\n        {\r\n          document.getElementById('hover-special').style.opacity=\"1\";\r\n        }\r\n        else if(type===\"day\")\r\n        {\r\n          document.getElementById('hover-day').style.opacity=\"1\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('hover-bday').style.opacity=\"1\";\r\n        }\r\n      }\r\n\r\n      function offHoverAddWidget(type)\r\n      {\r\n        if(type===\"special\")\r\n        {\r\n          document.getElementById('hover-special').style.opacity=\"0\";\r\n        }\r\n        else if(type===\"day\")\r\n        {\r\n          document.getElementById('hover-day').style.opacity=\"0\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('hover-bday').style.opacity=\"0\";\r\n        }\r\n      }\r\n\r\n      async function handleCreateWidget(type)\r\n      {\r\n        if(type===\"day\")\r\n        {\r\n          if(dateOfRelation)\r\n          {\r\n            const formdata = new FormData();\r\n            formdata.append('type',type);\r\n            await axios({\r\n              method:'post',\r\n              url:'/widget/createWidget',\r\n              data:formdata,\r\n              headers:{'Content-Type': 'multipart/form-data'}\r\n            })\r\n            .then(res=>res.data)\r\n            .catch(err=>console.log(err))\r\n            .then(res=>{\r\n              setDayWidget(true);\r\n            })  \r\n          }\r\n          else\r\n          {\r\n            document.getElementById(\"noDayWidget\").style.display=\"none\";\r\n            setIsSetting(true);\r\n          }\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          const formdata = new FormData();\r\n          formdata.append('type',\"bday\");\r\n          await axios({\r\n            method:'post',\r\n            url:'/widget/createWidget',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n          })\r\n          .then(res=>res.data)\r\n          .catch(err=>console.log(err))\r\n          .then(res=>{\r\n            if(res)\r\n            {\r\n              setBdayWidget(true);\r\n            }\r\n          })\r\n        }\r\n        else if(type===\"special\")\r\n        {\r\n          const formdata = new FormData();\r\n          formdata.append('type',\"special\");\r\n          await axios({\r\n            method:'post',\r\n            url:'/widget/createWidget',\r\n            data:formdata,\r\n            headers:{'Content-Type':'multipart/formdata'}\r\n          })\r\n          .then(res=>res.data)\r\n          .catch(err=>console.log(err))\r\n          .then(res=>{\r\n            if(res)\r\n            {\r\n              setSpecialWidget(true);\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      async function handleUpdateDate(event)\r\n      {\r\n        event.preventDefault();\r\n        const formdata = new FormData(dateRef.current);\r\n        formdata.append('type',\"day\");\r\n        await axios({\r\n          method:'post',\r\n          url:'/widget/createWidget',\r\n          data:formdata,\r\n          headers:{'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          setIsSetting(false);\r\n          setDayWidget(true);\r\n        })\r\n      }\r\n\r\n      function onHoverWidget(type)\r\n      {\r\n        if(type===\"day\")\r\n        {\r\n          document.getElementById(\"home-delete-dayWidget\").style.visibility = \"visible\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('home-delete-bdayWidget').style.visibility = \"visible\";\r\n        }\r\n        else if(type===\"special\")\r\n        {\r\n          document.getElementById('home-delete-specialWidget').style.visibility = \"visible\";\r\n        }\r\n      }\r\n      function offHoverWidget()\r\n      {\r\n        if(dayWidget)\r\n        document.getElementById(\"home-delete-dayWidget\").style.visibility = \"hidden\";\r\n        if(bdayWidget)\r\n        document.getElementById('home-delete-bdayWidget').style.visibility =\"hidden\";\r\n        if(specialWidget)\r\n        document.getElementById('home-delete-specialWidget').style.visibility = \"hidden\";\r\n      }\r\n\r\n      async function handleDeleteWidget(type)\r\n      {\r\n         const formdata = new FormData();\r\n         formdata.append('type',type);\r\n         await axios({\r\n           method:'post',\r\n           url:'/widget/deleteWidget',\r\n           data:formdata,\r\n           headers:{'Content-Type': 'multipart/form-data'}\r\n         })\r\n         .then(res=>res.data)\r\n         .catch(err=>console.log(err))\r\n         .then(res=>{\r\n           if(res)\r\n           {\r\n             if(type===\"day\")\r\n             setDayWidget(false)\r\n             if(type===\"bday\")\r\n             setBdayWidget(false)\r\n             if(type===\"special\")\r\n             setSpecialWidget(false)\r\n           }\r\n         })\r\n      }\r\n\r\n\r\n    return <div className=\"home-div\">\r\n      <Navbar isHome={isHome} setRequestList={setRequestList} setHavePartner={setHavePartner}  requestList={requestList} havePartner={havePartner} handleSendReq={handleSendReq} formRef = {formRef} handleLogout={handleLogout} handleSendReq={handleSendReq} acceptRef={acceptRef}/>\r\n      <div className=\"home-background\" style={{backgroundImage:\"url(\"+backgroundUrl+\")\"}}>\r\n        <div className=\"home-overlay\">\r\n            <div className=\"home-widget anniverse\">\r\n            {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {specialWidget?\r\n            <div className=\"home-event-div\" onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"special\")}>\r\n              <IconButton id=\"home-delete-specialWidget\" onClick={()=>handleDeleteWidget(\"special\")}><ClearIcon/></IconButton>\r\n              <div className=\"home-event-title\">\r\n                <h3>Up Coming Event:</h3><br/>\r\n                <h1>{upComingEvent}</h1>\r\n              </div>\r\n              <div className=\"home-event-day\">\r\n              <h1>{upComingDay} days left</h1>\r\n              </div>\r\n            </div>\r\n            :\r\n            <div className=\"home-noWidget\">\r\n              <IconButton id=\"home-add-widget\" onClick={()=>handleCreateWidget(\"special\")} onMouseOver={()=>onHoverAddWidget(\"special\")} onMouseOut={()=>offHoverAddWidget(\"special\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-special\">Add this widget to get to know up coming special events</div>\r\n            </div>}\r\n            </div>\r\n            <div className=\"home-widget days\">\r\n            {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {dayWidget?\r\n            <div className=\"home-totalDay-widget\"  onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"day\")}><IconButton id=\"home-delete-dayWidget\" onClick={()=>handleDeleteWidget(\"day\")}><ClearIcon/></IconButton><h1>{totalDay} DAYS</h1></div>\r\n            :\r\n            <div className=\"home-noWidget\"  id=\"noDayWidget\">\r\n              <IconButton id=\"home-add-widget\"  onClick={()=>handleCreateWidget(\"day\")} onMouseOver={()=>onHoverAddWidget(\"day\")} onMouseOut={()=>offHoverAddWidget(\"day\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-day\">Add this widget to get to know total days together</div>\r\n            </div>}\r\n            {isSetting&&<div className=\"home-setDate\">\r\n              <div className=\"home-setDate-title\"><h2>Please set the date of you with your partner</h2></div>\r\n            <form onSubmit={handleUpdateDate} ref={dateRef}>\r\n            <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfRelation\"\r\n              label=\"Date of Relationship\"\r\n              name=\"dateOfRelation\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={date}\r\n              onChange={(date) => {setDate(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>\r\n          <Button type=\"submit\" id=\"home-submit-day\">SUBMIT</Button>\r\n          </form>\r\n            </div>}\r\n            </div>\r\n            <div className=\"home-widget special\">\r\n              {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {bdayWidget?\r\n            <div className=\"home-dob-div\" onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"bday\")}>\r\n              <IconButton id=\"home-delete-bdayWidget\" onClick={()=>handleDeleteWidget(\"bday\")}><ClearIcon/></IconButton>\r\n              <div className=\"home-bday-div you\">\r\n              <div className=\"home-bday-name\"><h1>{userInfo.nickname}</h1></div>\r\n                <div className=\"home-bday-border\">\r\n                  <div className=\"home-bday-calander\">\r\n                    <h2 style={{borderBottom:\"1px solid white\"}}>{userBday}</h2><br/><br/><br/>\r\n                    <h1>{yourCountDown} days left</h1>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"home-bday-div partner\">\r\n              <div className=\"home-bday-name\"><h1>{partnerInfo.nickname}</h1></div>\r\n                <div className=\"home-bday-border\">\r\n                  <div className=\"home-bday-calander\">\r\n                    <h2 style={{borderBottom:\"1px solid white\"}}>{partnerBday}</h2><br/><br/><br/>\r\n                    <h1>{partnerCountDown} days left</h1>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n            :\r\n            <div className=\"home-noWidget\">\r\n              <IconButton id=\"home-add-widget\" onClick={()=>handleCreateWidget(\"bday\")} onMouseOver={()=>onHoverAddWidget(\"bday\")} onMouseOut={()=>offHoverAddWidget(\"bday\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-bday\">Add this widget to get to know each other birthdays</div>\r\n            </div>}\r\n            </div>\r\n\r\n        </div>\r\n            <div className=\"foreground\" id=\"foreground\"></div>\r\n      </div>\r\n\r\n    </div>\r\n    \r\n}","import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport '../css/profileInfo.css';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nconst genders = [\r\n    {\r\n      value: 'male',\r\n      label: 'male',\r\n    },\r\n    {\r\n      value: 'female',\r\n      label: 'female',\r\n    },\r\n  ];\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n      marginTop:20,\r\n      minWidth: \"90%\",\r\n    },\r\n  }));\r\nexport default function UserProfileForm()\r\n{\r\n    const [nickname,setNickname] = useState(\"\");\r\n    const [bio,setBio] = useState(\"\");\r\n    const [croppedUrl, setCroppedUrl] = useState();\r\n    const [uploaded,setUploaded] = useState(false);\r\n    const [dob,setDob] = useState(new Date());\r\n    const [gender,setGender] = useState('male');\r\n    const [newProfile,setNewProfile]=useState(false);\r\n    const [partner,setPartner] = useState();\r\n    const [dateOfRelationship,setDateOfRelationship] = useState();\r\n    const formRef = useRef();\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn === false) {\r\n            window.open('/login', '_self');\r\n          } \r\n          else if(res.user.nickname)\r\n          {\r\n            setNickname(res.user.nickname);\r\n            setDob(res.user.dateOfBirth);\r\n            setGender(res.user.gender);\r\n            setBio(res.user.bio);\r\n            if(res.user.partner!==null)\r\n            {\r\n            setPartner(res.user.partner);\r\n            if(res.user.dateOfRelationship)\r\n            {\r\n                setDateOfRelationship(res.user.dateOfRelationship);\r\n            }\r\n            }\r\n          }\r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[]);\r\n      useEffect(() => {\r\n        const ac = new AbortController();\r\n      axios({\r\n        method:'get',\r\n        url:'/gridFs/checkExists',\r\n        headers: {'Content-Type': 'multipart/form-data'}\r\n      })\r\n      .then(res=>res.data)\r\n      .catch(err=>console.log(err))\r\n      .then(res=>{\r\n        if(res===true)\r\n        {\r\n           document.getElementById(\"overlay\").style.visibility=\"hidden\";\r\n        }\r\n      })\r\n      return function cancel() {\r\n        ac.abort()\r\n      }\r\n    },[]);\r\n      if(uploaded)\r\n      {\r\n        const reader = new FileReader();\r\n        reader.onload = function(event){\r\n          if(event.target.result===null)\r\n          {\r\n            return;\r\n          }\r\n          document.getElementById(\"avatarImg\").setAttribute(\"src\",event.target.result);\r\n        }\r\n        reader.readAsDataURL(croppedUrl);\r\n       \r\n      }\r\n      async function handleSubmit(event) {\r\n        if(uploaded){axios.get('/gridFs/deleteImg');}\r\n        event.preventDefault();\r\n        \r\n        const formData = new FormData(formRef.current); \r\n        partner&&formData.append('partner',partner);\r\n         await  axios({\r\n            method:'post',\r\n            url:'/user/info',\r\n            data:formData,\r\n            headers: {'Content-Type': 'multipart/form-data'}\r\n          })\r\n          window.location.href = \"/\";\r\n      }\r\n\r\n      function toggleNewFile(event)\r\n      {\r\n        const file = event.target.files[0];\r\n         if(file===undefined)\r\n        {\r\n          return;\r\n        }\r\n        else\r\n        {\r\n         document.getElementById(\"overlay\").style.visibility=\"hidden\";\r\n         setCroppedUrl(file);\r\n         setUploaded(true);\r\n        }\r\n      }\r\n      \r\n      function uploadFile()\r\n      {\r\n         document.getElementById(\"file\").click();\r\n      }\r\n\r\n    return <div className=\"infoForm\" id=\"infoForm\">\r\n        \r\n    <form onSubmit={handleSubmit} ref={formRef}>\r\n      <div id=\"avatar\">\r\n       <ReactAvatar\r\n        id=\"overlay\"\r\n      />\r\n       <img src={uploaded?\"\":\"/gridFs/getProfile\"} id=\"avatarImg\"/>\r\n      </div>\r\n      <div className=\"fileIpt\">\r\n          <input type=\"file\" name=\"file\" id=\"file\" onChange={toggleNewFile}/>\r\n          <IconButton\r\n          id=\"uploadBtn\"\r\n          onClick={uploadFile}\r\n          >\r\n            <AddAPhotoIcon/>\r\n          </IconButton>\r\n      </div>\r\n          <br/>\r\n          <div className=\"infoDiv\">\r\n            <TextField\r\n            id=\"nickname\"\r\n            className=\"inputFields\"\r\n            label=\"Nickname\"\r\n            variant=\"outlined\"\r\n            name=\"nickname\"\r\n            value={nickname}\r\n            onChange={(e) => {setNickname(e.target.value)}}/>\r\n            <br/>\r\n            <FormControl variant=\"outlined\" className={classes.formControl}>\r\n            <InputLabel id=\"demo-simple-select-outlined-label\">Gender</InputLabel>\r\n            <Select\r\n              labelId=\"demo-simple-select-outlined-label\"\r\n              id=\"demo-simple-select-outlined\"\r\n              value={gender}\r\n              onChange={(e) => {setGender(e.target.value)}}\r\n              label=\"Gender\"\r\n              name=\"gender\"\r\n            >\r\n              {genders.map((option) => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl> \r\n          <br />\r\n          <MuiPickersUtilsProvider utils={DateFnsUtils} style={{marginLeft:\"10px\"}}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfBirth\"\r\n              label=\"Date of birth (mm/dd/yyyy)\"\r\n              name=\"dateOfBirth\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={dob}\r\n              onChange={(date) => {setDob(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>\r\n          {dateOfRelationship&&<MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfRelation\"\r\n              label=\"Date of relationship\"\r\n              name=\"dateOfRelationship\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={dateOfRelationship}\r\n              onChange={(date) => {setDateOfRelationship(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>}\r\n          \r\n          <br/>    \r\n        \r\n     \r\n          <TextField\r\n            id=\"bio\"\r\n            label=\"Bio\"\r\n            variant=\"outlined\"\r\n            name=\"bio\"\r\n            className=\"inputFields\"\r\n            value={bio}\r\n            onChange={(e) => {setBio(e.target.value)}}/>\r\n            <br/>\r\n            \r\n          <Button type=\"submit\" id=\"submitInfo\">\r\n              submit\r\n          </Button>\r\n          </div>\r\n        </form>\r\n    </div>\r\n}","import '../css/inputBox.css';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport InsertEmoticonIcon from '@material-ui/icons/InsertEmoticon';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function InputBox(props)\r\n{\r\n    const {handleSendMsg} = props\r\n\r\n\r\n    return<div className=\"foot\">\r\n        <form onSubmit={handleSendMsg} className=\"input-form\">\r\n        <input type=\"text\" className=\"msg\" placeholder=\"Type a message...\" id=\"chat\"/>\r\n        <IconButton type=\"submit\" id=\"sendIcon\"><SendIcon/></IconButton>\r\n        </form>\r\n    \r\n    </div>\r\n}","import '../css/chatNav.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport { useEffect, useState,useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function ChatNav(props)\r\n{\r\n    const {toggleBackHome,partnerInfo,partnerStatus,toggleVideoCall,callAccepted,setBackgroundUrl} = props\r\n\tconst [readyDisplay,setReadyDisplay] = useState(false);\r\n\tconst [isOnline,setIsOnline] = useState(false);\r\n\tconst [openMore,setOpenMore] = useState(false);\r\n\r\n\r\n\tconst imgRef = useRef();\r\n\r\n\tuseEffect(()=>{\r\n\t\tconst ac = new AbortController();\r\n\t\tif(partnerInfo)\r\n\t\t{\r\n\t\t\tsetReadyDisplay(true);\r\n\t\t}\r\n\t\treturn function cancel() {\r\n            ac.abort();\r\n          }\r\n\t},[partnerInfo])\r\n\r\n\t\tif(partnerStatus&&partnerInfo)\r\n\t\t{\r\n\t\t\tpartnerStatus.map(user=>{\r\n\t\t\t\tif(user===partnerInfo._id)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tsetIsOnline(true);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\r\n\r\n\tasync function toggleChangeBackground(event)\r\n\t{\r\n\t\tawait axios.get('/chat/deleteBackground')\r\n\t\tconst formdata = new FormData();\r\n\t\tformdata.append('file',event.target.files[0])\r\n\t\tawait axios({\r\n\t\t\tmethod:'post',\r\n\t\t\turl:'/chat/uploadChatImg',\r\n\t\t\tdata:formdata,\r\n\t\t\theaders:{'Content-Type': 'multipart/form-data'}\r\n\t\t})\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n    return<div className=\"chatNav-div\">\r\n\t\t{isOnline&&<h1>ONLINE</h1>}\r\n\t\t{openMore&&<div className=\"chatNav-moreOption\">\r\n\t\t\t<div className=\"chatNav-changeBackground\" onClick={()=>document.getElementById('chatNav-file').click()}> \r\n\t\t\t\t<PhotoIcon/>\r\n\t\t\t\t<input type=\"file\" name=\"file\" hidden id=\"chatNav-file\" onChange={toggleChangeBackground}/>\t\r\n\t\t\t</div>\r\n\t\t</div>}\r\n        <div className=\"head\">\r\n\t\t\t\t<div className=\"user\">\r\n\t\t\t\t\t<div className=\"avatar\" id=\"avatarStatus\">\r\n\t\t\t\t\t\t<img src=\"/gridFs/getPartnerProfile\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t\t{readyDisplay&&<div className=\"name\">{partnerInfo.nickname}</div>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul id=\"bar_tool\">\r\n\t\t\t\t\t<IconButton id=\"iconBtn\" onClick={toggleVideoCall}><span className=\"alink\"><VideocamIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t\t<IconButton id=\"iconBtn\" onClick={()=>setOpenMore(!openMore)}><span className=\"alink\"><MoreHorizIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n    </div>\r\n}","import {useEffect, useState} from 'react';\r\nimport '../css/chatBubble.css';\r\n\r\n\r\nexport default function ChatBubble(props)\r\n{\r\n    const{textInfo,user}= props;\r\n    if(textInfo&&textInfo.userId===user._id)\r\n    {       \r\n        return<div className=\"bubble-div righter\">\r\n           <div className = \"context\">\r\n            <p>{textInfo&&textInfo.text}</p>\r\n           </div>\r\n        </div>\r\n    }\r\n    else{\r\n        return<div className=\"bubble-div lefter\">\r\n            <div className=\"img-div\">\r\n            <img src=\"/gridFs/getPartnerProfile\"/>\r\n            </div>\r\n            <div className = \"context\">\r\n            <p>{textInfo&&textInfo.text}</p>\r\n           </div>\r\n        </div>\r\n    }\r\n}","import React, { createContext, useState, useRef, useEffect } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport Peer from 'simple-peer';\r\n\r\nconst SocketContext = createContext();\r\n\r\nconst ENDPOINT='localhost:5000';\r\nlet socket;\r\nlet isCaller = false;\r\nlet isAnswered = false;\r\nlet name ;\r\nconst ContextProvider = ({ children }) => {\r\n  const [callAccepted, setCallAccepted] = useState(false);\r\n  const [callEnded, setCallEnded] = useState(false);\r\n  const [stream, setStream] = useState();\r\n  // const [name, setName] = useState('');\r\n  const [call, setCall] = useState({});\r\n  const [userId,setUserId] = useState('');\r\n  const [roomId,setRoomId] = useState('');\r\n  const [newMessage,setNewMessage] = useState([]);\r\n  const [partnerId,setPartnerId] = useState();\r\n  const [isCalling,setIsCalling] = useState(false);\r\n  const [noCall,setNoCall] = useState(false);\r\n  const [isOnline,setIsOnline] = useState(true);\r\n  const [users,setUsers] = useState();\r\n\r\n  const myVideo = useRef();\r\n  const userVideo = useRef();\r\n  const connectionRef = useRef();\r\n\r\n\r\n   \r\n\r\n  useEffect(() => {\r\n\r\n    socket = io(ENDPOINT);\r\n     \r\n    socket.on('chatMsg',(chat)=>{\r\n        setNewMessage(chat);\r\n    })\r\n\r\n    socket.on('startCalling',e=>{\r\n      callUser();\r\n    })\r\n    socket.on('start',e=>{\r\n      setIsCalling(true);\r\n    })\r\n\r\n    socket.on('no',e=>{\r\n      setNoCall(true);\r\n      alert('your partner is not online!')\r\n    })\r\n  }, []);\r\n\r\n  useEffect(()=>{\r\n    \r\n    \r\n\r\n    if(!isCalling)\r\n    {\r\n      return null;\r\n    }\r\n     \r\n\r\n   socket.on('returnDiv',e=>{\r\n      document.getElementById('chat-body').style.marginRight = \"auto\";\r\n      document.getElementById('chat-body').style.marginLeft = \"auto\";\r\n      document.getElementById(\"video-div\").style.visibility = \"hidden\";\r\n      \r\n   })\r\n\r\n   socket.on('calluser',async ({ from, name: callerName, signal })=> {\r\n    setCall({ isReceivingCall: true, from, name: callerName, signal });\r\n    \r\n  });\r\n\r\n   socket.on('moveDiv',e=>{\r\n    document.getElementById('chat-body').style.marginRight = \"auto\";\r\n    document.getElementById('chat-body').style.marginLeft = \"10px\";\r\n    document.getElementById(\"video-div\").style.visibility = \"visible\";\r\n      \r\n      \r\n   })\r\n\r\n    socket.on('dc',e=>{\r\n      leaveCall();\r\n    })\r\n\r\n  },[isCalling])\r\n\r\n  // useEffect(()=>{\r\n  //   if(callAccepted)\r\n  //   {\r\n  //     navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n  //     .then((currentStream) => {\r\n  //     setStream(currentStream);\r\n  //     myVideo.current.srcObject = currentStream;\r\n  //     });\r\n  //   }\r\n  // },[callAccepted])\r\n\r\n  const startCall  =()=>{\r\n    socket.emit('calling');\r\n  }\r\n  \r\n  const joinRoom = (roomId,userId,nickname) =>{\r\n      socket.emit('join',{userId,roomId});\r\n      setUserId(userId);\r\n      setRoomId(roomId);\r\n      // setName(nickname); \r\n      name=nickname;\r\n  }\r\n  let audio =true;\r\n  const muteAudio = ()=>{\r\n    audio  = !audio;\r\n    stream.getAudioTracks()[0].enabled = audio;\r\n  }\r\n\r\n  let video =true;\r\n  const muteVideo = ()=>{\r\n    video  = !video;\r\n    stream.getVideoTracks()[0].enabled = video;\r\n  }\r\n\r\n  const sendMsg = (msg,nickname) =>{\r\n      socket.emit('sendMsg',{msg,userId,nickname,roomId})\r\n  }\r\n\r\n  const declineCall = ()=>{\r\n    setCallEnded(true);\r\n    if(isCaller)\r\n    {\r\n      document.getElementById('chat-body').style.marginRight = \"auto\";\r\n      document.getElementById('chat-body').style.marginLeft = \"auto\";\r\n      document.getElementById(\"video-div\").style.visibility = \"hidden\";\r\n    }\r\n    setIsCalling(false);\r\n    window.location.reload();\r\n  }\r\n\r\n  const answerCall = async() => {\r\n    let local;\r\n    await navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n    .then((currentStream) => {\r\n    setStream(currentStream);\r\n    local = currentStream;\r\n    myVideo.current.srcObject = currentStream;\r\n    }); \r\n    isAnswered = true;\r\n    setCallAccepted(true);\r\n    const peer = new Peer({ initiator: false, trickle: false, stream:local });\r\n    peer.on('signal', (data) => {\r\n      socket.emit('answercall', { signal: data, to: call.from });\r\n    });\r\n\r\n    peer.on('stream', (currentStream) => {\r\n      console.log(\"this is the remote stream: \" + currentStream);\r\n      userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    peer.signal(call.signal);\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n\r\n  const callUser = async() => {\r\n    if(noCall)\r\n    {\r\n      return null;\r\n    }\r\n    let local;\r\n    await navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n    .then((currentStream) => {\r\n    setStream(currentStream);\r\n    local = currentStream;\r\n    myVideo.current.srcObject = currentStream;\r\n    }); \r\n    isCaller = true;\r\n    const peer = new Peer({ initiator: true, trickle: false, stream:local });\r\n    peer.on('signal', (data) => {\r\n      socket.emit('calluser', {  signalData: data,  name });\r\n    });\r\n    peer.on('stream', (currentStream) => {\r\n      userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    socket.on('callaccepted', (signal) => {\r\n      console.log('call accepted: ' + signal);\r\n      setCallAccepted(true);\r\n      peer.signal(signal);\r\n    });\r\n\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n  const leaveCall = () => {\r\n    setCallEnded(true);\r\n    if(isCaller)\r\n    {\r\n      document.getElementById('chat-body').style.marginRight = \"auto\";\r\n      document.getElementById('chat-body').style.marginLeft = \"auto\";\r\n      document.getElementById(\"video-div\").style.visibility = \"hidden\";\r\n    }\r\n    connectionRef.current.destroy();\r\n\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <SocketContext.Provider value={{\r\n      call,\r\n      callAccepted,\r\n      myVideo,\r\n      newMessage,\r\n      sendMsg,\r\n      joinRoom,\r\n      userVideo,\r\n      stream,\r\n      name,\r\n      callEnded,\r\n      callUser,\r\n      leaveCall,\r\n      answerCall,\r\n      users,\r\n      isOnline,\r\n      startCall,\r\n      muteAudio,\r\n      muteVideo,\r\n      declineCall,\r\n      isCaller,\r\n      isAnswered,\r\n    }}\r\n    >\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport { ContextProvider, SocketContext };","import DoneIcon from '@material-ui/icons/Done';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { useContext, useEffect } from 'react';\r\nimport {SocketContext} from '../SocketContext';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { Icon } from '@material-ui/core';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nexport default function VideoRespond(props)\r\n{\r\n\r\n    const{answerCall,leaveCall,call,initializeVideo,callUser,declineCall,isCaller,isAnswered} = useContext(SocketContext);\r\n\r\n\r\n   \r\n\r\n\r\n   async function answer()\r\n    {\r\n        document.getElementById('chat-body').style.marginRight = \"auto\";\r\n        document.getElementById('chat-body').style.marginLeft = \"10px\";\r\n        document.getElementById(\"video-div\").style.visibility = \"visible\";\r\n        answerCall();\r\n        \r\n    }\r\n    return <div className=\"respond\">\r\n        <Avatar src=\"/gridFs/getPartnerProfile\" id=\"caller\"/>\r\n        <div className=\"description\">\r\n            <h3>{call.name} wants to call you</h3>\r\n        </div>\r\n        <div className=\"choice\">\r\n        <IconButton id=\"choice-btn\" onClick={answer}><DoneIcon/></IconButton>\r\n        <IconButton id=\"choice-canc\" onClick={declineCall}><ClearIcon/></IconButton>\r\n        </div>\r\n    </div>\r\n}","import { useContext, useEffect,useRef, useState } from \"react\"\r\nimport { SocketContext } from \"../SocketContext\";\r\nimport '../css/videoCall.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport CallEndIcon from '@material-ui/icons/CallEnd';\r\nimport MicOffIcon from '@material-ui/icons/MicOff';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\n\r\nexport default function VideoCall()\r\n{\r\n    const {name,callAccepted,myVideo,userVideo,callEnded,stream,callUser,leaveCall,initializeVideo,muteAudio,muteVideo,declineCall,isAnswered} = useContext(SocketContext);\r\n        const [isMuted,setIsMuted] = useState(false);\r\n        const [isDisplayed,setIsDisplayed] = useState(true);\r\n   \r\n \r\n   \r\n   function handleMute()\r\n   {\r\n           setIsMuted(!isMuted);\r\n           muteAudio();\r\n   }\r\n   function handleDisplay()\r\n   {\r\n           setIsDisplayed(!isDisplayed);\r\n           muteVideo();\r\n   }\r\n       console.log(isAnswered);\r\n        return <div className=\"video-div\" id=\"video-div\">\r\n\r\n                \r\n                <div className=\"vid-call\">\r\n                 <video playsInline muted ref={myVideo} autoPlay />        \r\n                </div>\r\n                {callAccepted&&!callEnded&&\r\n                <div className=\"vid-call1\">\r\n                <video playsInline muted ref={userVideo} autoPlay />\r\n                </div>}\r\n                <div className=\"option-div\">\r\n                <IconButton onClick={handleDisplay} className=\"option-btn\" id=\"display\">{isDisplayed?<VideocamIcon/>:<VideocamOffIcon/>}</IconButton>\r\n                <IconButton onClick={isAnswered?leaveCall:declineCall} className=\"option-btn\" id=\"end\"><CallEndIcon fontSize=\"inherit\"/></IconButton>\r\n                <IconButton onClick={handleMute} className=\"option-btn\">{isMuted?<MicOffIcon/>:<MicIcon/>}</IconButton>\r\n                </div>\r\n        </div>\r\n}","import {useEffect, useState,useRef, useContext} from 'react';\r\nimport io from 'socket.io-client';\r\nimport axios from 'axios';\r\nimport InputBox from './InputBox';\r\nimport '../css/chatroom.css';\r\nimport ChatNav from './ChatNav';\r\nimport ChatBubble from './ChatBubble';\r\nimport { Scrollbars } from 'react-custom-scrollbars-2';\r\nimport { SocketContext } from \"../SocketContext\";\r\nimport VideoRespond from './VideoRespond';\r\nimport VideoCall from './VideoCall';\r\nimport NavBar from './Navbar';\r\n\r\n\r\nexport default function ChatRoom(props)\r\n{\r\n    const ENDPOINT = 'localhost:5000';\r\n    const [userInfo,setUserInfo] = useState();\r\n    const [userId,setUserId] = useState();\r\n    const [roomId,setRoomId] = useState();\r\n    const [text,setText] = useState(\"\");\r\n    const [userNickname,setUserNickname] = useState();\r\n    const [messages,setMessages] = useState([]);\r\n    const [partnerInfo,setPartnerInfo] = useState([]);\r\n    const [isUser,setIsUser] = useState(false);\r\n    const [partnerStatus,setPartnerStatus] = useState();\r\n    const [havePartner,setHavePartner] = useState(false);\r\n    const [scrollDir,setScrollDir] = useState(-1);\r\n    const [backgroundUrl,setBackgroundUrl] = useState('');\r\n\r\n    // const [isCalling,setIsCalling] = useState();\r\n    const {joinRoom,sendMsg,newMessage,callUser,call,me,callAccepted,onBoth,startCall} = useContext(SocketContext);\r\n\r\n    useEffect(()=>{\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n            if(res.isLoggedIn)\r\n            {\r\n              axios.get('/chat/checkExist')\r\n              .then(res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                if(res.data)\r\n                {\r\n                  document.getElementById('msgBox').style.backgroundImage ='url(\"/chat/getChatBackground\")';\r\n                  document.getElementById('msgBox').style.backgroundSize ='cover';\r\n                }\r\n                else\r\n                {\r\n                  document.getElementById('msgBox').style.backgroundImage = 'url(\"https://wallpapercave.com/wp/wp4779329.png\")';\r\n                }\r\n              })\r\n              \r\n              let userId = res.user._id;\r\n              let partner = res.user.partner;\r\n              let nickname = res.user.nickname;\r\n              setPartnerInfo(res.partnerInfo)\r\n                if(res.user.partner!==null)\r\n                { \r\n                  setHavePartner(true);\r\n                  axios({ \r\n                    method:'get',\r\n                    url:'/user/getRoomId',\r\n                    headers: {'Content-Type': 'multipart/form-data'}\r\n                  })\r\n                  .then(res=>res.data)\r\n                  .catch(err=>console.log(err))\r\n                  .then(res=>{\r\n                    setMessages(res.chatInfo.chats.reverse().map(chat=>{\r\n                      return chat;\r\n                    }))\r\n                    let roomId = res.roomInfo._id;\r\n                    setRoomId(roomId);\r\n                    if(nickname)\r\n                    {\r\n                       joinRoom(roomId,userId,nickname);  \r\n                    }\r\n                  })\r\n                }\r\n                setUserId(res.user._id);\r\n                setUserInfo({...res.user});\r\n                setUserNickname(res.user.nickname);\r\n            }\r\n        });\r\n        return function cancel() {\r\n            ac.abort();\r\n          }\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n      setMessages(prevData=>{\r\n        return[...prevData,newMessage]\r\n      })\r\n    },[newMessage]);\r\n    useEffect(()=>{\r\n      if(scrollDir===-1)\r\n      {\r\n        document.getElementById('msgBox').scrollTo(0,document.getElementById('msgBox').scrollHeight);      \r\n      }\r\n    },[messages])\r\n    \r\n    function handleSendMsg(event)\r\n    {\r\n      let msg = document.getElementById(\"chat\").value;\r\n      event.preventDefault();\r\n      if(msg.length>0&&roomId)\r\n      {\r\n        sendMsg(msg,userId,userNickname,roomId);\r\n        setText(\"\");\r\n      }\r\n      else{\r\n        console.log(\"You cant send anything\")\r\n      }\r\n      document.getElementById(\"chat\").value = null;\r\n    }\r\n\r\n    function toggleBackHome()\r\n    {\r\n      window.open('/','_self');\r\n    }\r\n\r\n    async function toggleVideoCall()\r\n    {\r\n      await startCall();\r\n      // await callUser();\r\n    };\r\n\r\n\r\n    return<div className=\"chat-div\">\r\n      <NavBar havePartner={havePartner}/>\r\n        {call.isReceivingCall &&!callAccepted&&<VideoRespond/>}\r\n     <VideoCall/>\r\n     <div className=\"chat-container\">\r\n     <div className=\"chat-body\" id=\"chat-body\">\r\n     <ChatNav  toggleBackHome={toggleBackHome} partnerInfo={partnerInfo} partnerStatus={partnerStatus} toggleVideoCall={toggleVideoCall}/>\r\n    <div className=\"chat-messageBox-div\" id=\"msgBox\">\r\n        <div className=\"chat-messageBox\">\r\n      {messages&&userInfo&&messages.map((chat,index)=>{\r\n              return <ChatBubble key={index}textInfo={chat} user={userInfo}/>\r\n      })} \r\n       </div>\r\n    </div>\r\n    <InputBox handleSendMsg={handleSendMsg}/>\r\n     </div>\r\n     </div>\r\n  </div>\r\n}","import { useEffect, useState } from \"react\";\r\nimport axios from 'axios';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function VideoList(props)\r\n{\r\n    const {handleChooseMovie,socket} = props;\r\n    const [files,setFiles] = useState([]);\r\n    const [dropdown,setDropdown] = useState(false);\r\n    useEffect(()=>{\r\n        axios.get('/videoFs/getAllVideos')\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            let temp = [];\r\n            for(let i=0;i<res.length;i++)\r\n            {\r\n                temp.push(res[i]);\r\n            }\r\n            setFiles(temp);\r\n        })\r\n\r\n    },[])   \r\n    function handleDropDown()\r\n    {\r\n        let state = !dropdown;\r\n        if(state)\r\n        {\r\n            document.getElementById('video-file').style.top=0;\r\n        }\r\n        else\r\n        {\r\n            document.getElementById('video-file').style.top  = \"-68px\";\r\n        }\r\n        setDropdown(!dropdown);\r\n    }\r\n    async function handleDeleteVideo(videoId)\r\n    {\r\n        const formdata = new FormData();\r\n        formdata.append('videoId',videoId);\r\n        await axios({\r\n            method:'post',\r\n            url:'/videoFs/deleteVideo',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            console.log(res);\r\n            if(res)\r\n            {\r\n              setFiles(prev=>{\r\n                  return prev.filter(file=>{\r\n                      return file._id!==videoId\r\n                  })\r\n              })\r\n              if(socket)socket.emit('deletedVideo');\r\n           }\r\n        })\r\n    }\r\n\r\n    return<div className=\"video-file\" id=\"video-file\">\r\n        <div className=\"video-scroll\">\r\n        {files.map(file=>{\r\n            return<div className=\"video-list-div\">\r\n                \r\n                <Button key={file._id} variant=\"outlined\" onClick={()=>handleChooseMovie(file.filename)} id=\"list\">{file.aliases}</Button> \r\n                <button id=\"video-delete\" onClick={()=>handleDeleteVideo(file._id)}>x</button>\r\n            </div>  \r\n        })} \r\n        </div>\r\n        <IconButton\r\n        size=\"small\"\r\n        id=\"drop-down\"\r\n        onClick={handleDropDown}\r\n        >\r\n        {dropdown?<ArrowDropUpIcon/>:<ArrowDropDownIcon/>}\r\n        </IconButton>\r\n    </div>\r\n\r\n}","import ArrowLeftIcon from '@material-ui/icons/ArrowLeft';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport { useState,useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function VideoUploadDiv(props)\r\n{\r\n    const [openUpload,setOpenUpload] = useState(false);\r\n    const [uploadProgress,setUploadProgress] = useState(false);\r\n\r\n    const formRef = useRef();\r\n\r\n    function handleUploadDiv()\r\n    {\r\n      let state = !openUpload;\r\n      if(state)\r\n      {\r\n          document.getElementById('upload-file').style.marginLeft=0;\r\n      }\r\n      else\r\n      {\r\n          document.getElementById('upload-file').style.marginLeft=\"-380px\";\r\n      }\r\n      setOpenUpload(!openUpload);\r\n    }\r\n\r\n    function displayFileName(event)\r\n  {\r\n     document.getElementById('file-name').textContent= event.target.files[0].name;\r\n  }\r\n\r\n  async function handleUploadVideo(event)\r\n  {\r\n      event.preventDefault();\r\n      if(document.getElementById('video').value===\"\")\r\n      {\r\n          return;\r\n      }\r\n      setUploadProgress(true);\r\n      const formdata = new FormData(formRef.current);\r\n      await axios({\r\n          method:'post',\r\n          url:'/videoFs/upload',\r\n          data:formdata,\r\n          headers: {'Content-Type': 'multipart/form-data'},\r\n          onUploadProgress:progressEvent=>{\r\n            const progress=(progressEvent.loaded/progressEvent.total)*100\r\n            document.getElementById(\"uploadFileProgress\").style.width = progress+\"%\";\r\n            if(progress===100)\r\n            {\r\n                window.location.reload();\r\n            }\r\n          },\r\n      })\r\n  }\r\n\r\n    return <div className=\"upload-file\" id=\"upload-file\">\r\n        <form onSubmit={handleUploadVideo} ref={formRef}>\r\n        <IconButton\r\n        size=\"medium\"\r\n        onClick={()=>document.getElementById('video').click()}\r\n        style={{color:\"white\"}}\r\n        >\r\n        <CloudUploadIcon/>\r\n        </IconButton>\r\n        <input type=\"file\" name=\"video\" id=\"video\" hidden onChange={displayFileName}/>\r\n        <Button\r\n        variant=\"contained\"\r\n        color=\"default\"\r\n        type=\"submit\"   \r\n      >\r\n        Upload\r\n      </Button> \r\n        </form>\r\n        <p id=\"file-name\" style={{color:\"rgb(56, 245, 71)\"}}></p>\r\n        {uploadProgress&&\r\n        <div className=\"uploadProgress\">   \r\n            <div className=\"progressBar\" id=\"uploadFileProgress\"> \r\n            </div>\r\n        </div>}\r\n        <IconButton\r\n        size=\"small\"\r\n        id=\"openUploadDiv\"\r\n        onClick={handleUploadDiv}\r\n        >{openUpload?\r\n            <ArrowLeftIcon/>\r\n            :\r\n            <ArrowRightIcon/>\r\n         }\r\n        </IconButton>\r\n    </div>\r\n}","import ReactPlayer from 'react-player'\r\nimport '../css/videoPlayer.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowLeftIcon from '@material-ui/icons/ArrowLeft';\r\nimport VideoList from './VideoList';\r\nimport VideoUploadDiv from './VideoUploadDiv';\r\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\r\nimport VolumeMuteIcon from '@material-ui/icons/VolumeMute';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff'; \r\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\n\r\nimport { FullScreen, useFullScreenHandle } from \"react-full-screen\";\r\nimport io from 'socket.io-client';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nlet socket;\r\nexport default function Cinema()\r\n{\r\n  const ENDPOINT = 'localhost:5000';\r\n  const handle = useFullScreenHandle();\r\n  const [ready,setReady] = useState(false);\r\n  const [play,setPlay] =useState(false);\r\n  const [openUrl,setOpenUrl] = useState(false);\r\n  const [url,setUrl] = useState();\r\n  const [buffering,setBuffering] = useState(true);\r\n  const [volume,setVolume] = useState(0.5);\r\n  const [isMuted,setIsMuted] = useState(false);\r\n  const [isLoud,setIsLoud] = useState(false);\r\n  const [isFullScreen,setIsFullScreen] = useState(false);\r\n\r\n  const videoRef = useRef();\r\n  const urlRef = useRef(\"\");\r\n  const readyToPlay = useRef(false);\r\n  const initialRun = useRef(true);\r\n\r\n\r\n  useEffect(async()=>{\r\n      const ac = new AbortController();\r\n        socket = io(ENDPOINT);\r\n        if(initialRun.current)\r\n        {\r\n            await axios.get('/user/getRoomId')\r\n            .then(res=>res.data)\r\n            .catch(err=>console.log(err))\r\n            .then(res=>{\r\n                socket.emit('join',res.roomInfo._id);\r\n            });\r\n            \r\n            initialRun.current = false;\r\n        }\r\n        socket.on('changeState',state=>{\r\n            setPlay(state);\r\n        });\r\n        socket.on('refreshPage',e=>{\r\n            window.location.reload();\r\n        })\r\n        socket.on('update',time=>{\r\n            if(urlRef.current===\"\")\r\n            {\r\n                urlRef.current = time.url;\r\n                setReady(true);\r\n                readyToPlay.current = true;\r\n                setBuffering(false);\r\n                return;\r\n            }\r\n            if(readyToPlay.current)\r\n            {\r\n                if(time.time>videoRef.current.getCurrentTime())\r\n                {\r\n                    if(videoRef.current.getCurrentTime()<(time.time)-1){\r\n                        videoRef.current.seekTo(String(time.time),'seconds');\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        socket.on('updateProgress',pointed=>{\r\n            videoRef.current.seekTo(pointed,'seconds');\r\n        })\r\n\r\n        socket.on('onlineUrl',data=>{\r\n            if(data===\"\")\r\n            {\r\n                document.getElementById('url').value = \"\";\r\n                return;\r\n            }\r\n            setReady(true);\r\n            urlRef.current=data;\r\n            setUrl(data);\r\n            document.getElementById('url').value = \"\";\r\n        })\r\n\r\n      return function cancel(){\r\n          ac.abort();\r\n      }\r\n  },[])\r\n\r\n  function displayProgress()\r\n  {\r\n      socket.emit('keepUpdate',{time:videoRef.current.getCurrentTime(),url:url});\r\n      const point = document.getElementById('progress-point');\r\n      const value = videoRef.current.getCurrentTime()/(videoRef.current.getDuration()/100);\r\n      point.style.left = value+\"%\";\r\n  }\r\n   \r\n  function handleProgressChange(event)\r\n  {\r\n      const progressBarWidth = document.getElementById(\"progress-bar\");\r\n      const choose = event.nativeEvent.offsetX;\r\n      const pointed = (choose/progressBarWidth.offsetWidth)*videoRef.current.getDuration();     \r\n      socket.emit('changeProgress',pointed) \r\n      setPlay(true);\r\n  }\r\n  function handleVideoState()\r\n  {\r\n    socket.emit('changeVideoState',play);\r\n  }\r\n  \r\n  function submitUrl(event){\r\n    event.preventDefault();\r\n    const choosenUrl = document.getElementById('url').value;\r\n    socket.emit('onlineUrl',choosenUrl);\r\n  }\r\n\r\n  async function handleChooseMovie(filename)\r\n  {\r\n    \r\n    setReady(true);\r\n    const choosenUrl = \"/videoFs/choose/\"+filename;\r\n    socket.emit('onlineUrl',choosenUrl);\r\n  }\r\n  function handleUrlDiv()\r\n  {\r\n      let state = !openUrl;\r\n    if(state)\r\n    {\r\n        document.getElementById('submitUrl').style.marginLeft =0;\r\n    }\r\n    else\r\n    {\r\n        document.getElementById('submitUrl').style.marginLeft =\"-380px\";\r\n    };\r\n      setOpenUrl(!openUrl);  \r\n  }\r\n\r\n    function handlePlayerVolume()\r\n    {\r\n        const value=document.getElementById(\"volume\").value;\r\n        const actualVolume = parseFloat(value/100);\r\n        if(actualVolume===0)\r\n        {\r\n            setIsMuted(true);\r\n        }\r\n        else\r\n        {\r\n            setIsMuted(false);\r\n        }\r\n        if(value>50)\r\n        {\r\n            setIsLoud(true);\r\n        }\r\n        else\r\n        {\r\n            setIsLoud(false);\r\n        }\r\n        setVolume(actualVolume);\r\n    }\r\n    function handleMute()\r\n    {\r\n        let state = !isMuted;\r\n        if(state)\r\n        {\r\n            setVolume(0);\r\n            document.getElementById('volume').value =0;\r\n        }\r\n        else\r\n        {\r\n            setVolume(0.5);\r\n            document.getElementById('volume').value =50;\r\n        }\r\n        setIsMuted(!isMuted);\r\n    }\r\n\r\n    function handleBigScreen()\r\n    {\r\n        let state = !isFullScreen;\r\n        const controls = document.getElementById('controls');\r\n        if(state)\r\n        {\r\n            handle.enter();\r\n            controls.style.bottom=\"-150px\";\r\n            document.getElementById('progress-point').style.background=\"white\";\r\n            document.getElementById('control-btn').style.color=\"white\";\r\n            document.getElementById('control-vlm').style.color=\"white\";\r\n            document.getElementById('fullscreen-btn').style.color=\"white\";\r\n        }\r\n        else\r\n        {\r\n            handle.exit();\r\n            controls.style.bottom=\"-50px\";\r\n            document.getElementById('progress-point').style.background=\"black\";\r\n            document.getElementById('control-btn').style.color=\"black\";\r\n            document.getElementById('control-vlm').style.color=\"black\";\r\n            document.getElementById('fullscreen-btn').style.color=\"black\";\r\n        }\r\n        setIsFullScreen(!isFullScreen);\r\n    }\r\n    return <div className=\"cinema-div\">\r\n        <VideoList handleChooseMovie={handleChooseMovie} socket={socket}/>\r\n        \r\n        <VideoUploadDiv/>\r\n        <div className=\"submit-url\" id=\"submitUrl\">\r\n            <form onSubmit={submitUrl}>\r\n            <input type=\"text\" id=\"url\" placeholder=\"enter url\"/>\r\n            <Button\r\n                type=\"submit\"\r\n                variant=\"outlined\"\r\n                id=\"submit-url-btn\"\r\n            > submit</Button>\r\n            </form>\r\n            <IconButton size=\"small\" id=\"handleUrlDiv\" onClick={handleUrlDiv}>\r\n                {openUrl?<ArrowLeftIcon/>:<ArrowRightIcon/>}\r\n            </IconButton>\r\n        </div>\r\n        <Button variant=\"outlined\" color=\"black\" href=\"/\" id=\"homeBtn\">\r\n        <HomeIcon/>\r\n         </Button>\r\n        <FullScreen\r\n        handle={handle}\r\n        >\r\n        <div className=\"video-player\" id=\"video-player\">\r\n        {buffering&&ready&&<div className=\"no-video\">\r\n            <h1>Loading....</h1>\r\n        </div>}\r\n        {ready?\r\n        <ReactPlayer \r\n            ref={videoRef}\r\n            playing={play}\r\n            height=\"100%\"\r\n            width= \"100%\"\r\n            url={urlRef.current}\r\n            volume={volume}\r\n            onProgress={displayProgress}\r\n            onReady ={()=>setBuffering(false)}   \r\n            onError={()=>setReady(false)}\r\n        />:\r\n        <div className=\"no-video\">\r\n            <h2>No Video</h2>\r\n        </div>\r\n        }\r\n        {/* <video src=\"/videoFs/getVideos\" type=\"video/mp4\"/> */}\r\n            <div style={{display:\"flex\"}} className=\"progress-bar-div\" id=\"controls\">\r\n                <IconButton onClick={handleVideoState} id=\"control-btn\" style={{color:\"black\"}}>{play?<PauseIcon/>:<PlayArrowIcon/>}</IconButton>\r\n                <IconButton onClick={handleMute} id=\"control-vlm\" style={{color:\"black\"}}>{isMuted?<VolumeOffIcon/>:isLoud?<VolumeUpIcon/>:<VolumeMuteIcon/>}</IconButton>\r\n                <input type=\"range\" min=\"0\" max=\"100\" id=\"volume\" onChange={handlePlayerVolume}/>\r\n                <div id=\"progress-bar\" className=\"progress-bar status\" onClick={ready?handleProgressChange:\"\"}>\r\n                <div id=\"progress-point\" className=\"progress-point\"></div>\r\n                </div>\r\n                <IconButton onClick={handleBigScreen} id=\"fullscreen-btn\" style={{color:\"black\"}}>{isFullScreen?<FullscreenExitIcon/>:<FullscreenIcon/>}</IconButton>\r\n            </div>\r\n        </div>\r\n        </FullScreen>\r\n    </div>\r\n}","import React, { useState, useEffect } from \"react\";\r\n\r\nconst Checkmark = ({ selected }) => (\r\n  <div\r\n    style={\r\n      selected\r\n        ? { left: \"4px\", top: \"4px\", position: \"absolute\", zIndex: \"1\" }\r\n        : { display: \"none\" }\r\n    }\r\n  >\r\n    <svg\r\n      style={{ fill: \"white\", position: \"absolute\" }}\r\n      width=\"24px\"\r\n      height=\"24px\"\r\n    >\r\n      <circle cx=\"12.5\" cy=\"12.2\" r=\"8.292\" />\r\n    </svg>\r\n    <svg\r\n      style={{ fill: \"#06befa\", position: \"absolute\" }}\r\n      width=\"24px\"\r\n      height=\"24px\"\r\n    >\r\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" />\r\n    </svg>\r\n  </div>\r\n);\r\n\r\nconst imgStyle = {\r\n  transition: \"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s\"\r\n};\r\nconst selectedImgStyle = {\r\n  transform: \"translateZ(0px) scale3d(0.9, 0.9, 1)\",\r\n  transition: \"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s\"\r\n};\r\nconst cont = {\r\n  backgroundColor: \"#eee\",\r\n  cursor: \"pointer\",\r\n  overflow: \"hidden\",\r\n  position: \"relative\"\r\n};\r\n\r\nconst SelectedImage = ({\r\n  index,\r\n  photo,\r\n  margin,\r\n  direction,\r\n  top,\r\n  left,\r\n  selected,\r\n  handleChooseNotToDeleteFile,\r\n  handleChooseToDeleteFile\r\n}) => {\r\n  const [isSelected, setIsSelected] = useState(selected);\r\n  const actualHeight = (200-photo.height)-photo.height;\r\n  //calculate x,y scale\r\n  const sx = (100 - (30 / photo.width) * 100) / 100;\r\n  const sy = (100 - (30 / photo.height) * 100) / 100;\r\n  selectedImgStyle.transform = `translateZ(0px) scale3d(${sx}, ${sy}, 1)`;\r\n\r\n  if (direction === \"column\") {\r\n    cont.position = \"absolute\";\r\n    cont.left = left;\r\n    cont.top = top;\r\n  }\r\n\r\n  const handleOnClick = e => {\r\n    setIsSelected(!isSelected);\r\n    if(!isSelected)\r\n    {\r\n        handleChooseToDeleteFile(index);\r\n    }\r\n    else{\r\n        handleChooseNotToDeleteFile(index);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsSelected(selected);\r\n  }, [selected]);\r\n\r\n  return (\r\n    <div\r\n      style={{ margin, height: actualHeight, width: photo.width, ...cont }}\r\n      className={!isSelected ? \"not-selected\" : \"\"}\r\n    >\r\n      <Checkmark selected={isSelected ? true : false} />\r\n      <img\r\n        alt={photo.title}\r\n        style={\r\n          isSelected ? { ...imgStyle, ...selectedImgStyle } : { ...imgStyle }\r\n        }\r\n        {...photo}\r\n        onClick={handleOnClick}\r\n      />\r\n      <style>{`.not-selected:hover{outline:2px solid #06befa}`}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectedImage;\r\n","import '../../css/createPost.css';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport React, { useState,useCallback, useRef ,useEffect } from 'react';\r\nimport Gallery from 'react-photo-gallery';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AddPhotoAlternateIcon from '@material-ui/icons/AddPhotoAlternate';\r\nimport SelectedImage from '../SelectedImage';\r\nimport Button from '@material-ui/core/Button';  \r\nimport axios from 'axios';\r\n\r\nexport default function CreatePost(props)\r\n{\r\n    const{setPost,handlePost,userInfo,setIsPosting,setIsEditing,isEditing,postData,setPostData} = props;\r\n\r\n    const [text,setText] = useState('');\r\n    const [uploadedFiles,setUploadedFiles] = useState([]);\r\n    const [feeling,setFeeling] = useState();\r\n    const [willBeDeletedFiles, setWillBeDeletedFiles] = useState([]);\r\n    const [deletedExistingFiles, setDeletedExistingFiles] = useState([]);\r\n    const [selectAll] = useState(false);\r\n\r\n    const formRef = useRef();\r\n\r\n    const imageRenderer = useCallback(\r\n        ({ index, left, top, key, photo }) => (\r\n          <SelectedImage\r\n            selected={selectAll ? true : false}\r\n            key={key}\r\n            margin={\"2px\"}\r\n            index={index}\r\n            photo={photo}\r\n            left={left}\r\n            top={top}\r\n            handleChooseNotToDeleteFile={handleChooseNotToDeleteFile}\r\n            handleChooseToDeleteFile={handleChooseToDeleteFile}\r\n          />\r\n        ),\r\n        [selectAll,handleChooseNotToDeleteFile,handleChooseToDeleteFile]\r\n      );\r\n\r\n          useEffect(()=>{\r\n            if(isEditing)\r\n            {\r\n              setText(postData.post.text);\r\n              setFeeling(postData.post.feeling);\r\n              if(postData.post.fileId){\r\n              setUploadedFiles(postData.post.fileId.map((id,index)=>{\r\n                // console.log(postData.url[index]);\r\n                return {src:postData.url[index],width:1,height:1,fileId:id};\r\n              }))\r\n            }\r\n            }\r\n          },[])\r\n\r\n    function handleChooseToDeleteFile(index) {\r\n        setWillBeDeletedFiles(prevData => {\r\n          return [...prevData, index];\r\n        })\r\n      }\r\n  \r\n      function handleChooseNotToDeleteFile(index) {\r\n        setWillBeDeletedFiles(prevData => {\r\n          return prevData.filter(val => {\r\n            return val !== index;\r\n          })\r\n        })\r\n      }\r\n\r\n    function handleUploadFiles(event)\r\n    {\r\n        const file = event.target.files[0];\r\n        if(file)\r\n        {\r\n            const re =  /\\.(gif|jpe?g|tiff?|png|webp|bmp)$/i;\r\n            if (re.test(file.name)) {\r\n                setUploadedFiles(prevData => {\r\n                  return [...prevData, {src: URL.createObjectURL(file), file: file, width:1,height:1}];\r\n                })\r\n              } else {\r\n                alert('only upload image files.')\r\n              }\r\n        }\r\n\r\n    }\r\n\r\n    async function handleDeleteChosenFiles() {\r\n        const tempDeletedFiles = [...willBeDeletedFiles].sort();\r\n        const tempUploadedFiles = [...uploadedFiles];\r\n        for (var i = tempDeletedFiles.length - 1; i >= 0; i--) {\r\n          if (tempUploadedFiles[tempDeletedFiles[i]].fileId) {\r\n            await setDeletedExistingFiles(prevData => {\r\n              return [...prevData, tempUploadedFiles[tempDeletedFiles[i]].fileId];\r\n            })\r\n          }\r\n          tempUploadedFiles.splice(tempDeletedFiles[i], 1);\r\n        }\r\n        setUploadedFiles(tempUploadedFiles);\r\n        setWillBeDeletedFiles([]);\r\n      }\r\n\r\n      async function togglePost()\r\n      {\r\n        if(text==='')\r\n        {\r\n          alert(\"Please enter some text\");\r\n          return;\r\n        }\r\n        const formdata = new FormData(formRef.current);\r\n        if(isEditing)\r\n        { \r\n          formdata.set('postId',postData.post._id);\r\n          formdata.set('text',text);\r\n          formdata.set('feeling',feeling);\r\n          for (var i = 0; i < deletedExistingFiles.length; i++) {\r\n            formdata.append('deletedFile[]', deletedExistingFiles[i]);\r\n          }\r\n          for (var j = 0; j < uploadedFiles.length; j++) {\r\n            if (uploadedFiles[j].file) {\r\n              formdata.append('fileInput[]', uploadedFiles[j].file);\r\n            } else {\r\n              formdata.append('fileInput[]', uploadedFiles[j].fileId);\r\n            }\r\n          }\r\n          await axios({\r\n            method:'post',\r\n            url:'/post/editPost',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n          })\r\n          .then(res=>res.data)\r\n          .catch(err=>console.log(err))\r\n          .then(res=>{\r\n            if(res.result)\r\n            {\r\n              setPost(prevData=>{\r\n                const temp=[];\r\n                for(let i =0;i<prevData.length;i++)\r\n                {\r\n                  if(prevData[i]._id===res.result.docs._id)\r\n                  {\r\n                    temp.push(res.result.docs)\r\n                  }\r\n                  else\r\n                  {\r\n                    temp.push(prevData[i]);\r\n                  }\r\n                }\r\n                return temp;\r\n              })\r\n              handlePost();\r\n            }\r\n            else\r\n            {\r\n              alert(\"Failed to edit post\");\r\n            }\r\n          })\r\n          .catch(err=>console.log(err));\r\n        }\r\n        else\r\n        {\r\n            const formdata = new FormData(formRef.current);\r\n            for(let i =0;i<uploadedFiles.length;i++)\r\n            {\r\n                formdata.append('fileInput[]',uploadedFiles[i].file);\r\n            }\r\n            \r\n            await axios({\r\n                method:'post',\r\n                url:'/post/createPost',\r\n                data:formdata\r\n            })\r\n            .then(res=>res.data)\r\n            .catch(err=>console.log(err))\r\n            .then(res=>{\r\n              if(res)\r\n              {\r\n                alert(\"Memory Created!\");\r\n                setPost(prevData=>{\r\n                  return[res,...prevData];\r\n                })\r\n              }\r\n              else\r\n              {\r\n                alert(\"Opps something went wrong\")\r\n              }\r\n            })\r\n            .catch(err=>console.log(err))\r\n            handlePost();\r\n        }\r\n      }\r\n    return<div className=\"create-div\">\r\n           <div className=\"create-title\">\r\n               <h3>{isEditing?\"Edit\":\"Create\"} Memory</h3>\r\n               <IconButton onClick={handlePost} id=\"create-close-btn\"><CloseIcon/></IconButton>\r\n            </div>\r\n            <form ref={formRef} >\r\n                <div className=\"create-feeling-div\">\r\n                    <div className=\"create-profile-pic\">\r\n                    <ReactAvatar\r\n                    src=\"/gridFs/getProfile\"\r\n                    />\r\n                    </div>\r\n                    <div className=\"create-greeting\">\r\n                        <p>Hi, {userInfo.nickname} how are you feeling today?</p>\r\n                    </div>\r\n                    <div className=\"create-select\">\r\n                        <NativeSelect\r\n                        value={feeling}\r\n                        onChange={(event)=>setFeeling(event.target.value)}\r\n                        id=\"create-feeling\"\r\n                        name=\"feeling\"\r\n                        >\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"happy\">Happy 😀 </option>\r\n                        <option value=\"sad\">Sad ☹️</option>\r\n                        <option value=\"surprise\">Surprised 😮</option>\r\n                        <option value=\"meh\">Meh 😕</option>\r\n                        <option value=\"annoyed\">Annoyed 🙄</option>\r\n                        <option value=\"sleepy\">Sleepy 😴</option>\r\n                        <option value=\"love\">Love 🥰</option>\r\n                        <option value=\"touched\">Touched 😭</option>\r\n                        <option value=\"shy\">Shy 😌</option>\r\n                        <option value=\"amazed\">Amazed 🤩</option>\r\n                        </NativeSelect>\r\n                    </div>\r\n                </div>\r\n                <div className=\"create-textarea\">\r\n                        <textarea placeholder=\"What's on your mind?\" rows=\"10\" value={text} onChange={(e)=>setText(e.target.value)} name=\"text\" id=\"text\"/>\r\n                </div>\r\n                <div className=\"create-gallery-div\">\r\n                <Gallery photos={uploadedFiles} renderImage={imageRenderer} id=\"create-gallery\"/> \r\n                </div>\r\n                <div className=\"create-btn-div\">\r\n                <IconButton id=\"create-btn\" onClick={()=>document.getElementById('create-photo').click()}><AddPhotoAlternateIcon/></IconButton>\r\n                <input type=\"file\" hidden id=\"create-photo\" onChange={handleUploadFiles}/>\r\n                {uploadedFiles.length>0&&<IconButton id=\"create-btn\" onClick={handleDeleteChosenFiles}><DeleteIcon/></IconButton>}\r\n                </div>\r\n                <div className=\"create-post-div\">\r\n                <Button variant=\"contained\" id=\"create-post-btn\" onClick={togglePost}>\r\n                Post\r\n                </Button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n}","import '../../css/memoryPost.css'\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ImageGallery from \"react-image-gallery\";\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function MemoryPost(props)\r\n{\r\n    const{post,userId,setIsEditing,setPostData,setIsPosting,setPost} = props\r\n    const [openMore,setOpenMore] = useState(false);\r\n    const [url,setUrl] = useState([]);\r\n\r\n    const emojiMap={\r\n        \"happy\": \"😀\",\r\n        \"sad\": \"☹️\",\r\n        \"surprise\": \"😮\",\r\n        \"meh\": \"😕\",\r\n        \"annoyed\": \"🙄\",\r\n        \"sleepy\": \"😴\",\r\n        \"love\": \"🥰\",\r\n        \"touched\": \"😭\",\r\n        \"shy\": \"😌\",\r\n        \"amazed\": \"🤩\"\r\n    }\r\n\r\n    const monthMap = {\r\n        \"01\": \"January\",\r\n        \"02\": \"February\",\r\n        \"03\": \"March\",\r\n        \"04\": \"April\",\r\n        \"05\": \"May\",\r\n        \"06\": \"June\",\r\n        \"07\": \"July\",\r\n        \"08\": \"August\",\r\n        \"09\": \"September\",\r\n        \"10\": \"October\",\r\n        \"11\": \"November\",\r\n        \"12\": \"December\",\r\n      }\r\n    \r\n\r\n    useEffect(async()=>{\r\n        if(post.fileId)\r\n        {\r\n        let temp =[];\r\n       await post.fileId.map(id=>{\r\n            let url = \"/post/getPostImage/\"+id;\r\n            temp.push(url);\r\n        })\r\n        setUrl(temp);\r\n        }\r\n    },[post])\r\n    \r\n    function constructGalleryUrls(fileId)\r\n    {\r\n        return fileId.map(id=>{\r\n            let url = \"/post/getPostImage/\"+id;\r\n            return {original:url};\r\n        })\r\n        \r\n    }\r\n    function handleEdit()\r\n    {\r\n        setPostData({post:post,url:url});\r\n        setIsEditing(true);\r\n        setIsPosting(true);\r\n        setOpenMore(false);\r\n    }\r\n    async function deletePost()\r\n    {\r\n        const formdata = new FormData();\r\n        formdata.append('postId',post._id);\r\n        if(post.fileId)\r\n        {\r\n            for(let i=0;i<post.fileId.length;i++)\r\n            {\r\n                formdata.append('fileId[]',post.fileId[i])\r\n            }\r\n        }\r\n        await axios({\r\n            method:'post',\r\n            url:'/post/deletePost',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            if(res.status)\r\n            {\r\n                setPost(prevData=>{\r\n                    return prevData.filter(posts=>{\r\n                        return posts._id !== post._id;\r\n                    })\r\n                })\r\n\r\n                alert(\"Memory deleted\");\r\n            }\r\n            else{\r\n                alert(\"Opps something went wrong with the server!\")\r\n            }\r\n        })\r\n    }\r\n\r\n    function formatDate(date) {\r\n        const today = new Date(parseInt(Date.parse(date), 10));\r\n        var dd = String(today.getDate()).padStart(2, '0');\r\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n        var yyyy = today.getFullYear();\r\n        return dd + \" \" + monthMap[mm]+\" \"+yyyy\r\n      }\r\n\r\n    return<div className=\"post-div\">\r\n        {openMore&&<div className=\"post-more-div\">\r\n            <div className=\"post-more-option edit\" onClick={handleEdit}>\r\n            Edit Memory\r\n            </div>\r\n            <div className=\"post-more-option delete\" onClick={deletePost}>\r\n            Delete Memory\r\n            </div>\r\n            </div>}\r\n        <IconButton id=\"post-more\" onClick={()=>setOpenMore(!openMore)}><MoreHorizIcon fontSize=\"medium\"/></IconButton>\r\n        <div className=\"post-header\">\r\n            {userId===post.userId?<ReactAvatar src=\"/gridFs/getProfile\" id=\"post-avatar\"/>:<ReactAvatar src=\"/gridFs/getPartnerProfile\" id=\"post-avatar\"/>}\r\n           <div className=\"post-desc\">\r\n            <div className=\"post-feeling\">\r\n                <h3>{post.nickname}</h3>\r\n                {post.feeling&&<h3> &nbsp;• &nbsp;is feeling {post.feeling}&nbsp;{emojiMap[post.feeling]}</h3>}  \r\n            </div>\r\n              <div className=\"post-time\">\r\n                <p>{formatDate(post.timeOfCreation)}</p>\r\n              </div>\r\n            </div> \r\n        </div>\r\n        <div className=\"post-text\">\r\n        {post.text}\r\n        </div>\r\n        <div className=\"post-images\">\r\n        {post.fileId&&\r\n            <ImageGallery items={constructGalleryUrls(post.fileId)} showFullscreenButton={false} showPlayButton={false} showThumbnails={false} className=\"post-gallery\" />\r\n        }\r\n        </div>\r\n    </div>\r\n}","import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport NavBar from '../Navbar';\r\nimport '../../css/memoryBook.css';\r\nimport CreatePost from './CreatePost';\r\nimport MemoryPost from './MemoryPost';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function MemoryBook()\r\n{\r\n    const [userInfo,setUserInfo] = useState();\r\n    const [partnerInfo,setPartnerInfo] = useState();\r\n    const [postData,setPostData] = useState();\r\n    const [isEditing,setIsEditing] = useState(false);\r\n    const [isPosting,setIsPosting] = useState(false);\r\n    const [posts,setPosts] = useState([]);\r\n    const [havePartner,setHavePartner] = useState(false);\r\n\r\n    const formRef = useRef();\r\n\r\n\r\n   \r\n\r\n\r\n    useEffect(()=>{\r\n         axios.get('/auth/isLoggedIn')\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            if(res.isLoggedIn)\r\n            {\r\n                if(res.user.partner!==null)\r\n                {\r\n                    setHavePartner(true);\r\n                }\r\n                setUserInfo(res.user);\r\n                setPartnerInfo(res.partnerInfo);\r\n\r\n                axios({\r\n                    method:'post',\r\n                    url:'/post/getPosts',\r\n                })\r\n                .then(res=>res.data)\r\n                .catch(err=>console.log(err))\r\n                .then(res=>{\r\n                    if(res.success)\r\n                    {\r\n                        setPosts(res.posts)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },[])  \r\n\r\n    function handlePost()\r\n    {\r\n        setIsPosting(false);\r\n        setIsEditing(false);\r\n        setPostData();\r\n    }\r\n    return <div className=\"memoryBook\">\r\n        {isPosting&&<CreatePost  setPostData={setPostData} setPost={setPosts} postData={postData} handlePost={handlePost} userInfo={userInfo} setIsPosting={setIsPosting} isEditing={isEditing} setIsEditing={setIsEditing}/>}\r\n        <div className=\"memoryBook-div\" id=\"memoryBook\" style={{opacity:isPosting||isEditing?\"0.3\":\"1\"}}>\r\n            <NavBar havePartner={havePartner}/>\r\n                <div className=\"postDiv\">\r\n                    <div className=\"post-option\">\r\n                    <h3>Post Some Memorable Moment Here</h3>\r\n                    <Button variant=\"contained\" id=\"memory-create-post\" onClick={()=>setIsPosting(true)}>\r\n                    Create Memory 🤍\r\n                    </Button>\r\n                    </div>\r\n            </div>\r\n            {posts.map(post=>{\r\n              return  <MemoryPost key={post._id}  setPost={setPosts} setPostData={setPostData} setIsPosting={setIsPosting} isEditing={isEditing} setIsEditing={setIsEditing} post={post} userId={userInfo._id}/>\r\n            })}\r\n        </div>\r\n    </div>\r\n}","import { Route, Switch } from 'react-router-dom';\r\nimport Login from './components/Login';\r\nimport Home from './components/Home';\r\nimport UserProfileForm from './components/UserProfileForm';\r\nimport ChatRoom from './components/ChatRoom';\r\nimport {ContextProvider} from './SocketContext';\r\nimport Cinema from './components/Cinema';\r\nimport MemoryBook from './components/MemoryBook/MemoryBook';\r\n// import './App.css';\r\n\r\nexport default function App(props) {\r\n  return (\r\n    <main>\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Home}/>\r\n        <Route path=\"/login\" exact component={Login}/>\r\n        <Route path=\"/userProfileForm\" exact component={UserProfileForm}/>\r\n        <Route path=\"/cinema\" exact component={Cinema}/>\r\n        <Route path=\"/memoryBook\" exact component={MemoryBook}/>\r\n        <ContextProvider>\r\n        <Route path=\"/chatRoom\" exact component={ChatRoom}/>\r\n        </ContextProvider>\r\n      </Switch>\r\n    </main>\r\n  )\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n \r\n  // <ContextProvider>\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>\r\n  // </ContextProvider>  \r\n  ,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}