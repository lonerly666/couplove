{"version":3,"sources":["components/Login.js","components/RequestInfo.js","components/PartnerReq.js","components/Navbar.js","components/Home.js","components/UserProfileForm.js","components/InputBox.js","components/ChatNav.js","components/ChatBubble.js","SocketContext.js","components/VideoRespond.js","components/VideoCall.js","components/ChatRoom.js","components/VideoList.js","components/VideoUploadDiv.js","components/Cinema.js","components/SelectedImage.js","components/MemoryBook/CreatePost.js","components/MemoryBook/MemoryPost.js","components/MemoryBook/MemoryBook.js","App.js","reportWebVitals.js","index.js"],"names":["Login","className","Button","variant","onClick","window","location","href","id","src","RequestInfo","props","reqInfo","setHavePartner","setRequestList","url","senderId","event","a","preventDefault","formdata","FormData","append","axios","method","data","header","then","res","catch","err","console","log","prev","filter","info","alert","senderNickname","IconButton","headers","result","PartnerReq","requestList","map","Navbar","handleSendReq","formRef","havePartner","isHome","useState","viewList","setViewList","target","files","reload","open","style","color","document","getElementById","click","type","hidden","onChange","name","onSubmit","ref","placeholder","value","Home","userInfo","setUserInfo","partnerInfo","setPartnerInfo","dayWidget","setDayWidget","specialWidget","setSpecialWidget","bdayWidget","setBdayWidget","dateOfRelation","setDateOfRelation","isSetting","setIsSetting","totalDay","setTotalDay","userBday","setUserBday","partnerBday","setPartnerBday","yourCountDown","setYourCountDown","partnerCountDown","setPartnerCountDown","upComingEvent","setUpComingEvent","upComingDay","setUpComingDay","backgroundUrl","setBackgroundUrl","date","setDate","useRef","acceptRef","dateRef","monthMap","formatDate","today","Date","parseInt","parse","dd","String","getDate","padStart","mm","getMonth","getFullYear","formData","current","isSent","status","onHoverAddWidget","opacity","offHoverAddWidget","handleCreateWidget","display","onHoverWidget","visibility","offHoverWidget","handleDeleteWidget","useEffect","ac","AbortController","get","isLoggedIn","undefined","user","nickname","anniverse","dateOfRelationship","specialEvent","widget","i","length","original","difference","getTime","partner","dateOfBirth","you","date1","date2","setFullYear","temp1","temp2","Math","abs","currentDate","currentYear","closest","temp","round","requests","list","push","abort","handleLogout","backgroundImage","onMouseOut","onMouseOver","fontSize","utils","DateFnsUtils","margin","label","format","KeyboardButtonProps","borderBottom","genders","useStyles","makeStyles","theme","formControl","marginTop","minWidth","UserProfileForm","setNickname","bio","setBio","croppedUrl","setCroppedUrl","uploaded","setUploaded","dob","setDob","gender","setGender","setPartner","setDateOfRelationship","userId","setUserId","classes","_id","reader","FileReader","onload","setAttribute","readAsDataURL","file","TextField","e","FormControl","InputLabel","Select","labelId","option","MenuItem","marginLeft","InputBox","handleSendMsg","ChatNav","toggleBackHome","partnerStatus","toggleVideoCall","callAccepted","readyDisplay","setReadyDisplay","isOnline","setIsOnline","openMore","setOpenMore","ChatBubble","textInfo","text","socket","SocketContext","createContext","isCaller","ContextProvider","children","setCallAccepted","callEnded","setCallEnded","stream","setStream","call","setCall","roomId","setRoomId","newMessage","setNewMessage","isCalling","setIsCalling","noCall","setNoCall","users","myVideo","userVideo","connectionRef","io","on","chat","callUser","marginRight","from","callerName","signal","isReceivingCall","leaveCall","audio","video","answerCall","navigator","mediaDevices","getUserMedia","currentStream","local","srcObject","peer","Peer","initiator","trickle","emit","to","signalData","destroy","Provider","sendMsg","msg","joinRoom","startCall","muteAudio","getAudioTracks","enabled","muteVideo","getVideoTracks","declineCall","VideoRespond","useContext","Avatar","VideoCall","isMuted","setIsMuted","isDisplayed","setIsDisplayed","playsInline","muted","autoPlay","ChatRoom","setText","userNickname","setUserNickname","messages","setMessages","scrollDir","backgroundSize","chatInfo","chats","reverse","roomInfo","prevData","scrollTo","scrollHeight","index","VideoList","handleChooseMovie","setFiles","dropdown","setDropdown","videoId","filename","aliases","handleDeleteVideo","size","state","top","VideoUploadDiv","openUpload","setOpenUpload","uploadProgress","setUploadProgress","onUploadProgress","progressEvent","progress","loaded","total","width","textContent","Cinema","handle","useFullScreenHandle","ready","setReady","play","setPlay","openUrl","setOpenUrl","setUrl","buffering","setBuffering","volume","setVolume","isLoud","setIsLoud","isFullScreen","setIsFullScreen","videoRef","urlRef","readyToPlay","initialRun","choosenUrl","time","getCurrentTime","seekTo","pointed","playing","height","onProgress","point","getDuration","left","onReady","onError","min","max","actualVolume","parseFloat","progressBarWidth","nativeEvent","offsetX","offsetWidth","controls","enter","bottom","background","exit","Checkmark","selected","position","zIndex","fill","cx","cy","r","d","imgStyle","transition","selectedImgStyle","transform","cont","backgroundColor","cursor","overflow","SelectedImage","photo","direction","handleChooseNotToDeleteFile","handleChooseToDeleteFile","isSelected","setIsSelected","actualHeight","sx","sy","alt","title","CreatePost","setPost","handlePost","isEditing","setIsPosting","setIsEditing","postData","setPostData","uploadedFiles","setUploadedFiles","feeling","setFeeling","willBeDeletedFiles","setWillBeDeletedFiles","deletedExistingFiles","setDeletedExistingFiles","selectAll","imageRenderer","useCallback","key","val","tempDeletedFiles","sort","tempUploadedFiles","fileId","splice","set","post","j","docs","NativeSelect","aria-label","rows","photos","renderImage","test","URL","createObjectURL","MemoryPost","posts","yyyy","timeOfCreation","items","showFullscreenButton","showPlayButton","showThumbnails","MemoryBook","isPosting","setPosts","success","App","path","exact","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.0c564e52.chunk.js","sourcesContent":["import Button from '@material-ui/core/Button';\r\nimport '../css/login.css';\r\n\r\nexport default function Login(){\r\n\r\n\r\n    function handleGoogleClick()\r\n    {\r\n        window.location.href = \"/auth/google\";\r\n    }\r\n\r\n    return <div className=\"login-page-div\">\r\n        <div className=\"login-page\">\r\n        <div className=\"title\"><h1>Welcome to Couplove!</h1></div>\r\n        <Button variant=\"contained\" onClick={handleGoogleClick} id=\"home-login-btn\">\r\n            <img src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" className=\"g-logo\"/>\r\n            &nbsp;&nbsp;Login With Google</Button>\r\n        </div>\r\n    </div>\r\n}","import ReactAvatar from '@material-ui/core/Avatar';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport { IconButton } from '@material-ui/core';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nimport axios from 'axios';\r\n\r\n\r\n\r\n\r\nexport default function RequestInfo(props)\r\n{\r\n    const {reqInfo,setHavePartner,setRequestList} = props;\r\n    const url = \"/gridFs/getOtherProfile/\"+reqInfo.senderId;\r\n\r\n\r\n    function acceptPartner(event)\r\n    {\r\n      event.preventDefault();\r\n      const formdata = new FormData();\r\n      formdata.append('senderId',reqInfo.senderId);\r\n      axios({\r\n        method:'post',\r\n        url:'/user/acceptRequest',\r\n        data:formdata,\r\n        headers: {'Content-Type': 'multipart/form-data'}\r\n      })\r\n      .then(res=>res.data)\r\n      .catch(err=>console.log(err))\r\n      .then(res=>{\r\n        if(res.result)\r\n        {\r\n          setRequestList(prev=>{\r\n            return prev.filter(info=>{\r\n              return info.senderId!==reqInfo.senderId\r\n            })\r\n          })\r\n          setHavePartner(true);\r\n        }\r\n      })\r\n    }\r\n    async function declinePartner(event)\r\n    {\r\n      event.preventDefault();\r\n      const formdata = new FormData();\r\n      formdata.append('senderId',reqInfo.senderId)\r\n      await axios({\r\n        method:'post',\r\n        url:'/user/declineRequest',\r\n        data:formdata,\r\n        header:{'Content-Type': 'multipart/form-data'}\r\n      })\r\n      .then(res=>res.data)\r\n      .catch(err=>console.log(err))\r\n      .then(res=>{\r\n        console.log(res);\r\n        if(res)\r\n        {\r\n          setRequestList(prev=>{\r\n            return prev.filter(info=>{\r\n              return info.senderId!==reqInfo.senderId\r\n            })\r\n          })\r\n        }\r\n        else\r\n        {\r\n          alert(\"Opps something wrong with the server\")\r\n        }\r\n      })\r\n      \r\n    }\r\n\r\n    return <div className=\"info-div\">\r\n        <div className=\"info-sender-profile-div\">\r\n            <ReactAvatar\r\n            id=\"info-sender-avatar\"\r\n            src={url}\r\n            />\r\n        </div>\r\n        <div className=\"info-sender-desc\">\r\n            {reqInfo.senderNickname} wants to be your partner<br/>\r\n            <IconButton id=\"info-req-option\" onClick={acceptPartner} ><CheckIcon/></IconButton>\r\n            <IconButton id=\"info-req-option\" onClick={declinePartner}><ClearIcon/></IconButton>\r\n        </div>\r\n    </div>\r\n}","import '../css/requestList.css';\r\n\r\nimport RequestInfo from './RequestInfo';\r\n\r\n\r\n\r\n\r\nexport default function PartnerReq(props)\r\n{\r\n    const {requestList,setHavePartner,setRequestList} = props;\r\n    \r\n\r\n    return<div className=\"req-list-div\">\r\n        {requestList.map(info=>{\r\n            return <RequestInfo setRequestList={setRequestList} reqInfo={info} setHavePartner={setHavePartner}/>\r\n        })}\r\n    </div>\r\n}","import '../css/navbar.css';\r\n\r\nimport PartnerReq from  './PartnerReq';\r\nimport PeopleAltIcon from '@material-ui/icons/PeopleAlt';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { useState,useRef } from 'react';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport axios from 'axios';\r\n\r\nexport default function Navbar(props)\r\n{\r\n    const {handleSendReq,formRef,havePartner,requestList,setHavePartner,setRequestList,isHome} = props;\r\n    const [viewList,setViewList] = useState(false);\r\n\r\n\r\n    \r\n    async function handleChangeBackground(event)\r\n    {\r\n      await axios({\r\n        method:'post',\r\n        url:'/home/checkExist'\r\n      })\r\n      const formdata = new FormData();\r\n      formdata.append('file',event.target.files[0]);\r\n        await axios({\r\n          method:'post',\r\n          url:'/home/upload',\r\n          data:formdata,\r\n          headers:{'Content-Type':'multipart/formdata'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            window.location.reload();\r\n        })\r\n    }\r\n\r\n    return<div className=\"nav-div\">\r\n        <div className=\"nav-title\" onClick={()=>window.open('/','_self')}><h3>Couplove</h3></div>\r\n        <div className=\"nav-activity-div\">\r\n        <div className=\"nav-activity logout\"  onClick={()=>window.location.href = \"/auth/logout\"}>Logout</div> \r\n        {isHome&&<IconButton style={{color:\"white\"}} onClick={()=>document.getElementById('background-file').click()}><PhotoIcon/></IconButton>}\r\n        {isHome&&<input type=\"file\"  hidden id=\"background-file\" onChange={handleChangeBackground} name=\"file\"/>}\r\n        <div className=\"nav-activity profile\"  onClick={()=>window.location.href = \"/userProfileForm\"}>Profile</div> \r\n        {havePartner&&<div className=\"nav-activity chat\" onClick={()=>window.open('/chatRoom','_self')}>Chat Room</div>}\r\n        {havePartner&&<div className=\"nav-activity cinema\" onClick={()=>window.open('/cinema','_self')}>Cinema</div>}\r\n        {havePartner&&<div className=\"nav-activity memory\" onClick={()=>window.open('/memoryBook','_self')}>Memory Book</div>}\r\n        {!havePartner&&<div className=\"nav-sendRequest\">\r\n        <form onSubmit={handleSendReq} ref={formRef}>\r\n        <input type=\"text\" id=\"reqId\" name=\"reqId\" placeholder=\"Partner ID\"/>\r\n        <input type=\"submit\" value=\"+\" className=\"nav-submit\" />\r\n        </form>    \r\n        </div>}\r\n        {!havePartner&&<div className=\"nav-request\">\r\n        <IconButton style={{color:\"whitesmoke\"}} onClick={()=>setViewList(!viewList)}><PeopleAltIcon/></IconButton>\r\n        {viewList&&<PartnerReq requestList={requestList} setHavePartner={setHavePartner} setRequestList={setRequestList} />}\r\n        </div>}\r\n        </div>\r\n    </div>\r\n}","import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport Button from '@material-ui/core/Button';\r\nimport Navbar from '../components/Navbar';\r\nimport '../css/home.css';\r\nimport { IconButton } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\n\r\n\r\n\r\nexport default function Home()\r\n{\r\n  const [userInfo,setUserInfo] = useState();\r\n  const [partnerInfo,setPartnerInfo]= useState();\r\n  const [havePartner,setHavePartner] = useState(false);\r\n  const [requestList,setRequestList]= useState([]);\r\n  const [dayWidget,setDayWidget] = useState(false);\r\n  const [specialWidget,setSpecialWidget] = useState(false);\r\n  const [bdayWidget,setBdayWidget] = useState(false);\r\n  const [dateOfRelation,setDateOfRelation] = useState(false);\r\n  const [isSetting,setIsSetting] = useState(false);\r\n  const [totalDay,setTotalDay] = useState();\r\n  const [userBday,setUserBday] = useState();\r\n  const [partnerBday,setPartnerBday] = useState();\r\n  const [yourCountDown,setYourCountDown] = useState();\r\n  const [partnerCountDown,setPartnerCountDown] = useState();\r\n  const [upComingEvent,setUpComingEvent] = useState();\r\n  const [upComingDay,setUpComingDay] = useState();\r\n  const [backgroundUrl,setBackgroundUrl] = useState('');\r\n  const [isHome,setIsHome] = useState(true);\r\n  const [date,setDate] = useState();\r\n\r\n  const formRef = useRef();\r\n  const acceptRef = useRef();\r\n  const dateRef = useRef();\r\n  \r\n\r\n  const monthMap = {\r\n    \"01\": \"January\",\r\n    \"02\": \"February\",\r\n    \"03\": \"March\",\r\n    \"04\": \"April\",\r\n    \"05\": \"May\",\r\n    \"06\": \"June\",\r\n    \"07\": \"July\",\r\n    \"08\": \"August\",\r\n    \"09\": \"September\",\r\n    \"10\": \"October\",\r\n    \"11\": \"November\",\r\n    \"12\": \"December\",\r\n  }\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn===false)\r\n          {\r\n             window.open('/login','_self');\r\n          }\r\n          else\r\n          {\r\n            if(res.user.nickname===undefined)\r\n            {\r\n              window.open('/userProfileForm','_self');\r\n            }\r\n            else\r\n            {\r\n            \r\n              axios.get('/home/getBackground')\r\n              .then(res=>res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                if(!res)\r\n                {\r\n                  setBackgroundUrl('https://s3-us-west-2.amazonaws.com/s.cdpn.io/751678/my-illustration-background.png');\r\n                  document.getElementById('foreground').style.visibility=\"visible\";\r\n                }\r\n                else\r\n                {\r\n                  setBackgroundUrl('/home/getBackground');\r\n                  document.getElementById('foreground').style.visibility=\"hidden\";\r\n                }\r\n              })\r\n\r\n              let anniverse = new Date(res.user.dateOfRelationship);\r\n              let month = anniverse.getMonth()+1;\r\n              let day = anniverse.getDate();\r\n              let date =\"0\"+ month+\"/\"+day;\r\n              const specialEvent = [\r\n                {date:\"02/14\",event:\"Valentines Day\"},\r\n                {date:\"05/20\",event:\"520 Day\"},\r\n                {date:\"12/25\",event:\"Christmas Day\"},\r\n                {date:\"12/31\",event:\"New Year Eve\"},\r\n                {date:date,event:\"Anniversary Day\"},\r\n           \r\n             ]\r\n\r\n              setPartnerInfo(res.partnerInfo);\r\n              setUserInfo(res.user);\r\n              if(res.user.dateOfRelationship!==null)\r\n              {\r\n                setDateOfRelation(true);\r\n                setDate(res.user.dateOfRelationship);\r\n                if(res.widget)\r\n                {\r\n                    for(let i=0;i<res.widget.widget.length;i++)\r\n                    {\r\n                      if(res.widget.widget[i].type===\"day\")\r\n                      {\r\n                        setDayWidget(true);\r\n                        let current = new Date();\r\n                        let original = new Date(res.user.dateOfRelationship);\r\n                        let difference = current.getTime()-original.getTime();\r\n                        let day = difference/ (1000 * 3600 * 24);\r\n                        setTotalDay(parseInt(day)+1);\r\n                      }\r\n                      else if(res.widget.widget[i].type===\"bday\")\r\n                      {\r\n                        \r\n                        const partner = formatDate(res.partnerInfo.dateOfBirth);\r\n                        const you = formatDate(res.user.dateOfBirth);\r\n                        setPartnerBday(partner);\r\n                        setUserBday(you);\r\n                        const current = new Date();\r\n                        const date1 = new Date(res.partnerInfo.dateOfBirth);\r\n                        const date2 = new Date(res.user.dateOfBirth);\r\n                        date1.setFullYear(current.getFullYear());\r\n                        date2.setFullYear(current.getFullYear());\r\n                        if(current>date1)\r\n                        {\r\n                          date1.setFullYear(current.getFullYear()+1);\r\n                        }\r\n                        if(current>date2)\r\n                        {\r\n                          date2.setFullYear(current.getFullYear()+1);\r\n                        }\r\n                        const temp1 = parseInt((date1.getTime()-current.getTime())/ (1000 * 3600 * 24));\r\n                        const temp2 = parseInt((date2.getTime()-current.getTime())/ (1000 * 3600 * 24));\r\n                        if(temp1===0)\r\n                        {\r\n                          setPartnerCountDown(\"Today is your partner's Birthday!\");\r\n                        }\r\n                        else{\r\n                          setPartnerCountDown(Math.abs(temp1));\r\n                        }\r\n                        if(temp2===0)\r\n                        {\r\n                          setYourCountDown(\"Today is your Birthday!\")\r\n                        }\r\n                        else\r\n                        {\r\n                           setYourCountDown(Math.abs(temp2));\r\n                        }\r\n                        setBdayWidget(true);\r\n                      }\r\n                      else if(res.widget.widget[i].type===\"special\")\r\n                      {\r\n                        setSpecialWidget(true);\r\n                        const currentDate = new Date();\r\n                        const currentYear = currentDate.getFullYear();\r\n                        let closest =99999999999;\r\n                        specialEvent.map(date=>{\r\n                          let temp = new Date(currentYear+\"/\"+date.date);\r\n                          if(currentDate>temp)\r\n                          {\r\n                            temp.setFullYear(currentDate+1);\r\n                          }\r\n                          let result = Math.abs((parseInt(currentDate.getTime()-temp.getTime())/ (1000 * 3600 * 24)));\r\n                          if(result<closest)\r\n                          {\r\n                            closest = result+1;\r\n                            setUpComingEvent(date.event);\r\n                          }\r\n                        })\r\n                        if(Math.round(closest)===0)\r\n                        {\r\n                          setUpComingDay(\"Today is \"+date.event+\" !\");\r\n                        }\r\n                        else\r\n                        {\r\n                          setUpComingDay(Math.round(closest));\r\n                        }\r\n                        \r\n                        \r\n                      }\r\n                    }\r\n                }\r\n              }\r\n              axios({\r\n                method:'get',\r\n                url:'/user/getRequest',\r\n                headers: {'Content-Type': 'multipart/form-data'}\r\n              })\r\n              .then(res=>res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                let temp=[];\r\n                res.requests.map(list=>{\r\n                  temp.push({...list});\r\n                })\r\n                setRequestList(temp);\r\n              })\r\n              if(res.user.partner!==null)\r\n              {\r\n                setHavePartner(true); \r\n              }\r\n             \r\n            }\r\n          } \r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[dayWidget,specialWidget,bdayWidget]);\r\n\r\n      \r\n      function formatDate(date) {\r\n        const today = new Date(parseInt(Date.parse(date), 10));\r\n        var dd = String(today.getDate()).padStart(2, '0');\r\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n        var yyyy = today.getFullYear();\r\n        // return mm + '/' + dd + '/' + yyyy;\r\n        return dd + \" \" + monthMap[mm] \r\n      }\r\n      function handleLogout()\r\n      {\r\n        window.location.href = \"/auth/logout\";\r\n      }\r\n      function handleSendReq(event)\r\n      {\r\n        event.preventDefault();\r\n        const formData = new FormData(formRef.current);\r\n        axios({\r\n          method:'post',\r\n          url:'/user/sendRequest',\r\n          data:formData,\r\n          headers: {'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          if(res.isSent)\r\n          {\r\n             alert(\"sent!\");\r\n          }\r\n          else\r\n          {\r\n            alert(res.status);\r\n            console.log(res)\r\n          }\r\n        })\r\n        document.getElementById('reqId').value = \"\";\r\n      }\r\n      requestList.map(list=>{\r\n        console.log(list);\r\n      })\r\n\r\n      \r\n\r\n      function onHoverAddWidget(type)\r\n      {\r\n        if(type===\"special\")\r\n        {\r\n          document.getElementById('hover-special').style.opacity=\"1\";\r\n        }\r\n        else if(type===\"day\")\r\n        {\r\n          document.getElementById('hover-day').style.opacity=\"1\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('hover-bday').style.opacity=\"1\";\r\n        }\r\n      }\r\n\r\n      function offHoverAddWidget(type)\r\n      {\r\n        if(type===\"special\")\r\n        {\r\n          document.getElementById('hover-special').style.opacity=\"0\";\r\n        }\r\n        else if(type===\"day\")\r\n        {\r\n          document.getElementById('hover-day').style.opacity=\"0\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('hover-bday').style.opacity=\"0\";\r\n        }\r\n      }\r\n\r\n      async function handleCreateWidget(type)\r\n      {\r\n        if(type===\"day\")\r\n        {\r\n          if(dateOfRelation)\r\n          {\r\n            const formdata = new FormData();\r\n            formdata.append('type',type);\r\n            await axios({\r\n              method:'post',\r\n              url:'/widget/createWidget',\r\n              data:formdata,\r\n              headers:{'Content-Type': 'multipart/form-data'}\r\n            })\r\n            .then(res=>res.data)\r\n            .catch(err=>console.log(err))\r\n            .then(res=>{\r\n              setDayWidget(true);\r\n            })  \r\n          }\r\n          else\r\n          {\r\n            document.getElementById(\"noDayWidget\").style.display=\"none\";\r\n            setIsSetting(true);\r\n          }\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          const formdata = new FormData();\r\n          formdata.append('type',\"bday\");\r\n          await axios({\r\n            method:'post',\r\n            url:'/widget/createWidget',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n          })\r\n          .then(res=>res.data)\r\n          .catch(err=>console.log(err))\r\n          .then(res=>{\r\n            if(res)\r\n            {\r\n              setBdayWidget(true);\r\n            }\r\n          })\r\n        }\r\n        else if(type===\"special\")\r\n        {\r\n          const formdata = new FormData();\r\n          formdata.append('type',\"special\");\r\n          await axios({\r\n            method:'post',\r\n            url:'/widget/createWidget',\r\n            data:formdata,\r\n            headers:{'Content-Type':'multipart/formdata'}\r\n          })\r\n          .then(res=>res.data)\r\n          .catch(err=>console.log(err))\r\n          .then(res=>{\r\n            if(res)\r\n            {\r\n              setSpecialWidget(true);\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      async function handleUpdateDate(event)\r\n      {\r\n        event.preventDefault();\r\n        const formdata = new FormData(dateRef.current);\r\n        formdata.append('type',\"day\");\r\n        await axios({\r\n          method:'post',\r\n          url:'/widget/createWidget',\r\n          data:formdata,\r\n          headers:{'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n          setIsSetting(false);\r\n          setDayWidget(true);\r\n        })\r\n      }\r\n\r\n      function onHoverWidget(type)\r\n      {\r\n        if(type===\"day\")\r\n        {\r\n          document.getElementById(\"home-delete-dayWidget\").style.visibility = \"visible\";\r\n        }\r\n        else if(type===\"bday\")\r\n        {\r\n          document.getElementById('home-delete-bdayWidget').style.visibility = \"visible\";\r\n        }\r\n        else if(type===\"special\")\r\n        {\r\n          document.getElementById('home-delete-specialWidget').style.visibility = \"visible\";\r\n        }\r\n      }\r\n      function offHoverWidget()\r\n      {\r\n        if(dayWidget)\r\n        document.getElementById(\"home-delete-dayWidget\").style.visibility = \"hidden\";\r\n        if(bdayWidget)\r\n        document.getElementById('home-delete-bdayWidget').style.visibility =\"hidden\";\r\n        if(specialWidget)\r\n        document.getElementById('home-delete-specialWidget').style.visibility = \"hidden\";\r\n      }\r\n\r\n      async function handleDeleteWidget(type)\r\n      {\r\n         const formdata = new FormData();\r\n         formdata.append('type',type);\r\n         await axios({\r\n           method:'post',\r\n           url:'/widget/deleteWidget',\r\n           data:formdata,\r\n           headers:{'Content-Type': 'multipart/form-data'}\r\n         })\r\n         .then(res=>res.data)\r\n         .catch(err=>console.log(err))\r\n         .then(res=>{\r\n           if(res)\r\n           {\r\n             if(type===\"day\")\r\n             setDayWidget(false)\r\n             if(type===\"bday\")\r\n             setBdayWidget(false)\r\n             if(type===\"special\")\r\n             setSpecialWidget(false)\r\n           }\r\n         })\r\n      }\r\n\r\n\r\n    return <div className=\"home-div\">\r\n      <Navbar isHome={isHome} setRequestList={setRequestList} setHavePartner={setHavePartner}  requestList={requestList} havePartner={havePartner} handleSendReq={handleSendReq} formRef = {formRef} handleLogout={handleLogout} handleSendReq={handleSendReq} acceptRef={acceptRef}/>\r\n      <div className=\"home-background\" style={{backgroundImage:\"url(\"+backgroundUrl+\")\"}}>\r\n        <div className=\"home-overlay\">\r\n            <div className=\"home-widget anniverse\">\r\n            {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {specialWidget?\r\n            <div className=\"home-event-div\" onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"special\")}>\r\n              <IconButton id=\"home-delete-specialWidget\" onClick={()=>handleDeleteWidget(\"special\")}><ClearIcon/></IconButton>\r\n              <div className=\"home-event-title\">\r\n                <h3>Up Coming Event:</h3><br/>\r\n                <h1>{upComingEvent}</h1>\r\n              </div>\r\n              <div className=\"home-event-day\">\r\n              <h1>{upComingDay} days left</h1>\r\n              </div>\r\n            </div>\r\n            :\r\n            <div className=\"home-noWidget\">\r\n              <IconButton id=\"home-add-widget\" onClick={()=>handleCreateWidget(\"special\")} onMouseOver={()=>onHoverAddWidget(\"special\")} onMouseOut={()=>offHoverAddWidget(\"special\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-special\">Add this widget to get to know up coming special events</div>\r\n            </div>}\r\n            </div>\r\n            <div className=\"home-widget days\">\r\n            {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {dayWidget?\r\n            <div className=\"home-totalDay-widget\"  onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"day\")}><IconButton id=\"home-delete-dayWidget\" onClick={()=>handleDeleteWidget(\"day\")}><ClearIcon/></IconButton><h1>{totalDay} DAYS</h1></div>\r\n            :\r\n            <div className=\"home-noWidget\"  id=\"noDayWidget\">\r\n              <IconButton id=\"home-add-widget\"  onClick={()=>handleCreateWidget(\"day\")} onMouseOver={()=>onHoverAddWidget(\"day\")} onMouseOut={()=>offHoverAddWidget(\"day\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-day\">Add this widget to get to know total days together</div>\r\n            </div>}\r\n            {isSetting&&<div className=\"home-setDate\">\r\n              <div className=\"home-setDate-title\"><h2>Please set the date of you with your partner</h2></div>\r\n            <form onSubmit={handleUpdateDate} ref={dateRef}>\r\n            <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfRelation\"\r\n              label=\"Date of Relationship\"\r\n              name=\"dateOfRelation\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={date}\r\n              onChange={(date) => {setDate(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>\r\n          <Button type=\"submit\" id=\"home-submit-day\">SUBMIT</Button>\r\n          </form>\r\n            </div>}\r\n            </div>\r\n            <div className=\"home-widget special\">\r\n              {!havePartner&&<div className=\"home-noPartner\">You need to have a partner to access this widget</div>}\r\n            {bdayWidget?\r\n            <div className=\"home-dob-div\" onMouseOut={offHoverWidget} onMouseOver={()=>onHoverWidget(\"bday\")}>\r\n              <IconButton id=\"home-delete-bdayWidget\" onClick={()=>handleDeleteWidget(\"bday\")}><ClearIcon/></IconButton>\r\n              <div className=\"home-bday-div you\">\r\n              <div className=\"home-bday-name\"><h1>{userInfo.nickname}</h1></div>\r\n                <div className=\"home-bday-border\">\r\n                  <div className=\"home-bday-calander\">\r\n                    <h2 style={{borderBottom:\"1px solid white\"}}>{userBday}</h2><br/><br/><br/>\r\n                    <h1>{yourCountDown} days left</h1>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"home-bday-div partner\">\r\n              <div className=\"home-bday-name\"><h1>{partnerInfo.nickname}</h1></div>\r\n                <div className=\"home-bday-border\">\r\n                  <div className=\"home-bday-calander\">\r\n                    <h2 style={{borderBottom:\"1px solid white\"}}>{partnerBday}</h2><br/><br/><br/>\r\n                    <h1>{partnerCountDown} days left</h1>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n            :\r\n            <div className=\"home-noWidget\">\r\n              <IconButton id=\"home-add-widget\" onClick={()=>handleCreateWidget(\"bday\")} onMouseOver={()=>onHoverAddWidget(\"bday\")} onMouseOut={()=>offHoverAddWidget(\"bday\")}><AddIcon fontSize=\"large\"/></IconButton>\r\n              <div className=\"home-add-hover\" id=\"hover-bday\">Add this widget to get to know each other birthdays</div>\r\n            </div>}\r\n            </div>\r\n\r\n        </div>\r\n            <div className=\"foreground\" id=\"foreground\"></div>\r\n      </div>\r\n    </div>\r\n    \r\n}","import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport 'date-fns';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {\r\n  MuiPickersUtilsProvider,\r\n  KeyboardDatePicker,\r\n} from '@material-ui/pickers';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport '../css/profileInfo.css';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddAPhotoIcon from '@material-ui/icons/AddAPhoto';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nconst genders = [\r\n    {\r\n      value: 'male',\r\n      label: 'male',\r\n    },\r\n    {\r\n      value: 'female',\r\n      label: 'female',\r\n    },\r\n  ];\r\n\r\n  const useStyles = makeStyles((theme) => ({\r\n    formControl: {\r\n      marginTop:20,\r\n      minWidth: \"90%\",\r\n    },\r\n  }));\r\nexport default function UserProfileForm()\r\n{\r\n    const [nickname,setNickname] = useState(\"\");\r\n    const [bio,setBio] = useState(\"\");\r\n    const [croppedUrl, setCroppedUrl] = useState();\r\n    const [uploaded,setUploaded] = useState(false);\r\n    const [dob,setDob] = useState(new Date());\r\n    const [gender,setGender] = useState('male');\r\n    const [newProfile,setNewProfile]=useState(false);\r\n    const [partner,setPartner] = useState();\r\n    const [dateOfRelationship,setDateOfRelationship] = useState();\r\n    const [userId,setUserId] = useState();\r\n    const formRef = useRef();\r\n    const classes = useStyles();\r\n\r\n    useEffect(() => {\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n          if (res.isLoggedIn === false) {\r\n            window.open('/login', '_self');\r\n          } \r\n          else if(res.user.nickname)\r\n          {\r\n            setUserId(res.user._id);\r\n            setNickname(res.user.nickname);\r\n            setDob(res.user.dateOfBirth);\r\n            setGender(res.user.gender);\r\n            setBio(res.user.bio);\r\n            if(res.user.partner!==null)\r\n            {\r\n            setPartner(res.user.partner);\r\n            if(res.user.dateOfRelationship)\r\n            {\r\n                setDateOfRelationship(res.user.dateOfRelationship);\r\n            }\r\n            }\r\n          }\r\n        })\r\n        return function cancel() {\r\n          ac.abort()\r\n        }\r\n      },[]);\r\n      useEffect(() => {\r\n        const ac = new AbortController();\r\n      axios({\r\n        method:'get',\r\n        url:'/gridFs/checkExists',\r\n        headers: {'Content-Type': 'multipart/form-data'}\r\n      })\r\n      .then(res=>res.data)\r\n      .catch(err=>console.log(err))\r\n      .then(res=>{\r\n        if(res===true)\r\n        {\r\n           document.getElementById(\"overlay\").style.visibility=\"hidden\";\r\n        }\r\n      })\r\n      return function cancel() {\r\n        ac.abort()\r\n      }\r\n    },[]);\r\n      if(uploaded)\r\n      {\r\n        const reader = new FileReader();\r\n        reader.onload = function(event){\r\n          if(event.target.result===null)\r\n          {\r\n            return;\r\n          }\r\n          document.getElementById(\"avatarImg\").setAttribute(\"src\",event.target.result);\r\n        }\r\n        reader.readAsDataURL(croppedUrl);\r\n       \r\n      }\r\n      async function handleSubmit(event) {\r\n        if(uploaded){axios.get('/gridFs/deleteImg');}\r\n        event.preventDefault();\r\n        \r\n        const formData = new FormData(formRef.current); \r\n        partner&&formData.append('partner',partner);\r\n         await  axios({\r\n            method:'post',\r\n            url:'/user/info',\r\n            data:formData,\r\n            headers: {'Content-Type': 'multipart/form-data'}\r\n          })\r\n          window.location.href = \"/\";\r\n      }\r\n\r\n      function toggleNewFile(event)\r\n      {\r\n        const file = event.target.files[0];\r\n         if(file===undefined)\r\n        {\r\n          return;\r\n        }\r\n        else\r\n        {\r\n         document.getElementById(\"overlay\").style.visibility=\"hidden\";\r\n         setCroppedUrl(file);\r\n         setUploaded(true);\r\n        }\r\n      }\r\n      \r\n      function uploadFile()\r\n      {\r\n         document.getElementById(\"file\").click();\r\n      }\r\n\r\n    return <div className=\"infoForm\" id=\"infoForm\">\r\n        \r\n    <form onSubmit={handleSubmit} ref={formRef}>\r\n      <div id=\"avatar\">\r\n       <ReactAvatar\r\n        id=\"overlay\"\r\n      />\r\n       <img src={uploaded?\"\":\"/gridFs/getProfile\"} id=\"avatarImg\"/>\r\n      </div>\r\n      <div className=\"fileIpt\">\r\n          <input type=\"file\" name=\"file\" id=\"file\" onChange={toggleNewFile}/>\r\n          <IconButton\r\n          id=\"uploadBtn\"\r\n          onClick={uploadFile}\r\n          >\r\n            <AddAPhotoIcon/>\r\n          </IconButton>\r\n      </div>\r\n          <br/>\r\n          <div className=\"infoDiv\">\r\n          <div className=\"home-userId\"><h3>Your ID: </h3>{userId}</div><br/>\r\n            <TextField\r\n            id=\"nickname\"\r\n            className=\"inputFields\"\r\n            label=\"Nickname\"\r\n            variant=\"outlined\"\r\n            name=\"nickname\"\r\n            value={nickname}\r\n            onChange={(e) => {setNickname(e.target.value)}}/>\r\n            <br/>\r\n            <FormControl variant=\"outlined\" className={classes.formControl}>\r\n            <InputLabel id=\"demo-simple-select-outlined-label\">Gender</InputLabel>\r\n            <Select\r\n              labelId=\"demo-simple-select-outlined-label\"\r\n              id=\"demo-simple-select-outlined\"\r\n              value={gender}\r\n              onChange={(e) => {setGender(e.target.value)}}\r\n              label=\"Gender\"\r\n              name=\"gender\"\r\n            >\r\n              {genders.map((option) => (\r\n                <MenuItem key={option.value} value={option.value}>\r\n                  {option.label}\r\n                </MenuItem>\r\n              ))}\r\n            </Select>\r\n          </FormControl> \r\n          <br />\r\n          <MuiPickersUtilsProvider utils={DateFnsUtils} style={{marginLeft:\"10px\"}}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfBirth\"\r\n              label=\"Date of birth (mm/dd/yyyy)\"\r\n              name=\"dateOfBirth\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={dob}\r\n              onChange={(date) => {setDob(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>\r\n          {dateOfRelationship&&<MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n            <KeyboardDatePicker\r\n              margin=\"normal\"\r\n              id=\"dateOfRelation\"\r\n              label=\"Date of relationship\"\r\n              name=\"dateOfRelationship\"\r\n              format=\"MM/dd/yyyy\"\r\n              value={dateOfRelationship}\r\n              onChange={(date) => {setDateOfRelationship(date)}}\r\n              KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n              }}\r\n            />\r\n          </MuiPickersUtilsProvider>}\r\n          \r\n          <br/>    \r\n        \r\n     \r\n          <TextField\r\n            id=\"bio\"\r\n            label=\"Bio\"\r\n            variant=\"outlined\"\r\n            name=\"bio\"\r\n            className=\"inputFields\"\r\n            value={bio}\r\n            onChange={(e) => {setBio(e.target.value)}}/>\r\n            <br/>\r\n            \r\n          <Button type=\"submit\" id=\"submitInfo\">\r\n              submit\r\n          </Button>\r\n          </div>\r\n        </form>\r\n    </div>\r\n}","import '../css/inputBox.css';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function InputBox(props)\r\n{\r\n    const {handleSendMsg} = props\r\n\r\n\r\n    return<div className=\"foot\">\r\n        <form onSubmit={handleSendMsg} className=\"input-form\">\r\n        <input type=\"text\" className=\"msg\" placeholder=\"Type a message...\" id=\"chat\"/>\r\n        <IconButton type=\"submit\" id=\"sendIcon\"><SendIcon/></IconButton>\r\n        </form>\r\n    \r\n    </div>\r\n}","import '../css/chatNav.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport PhotoIcon from '@material-ui/icons/Photo';\r\nimport { useEffect, useState,useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function ChatNav(props)\r\n{\r\n    const {toggleBackHome,partnerInfo,partnerStatus,toggleVideoCall,callAccepted,setBackgroundUrl} = props\r\n\tconst [readyDisplay,setReadyDisplay] = useState(false);\r\n\tconst [isOnline,setIsOnline] = useState(false);\r\n\tconst [openMore,setOpenMore] = useState(false);\r\n\r\n\r\n\tconst imgRef = useRef();\r\n\r\n\tuseEffect(()=>{\r\n\t\tconst ac = new AbortController();\r\n\t\tif(partnerInfo)\r\n\t\t{\r\n\t\t\tsetReadyDisplay(true);\r\n\t\t}\r\n\t\treturn function cancel() {\r\n            ac.abort();\r\n          }\r\n\t},[partnerInfo])\r\n\r\n\t\tif(partnerStatus&&partnerInfo)\r\n\t\t{\r\n\t\t\tpartnerStatus.map(user=>{\r\n\t\t\t\tif(user===partnerInfo._id)\r\n\t\t\t\t{\t\r\n\t\t\t\t\tsetIsOnline(true);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t\r\n\r\n\tasync function toggleChangeBackground(event)\r\n\t{\r\n\t\tawait axios.get('/chat/deleteBackground')\r\n\t\tconst formdata = new FormData();\r\n\t\tformdata.append('file',event.target.files[0])\r\n\t\tawait axios({\r\n\t\t\tmethod:'post',\r\n\t\t\turl:'/chat/uploadChatImg',\r\n\t\t\tdata:formdata,\r\n\t\t\theaders:{'Content-Type': 'multipart/form-data'}\r\n\t\t})\r\n\t\twindow.location.reload();\r\n\t}\r\n\r\n    return<div className=\"chatNav-div\">\r\n\t\t{isOnline&&<h1>ONLINE</h1>}\r\n\t\t{openMore&&<div className=\"chatNav-moreOption\">\r\n\t\t\t<div className=\"chatNav-changeBackground\" onClick={()=>document.getElementById('chatNav-file').click()}> \r\n\t\t\t\t<PhotoIcon/>\r\n\t\t\t\t<input type=\"file\" name=\"file\" hidden id=\"chatNav-file\" onChange={toggleChangeBackground}/>\t\r\n\t\t\t</div>\r\n\t\t</div>}\r\n        <div className=\"head\">\r\n\t\t\t\t<div className=\"user\">\r\n\t\t\t\t\t<div className=\"avatar\" id=\"avatarStatus\">\r\n\t\t\t\t\t\t<img src=\"/gridFs/getPartnerProfile\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t\t{readyDisplay&&<div className=\"name\">{partnerInfo.nickname}</div>}\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul id=\"bar_tool\">\r\n\t\t\t\t\t<IconButton id=\"iconBtn\" onClick={toggleVideoCall}><span className=\"alink\"><VideocamIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t\t<IconButton id=\"iconBtn\" onClick={()=>setOpenMore(!openMore)}><span className=\"alink\"><MoreHorizIcon id=\"contact\"/></span></IconButton>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n    </div>\r\n}","\r\nimport '../css/chatBubble.css';\r\n\r\n\r\nexport default function ChatBubble(props)\r\n{\r\n    const{textInfo,user}= props;\r\n    if(textInfo&&textInfo.userId===user._id)\r\n    {       \r\n        return<div className=\"bubble-div righter\">\r\n           <div className = \"context\">\r\n            <p>{textInfo&&textInfo.text}</p>\r\n           </div>\r\n        </div>\r\n    }\r\n    else{\r\n        return<div className=\"bubble-div lefter\">\r\n            <div className=\"img-div\">\r\n            <img src=\"/gridFs/getPartnerProfile\"/>\r\n            </div>\r\n            <div className = \"context\">\r\n            <p>{textInfo&&textInfo.text}</p>\r\n           </div>\r\n        </div>\r\n    }\r\n}","import React, { createContext, useState, useRef, useEffect } from 'react';\r\nimport { io } from 'socket.io-client';\r\nimport Peer from 'simple-peer';\r\n\r\nconst SocketContext = createContext();\r\n\r\nconst ENDPOINT='localhost:5000';\r\nlet socket;\r\nlet isCaller = false;\r\nlet name ;\r\nconst ContextProvider = ({ children }) => {\r\n  const [callAccepted, setCallAccepted] = useState(false);\r\n  const [callEnded, setCallEnded] = useState(false);\r\n  const [stream, setStream] = useState();\r\n  // const [name, setName] = useState('');\r\n  const [call, setCall] = useState({});\r\n  const [userId,setUserId] = useState('');\r\n  const [roomId,setRoomId] = useState('');\r\n  const [newMessage,setNewMessage] = useState([]);\r\n  const [partnerId,setPartnerId] = useState();\r\n  const [isCalling,setIsCalling] = useState(false);\r\n  const [noCall,setNoCall] = useState(false);\r\n  const [isOnline,setIsOnline] = useState(true);\r\n  const [users,setUsers] = useState();\r\n\r\n  const myVideo = useRef();\r\n  const userVideo = useRef();\r\n  const connectionRef = useRef();\r\n\r\n\r\n   \r\n\r\n  useEffect(() => {\r\n\r\n    socket = io(ENDPOINT);\r\n     \r\n    socket.on('chatMsg',(chat)=>{\r\n        setNewMessage(chat);\r\n    })\r\n\r\n    socket.on('startCalling',e=>{\r\n      callUser();\r\n    })\r\n    socket.on('start',e=>{\r\n      setIsCalling(true);\r\n    })\r\n\r\n    socket.on('no',e=>{\r\n      setNoCall(true);\r\n      alert('your partner is not online!')\r\n    })\r\n  }, []);\r\n\r\n  useEffect(()=>{\r\n    \r\n    \r\n\r\n    if(!isCalling)\r\n    {\r\n      return null;\r\n    }\r\n     \r\n\r\n   socket.on('returnDiv',e=>{\r\n      document.getElementById('chat-body').style.marginRight = \"auto\";\r\n      document.getElementById('chat-body').style.marginLeft = \"auto\";\r\n      document.getElementById(\"video-div\").style.visibility = \"hidden\";\r\n      \r\n   })\r\n\r\n   socket.on('calluser',async ({ from, name: callerName, signal })=> {\r\n    setCall({ isReceivingCall: true, from, name: callerName, signal });\r\n    \r\n  });\r\n\r\n   socket.on('moveDiv',e=>{\r\n    document.getElementById('chat-body').style.marginRight = \"auto\";\r\n    document.getElementById('chat-body').style.marginLeft = \"10px\";\r\n    document.getElementById(\"video-div\").style.visibility = \"visible\";\r\n      \r\n      \r\n   })\r\n\r\n    socket.on('dc',e=>{\r\n      leaveCall();\r\n    })\r\n\r\n  },[isCalling])\r\n\r\n  // useEffect(()=>{\r\n  //   if(callAccepted)\r\n  //   {\r\n  //     navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n  //     .then((currentStream) => {\r\n  //     setStream(currentStream);\r\n  //     myVideo.current.srcObject = currentStream;\r\n  //     });\r\n  //   }\r\n  // },[callAccepted])\r\n\r\n  const startCall  =()=>{\r\n    socket.emit('calling');\r\n  }\r\n  \r\n  const joinRoom = (roomId,userId,nickname) =>{\r\n      socket.emit('join',{userId,roomId});\r\n      setUserId(userId);\r\n      setRoomId(roomId);\r\n      // setName(nickname); \r\n      name=nickname;\r\n  }\r\n  let audio =true;\r\n  const muteAudio = ()=>{\r\n    audio  = !audio;\r\n    stream.getAudioTracks()[0].enabled = audio;\r\n  }\r\n\r\n  let video =true;\r\n  const muteVideo = ()=>{\r\n    video  = !video;\r\n    stream.getVideoTracks()[0].enabled = video;\r\n  }\r\n\r\n  const sendMsg = (msg,nickname) =>{\r\n      socket.emit('sendMsg',{msg,userId,nickname,roomId})\r\n  }\r\n\r\n  const declineCall = ()=>{\r\n    setCallEnded(true);\r\n    if(isCaller)\r\n    {\r\n      document.getElementById('chat-body').style.marginRight = \"auto\";\r\n      document.getElementById('chat-body').style.marginLeft = \"auto\";\r\n      document.getElementById(\"video-div\").style.visibility = \"hidden\";\r\n    }\r\n    setIsCalling(false);\r\n    window.location.reload();\r\n  }\r\n\r\n  const answerCall = async() => {\r\n    let local;\r\n    await navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n    .then((currentStream) => {\r\n    setStream(currentStream);\r\n    local = currentStream;\r\n    myVideo.current.srcObject = currentStream;\r\n    }); \r\n    setCallAccepted(true);\r\n    const peer = new Peer({ initiator: false, trickle: false, stream:local });\r\n    peer.on('signal', (data) => {\r\n      socket.emit('answercall', { signal: data, to: call.from });\r\n    });\r\n\r\n    peer.on('stream', (currentStream) => {\r\n      console.log(\"this is the remote stream: \" + currentStream);\r\n      userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    peer.signal(call.signal);\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n\r\n  const callUser = async() => {\r\n    if(noCall)\r\n    {\r\n      return null;\r\n    }\r\n    let local;\r\n    await navigator.mediaDevices.getUserMedia({ video: true, audio: true })\r\n    .then((currentStream) => {\r\n    setStream(currentStream);\r\n    local = currentStream;\r\n    myVideo.current.srcObject = currentStream;\r\n    }); \r\n    isCaller = true;\r\n    const peer = new Peer({ initiator: true, trickle: false, stream:local });\r\n    peer.on('signal', (data) => {\r\n      socket.emit('calluser', {  signalData: data,  name });\r\n    });\r\n    peer.on('stream', (currentStream) => {\r\n      userVideo.current.srcObject = currentStream;\r\n    });\r\n\r\n    socket.on('callaccepted', (signal) => {\r\n      console.log('call accepted: ' + signal);\r\n      setCallAccepted(true);\r\n      peer.signal(signal);\r\n    });\r\n\r\n    connectionRef.current = peer;\r\n  };\r\n\r\n  const leaveCall = () => {\r\n    setCallEnded(true);\r\n    if(isCaller)\r\n    {\r\n      document.getElementById('chat-body').style.marginRight = \"auto\";\r\n      document.getElementById('chat-body').style.marginLeft = \"auto\";\r\n      document.getElementById(\"video-div\").style.visibility = \"hidden\";\r\n    }\r\n    if(connectionRef.current)connectionRef.current.destroy();\r\n\r\n    window.location.reload();\r\n  };\r\n\r\n  return (\r\n    <SocketContext.Provider value={{\r\n      call,\r\n      callAccepted,\r\n      myVideo,\r\n      newMessage,\r\n      sendMsg,\r\n      joinRoom,\r\n      userVideo,\r\n      stream,\r\n      name,\r\n      callEnded,\r\n      callUser,\r\n      leaveCall,\r\n      answerCall,\r\n      users,\r\n      isOnline,\r\n      startCall,\r\n      muteAudio,\r\n      muteVideo,\r\n      declineCall,\r\n      isCaller,\r\n    }}\r\n    >\r\n      {children}\r\n    </SocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport { ContextProvider, SocketContext };","import DoneIcon from '@material-ui/icons/Done';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { useContext, useEffect } from 'react';\r\nimport {SocketContext} from '../SocketContext';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { Icon } from '@material-ui/core';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\n\r\nexport default function VideoRespond(props)\r\n{\r\n\r\n    const{answerCall,call,declineCall} = useContext(SocketContext);\r\n\r\n\r\n   \r\n\r\n\r\n   async function answer()\r\n    {\r\n        document.getElementById('chat-body').style.marginRight = \"auto\";\r\n        document.getElementById('chat-body').style.marginLeft = \"10px\";\r\n        document.getElementById(\"video-div\").style.visibility = \"visible\";\r\n        answerCall();\r\n        \r\n    }\r\n    return <div className=\"respond\">\r\n        <Avatar src=\"/gridFs/getPartnerProfile\" id=\"caller\"/>\r\n        <div className=\"description\">\r\n            <h3>{call.name} wants to call you</h3>\r\n        </div>\r\n        <div className=\"choice\">\r\n        <IconButton id=\"choice-btn\" onClick={answer}><DoneIcon/></IconButton>\r\n        <IconButton id=\"choice-canc\" onClick={declineCall}><ClearIcon/></IconButton>\r\n        </div>\r\n    </div>\r\n}","import { useContext, useEffect,useRef, useState } from \"react\"\r\nimport { SocketContext } from \"../SocketContext\";\r\nimport '../css/videoCall.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport VideocamOffIcon from '@material-ui/icons/VideocamOff';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport CallEndIcon from '@material-ui/icons/CallEnd';\r\nimport MicOffIcon from '@material-ui/icons/MicOff';\r\nimport VideocamIcon from '@material-ui/icons/Videocam';\r\n\r\nexport default function VideoCall()\r\n{\r\n    const {callAccepted,myVideo,userVideo,callEnded,leaveCall,muteAudio,muteVideo,declineCall} = useContext(SocketContext);\r\n        const [isMuted,setIsMuted] = useState(false);\r\n        const [isDisplayed,setIsDisplayed] = useState(true);\r\n   \r\n \r\n   \r\n   function handleMute()\r\n   {\r\n           setIsMuted(!isMuted);\r\n           muteAudio();\r\n   }\r\n   function handleDisplay()\r\n   {\r\n           setIsDisplayed(!isDisplayed);\r\n           muteVideo();\r\n   }\r\n        return <div className=\"video-div\" id=\"video-div\">\r\n\r\n                \r\n                <div className=\"vid-call\">\r\n                 <video playsInline muted ref={myVideo} autoPlay />        \r\n                </div>\r\n                {callAccepted&&!callEnded&&\r\n                <div className=\"vid-call1\">\r\n                <video playsInline muted ref={userVideo} autoPlay />\r\n                </div>}\r\n                <div className=\"option-div\">\r\n                <IconButton onClick={handleDisplay} className=\"option-btn\" id=\"display\">{isDisplayed?<VideocamIcon/>:<VideocamOffIcon/>}</IconButton>\r\n                <IconButton onClick={callAccepted?leaveCall:declineCall} className=\"option-btn\" id=\"end\"><CallEndIcon fontSize=\"inherit\"/></IconButton>\r\n                <IconButton onClick={handleMute} className=\"option-btn\">{isMuted?<MicOffIcon/>:<MicIcon/>}</IconButton>\r\n                </div>\r\n        </div>\r\n}","import {useEffect, useState,useRef, useContext} from 'react';\r\nimport io from 'socket.io-client';\r\nimport axios from 'axios';\r\nimport InputBox from './InputBox';\r\nimport '../css/chatroom.css';\r\nimport ChatNav from './ChatNav';\r\nimport ChatBubble from './ChatBubble';\r\nimport { Scrollbars } from 'react-custom-scrollbars-2';\r\nimport { SocketContext } from \"../SocketContext\";\r\nimport VideoRespond from './VideoRespond';\r\nimport VideoCall from './VideoCall';\r\nimport NavBar from './Navbar';\r\n\r\n\r\nexport default function ChatRoom(props)\r\n{\r\n    const [userInfo,setUserInfo] = useState();\r\n    const [userId,setUserId] = useState();\r\n    const [roomId,setRoomId] = useState();\r\n    const [text,setText] = useState(\"\");\r\n    const [userNickname,setUserNickname] = useState();\r\n    const [messages,setMessages] = useState([]);\r\n    const [partnerInfo,setPartnerInfo] = useState([]);\r\n    const [partnerStatus,setPartnerStatus] = useState();\r\n    const [havePartner,setHavePartner] = useState(false);\r\n    const [scrollDir,setScrollDir] = useState(-1);\r\n\r\n    // const [isCalling,setIsCalling] = useState();\r\n    const {joinRoom,sendMsg,newMessage,call,callAccepted,startCall} = useContext(SocketContext);\r\n\r\n    useEffect(()=>{\r\n        const ac = new AbortController();\r\n        axios.get('/auth/isLoggedIn')\r\n        .then(res =>res.data)\r\n        .catch(err => console.log(err))\r\n        .then(res => {\r\n            if(res.isLoggedIn)\r\n            {\r\n              axios.get('/chat/checkExist')\r\n              .then(res.data)\r\n              .catch(err=>console.log(err))\r\n              .then(res=>{\r\n                if(res.data)\r\n                {\r\n                  document.getElementById('msgBox').style.backgroundImage ='url(\"/chat/getChatBackground\")';\r\n                  document.getElementById('msgBox').style.backgroundSize ='cover';\r\n                }\r\n                else\r\n                {\r\n                  document.getElementById('msgBox').style.backgroundImage = 'url(\"https://wallpapercave.com/wp/wp4779329.png\")';\r\n                }\r\n              })\r\n              \r\n              let userId = res.user._id;\r\n              let partner = res.user.partner;\r\n              let nickname = res.user.nickname;\r\n              setPartnerInfo(res.partnerInfo)\r\n                if(res.user.partner!==null)\r\n                { \r\n                  setHavePartner(true);\r\n                  axios({ \r\n                    method:'get',\r\n                    url:'/user/getRoomId',\r\n                    headers: {'Content-Type': 'multipart/form-data'}\r\n                  })\r\n                  .then(res=>res.data)\r\n                  .catch(err=>console.log(err))\r\n                  .then(res=>{\r\n                    setMessages(res.chatInfo.chats.reverse().map(chat=>{\r\n                      return chat;\r\n                    }))\r\n                    let roomId = res.roomInfo._id;\r\n                    setRoomId(roomId);\r\n                    if(nickname)\r\n                    {\r\n                       joinRoom(roomId,userId,nickname);  \r\n                    }\r\n                  })\r\n                }\r\n                setUserId(res.user._id);\r\n                setUserInfo({...res.user});\r\n                setUserNickname(res.user.nickname);\r\n            }\r\n        });\r\n        return function cancel() {\r\n            ac.abort();\r\n          }\r\n    },[])\r\n\r\n    useEffect(()=>{\r\n      setMessages(prevData=>{\r\n        return[...prevData,newMessage]\r\n      })\r\n    },[newMessage]);\r\n    useEffect(()=>{\r\n      if(scrollDir===-1)\r\n      {\r\n        document.getElementById('msgBox').scrollTo(0,document.getElementById('msgBox').scrollHeight);      \r\n      }\r\n    },[messages])\r\n    \r\n    function handleSendMsg(event)\r\n    {\r\n      let msg = document.getElementById(\"chat\").value;\r\n      event.preventDefault();\r\n      if(msg.length>0&&roomId)\r\n      {\r\n        sendMsg(msg,userId,userNickname,roomId);\r\n        setText(\"\");\r\n      }\r\n      else{\r\n        alert(\"You must type something\");\r\n      }\r\n      document.getElementById(\"chat\").value = null;\r\n    }\r\n\r\n    function toggleBackHome()\r\n    {\r\n      window.open('/','_self');\r\n    }\r\n\r\n    async function toggleVideoCall()\r\n    {\r\n      await startCall();\r\n      // await callUser();\r\n    };\r\n\r\n\r\n    return<div className=\"chat-div\">\r\n      <NavBar havePartner={havePartner}/>\r\n        {call.isReceivingCall &&!callAccepted&&<VideoRespond/>}\r\n     <VideoCall/>\r\n     <div className=\"chat-container\">\r\n     <div className=\"chat-body\" id=\"chat-body\">\r\n     <ChatNav  toggleBackHome={toggleBackHome} partnerInfo={partnerInfo} partnerStatus={partnerStatus} toggleVideoCall={toggleVideoCall}/>\r\n    <div className=\"chat-messageBox-div\" id=\"msgBox\">\r\n        <div className=\"chat-messageBox\">\r\n      {messages&&userInfo&&messages.map((chat,index)=>{\r\n              return <ChatBubble key={index}textInfo={chat} user={userInfo}/>\r\n      })} \r\n       </div>\r\n    </div>\r\n    <InputBox handleSendMsg={handleSendMsg}/>\r\n     </div>\r\n     </div>\r\n  </div>\r\n}","import { useEffect, useState } from \"react\";\r\nimport axios from 'axios';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function VideoList(props)\r\n{\r\n    const {handleChooseMovie,socket} = props;\r\n    const [files,setFiles] = useState([]);\r\n    const [dropdown,setDropdown] = useState(false);\r\n    useEffect(()=>{\r\n        axios.get('/videoFs/getAllVideos')\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            let temp = [];\r\n            for(let i=0;i<res.length;i++)\r\n            {\r\n                temp.push(res[i]);\r\n            }\r\n            setFiles(temp);\r\n        })\r\n\r\n    },[])   \r\n    function handleDropDown()\r\n    {\r\n        let state = !dropdown;\r\n        if(state)\r\n        {\r\n            document.getElementById('video-file').style.top=0;\r\n        }\r\n        else\r\n        {\r\n            document.getElementById('video-file').style.top  = \"-68px\";\r\n        }\r\n        setDropdown(!dropdown);\r\n    }\r\n    async function handleDeleteVideo(videoId)\r\n    {\r\n        const formdata = new FormData();\r\n        formdata.append('videoId',videoId);\r\n        await axios({\r\n            method:'post',\r\n            url:'/videoFs/deleteVideo',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            console.log(res);\r\n            if(res)\r\n            {\r\n              setFiles(prev=>{\r\n                  return prev.filter(file=>{\r\n                      return file._id!==videoId\r\n                  })\r\n              })\r\n              if(socket)socket.emit('deletedVideo');\r\n           }\r\n        })\r\n    }\r\n\r\n    return<div className=\"video-file\" id=\"video-file\">\r\n        <div className=\"video-scroll\">\r\n        {files.map(file=>{\r\n            return<div className=\"video-list-div\">\r\n                \r\n                <Button key={file._id} variant=\"outlined\" onClick={()=>handleChooseMovie(file.filename)} id=\"list\">{file.aliases}</Button> \r\n                <button id=\"video-delete\" onClick={()=>handleDeleteVideo(file._id)}>x</button>\r\n            </div>  \r\n        })} \r\n        </div>\r\n        <IconButton\r\n        size=\"small\"\r\n        id=\"drop-down\"\r\n        onClick={handleDropDown}\r\n        >\r\n        {dropdown?<ArrowDropUpIcon/>:<ArrowDropDownIcon/>}\r\n        </IconButton>\r\n    </div>\r\n\r\n}","import ArrowLeftIcon from '@material-ui/icons/ArrowLeft';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport { useState,useRef } from 'react';\r\nimport axios from 'axios';\r\n\r\nexport default function VideoUploadDiv(props)\r\n{\r\n    const [openUpload,setOpenUpload] = useState(false);\r\n    const [uploadProgress,setUploadProgress] = useState(false);\r\n\r\n    const formRef = useRef();\r\n\r\n    function handleUploadDiv()\r\n    {\r\n      let state = !openUpload;\r\n      if(state)\r\n      {\r\n          document.getElementById('upload-file').style.marginLeft=0;\r\n      }\r\n      else\r\n      {\r\n          document.getElementById('upload-file').style.marginLeft=\"-380px\";\r\n      }\r\n      setOpenUpload(!openUpload);\r\n    }\r\n\r\n    function displayFileName(event)\r\n  {\r\n     document.getElementById('file-name').textContent= event.target.files[0].name;\r\n  }\r\n\r\n  async function handleUploadVideo(event)\r\n  {\r\n      event.preventDefault();\r\n      if(document.getElementById('video').value===\"\")\r\n      {\r\n          return;\r\n      }\r\n      setUploadProgress(true);\r\n      const formdata = new FormData(formRef.current);\r\n      await axios({\r\n          method:'post',\r\n          url:'/videoFs/upload',\r\n          data:formdata,\r\n          headers: {'Content-Type': 'multipart/form-data'},\r\n          onUploadProgress:progressEvent=>{\r\n            const progress=(progressEvent.loaded/progressEvent.total)*100\r\n            document.getElementById(\"uploadFileProgress\").style.width = progress+\"%\";\r\n            if(progress===100)\r\n            {\r\n                window.location.reload();\r\n            }\r\n          },\r\n      })\r\n  }\r\n\r\n    return <div className=\"upload-file\" id=\"upload-file\">\r\n        <form onSubmit={handleUploadVideo} ref={formRef}>\r\n        <IconButton\r\n        size=\"medium\"\r\n        onClick={()=>document.getElementById('video').click()}\r\n        style={{color:\"white\"}}\r\n        >\r\n        <CloudUploadIcon/>\r\n        </IconButton>\r\n        <input type=\"file\" name=\"video\" id=\"video\" hidden onChange={displayFileName}/>\r\n        <Button\r\n        variant=\"contained\"\r\n        color=\"default\"\r\n        type=\"submit\"   \r\n      >\r\n        Upload\r\n      </Button> \r\n        </form>\r\n        <p id=\"file-name\" style={{color:\"rgb(56, 245, 71)\"}}></p>\r\n        {uploadProgress&&\r\n        <div className=\"uploadProgress\">   \r\n            <div className=\"progressBar\" id=\"uploadFileProgress\"> \r\n            </div>\r\n        </div>}\r\n        <IconButton\r\n        size=\"small\"\r\n        id=\"openUploadDiv\"\r\n        onClick={handleUploadDiv}\r\n        >{openUpload?\r\n            <ArrowLeftIcon/>\r\n            :\r\n            <ArrowRightIcon/>\r\n         }\r\n        </IconButton>\r\n    </div>\r\n}","import ReactPlayer from 'react-player'\r\nimport '../css/videoPlayer.css';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport PauseIcon from '@material-ui/icons/Pause';\r\nimport Button from '@material-ui/core/Button';\r\nimport ArrowLeftIcon from '@material-ui/icons/ArrowLeft';\r\nimport VideoList from './VideoList';\r\nimport VideoUploadDiv from './VideoUploadDiv';\r\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\r\nimport VolumeMuteIcon from '@material-ui/icons/VolumeMute';\r\nimport VolumeOffIcon from '@material-ui/icons/VolumeOff'; \r\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\n\r\nimport { FullScreen, useFullScreenHandle } from \"react-full-screen\";\r\nimport io from 'socket.io-client';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nlet socket;\r\nexport default function Cinema()\r\n{\r\n  const ENDPOINT = 'localhost:5000';\r\n  const handle = useFullScreenHandle();\r\n  const [ready,setReady] = useState(false);\r\n  const [play,setPlay] =useState(false);\r\n  const [openUrl,setOpenUrl] = useState(false);\r\n  const [url,setUrl] = useState();\r\n  const [buffering,setBuffering] = useState(true);\r\n  const [volume,setVolume] = useState(0.5);\r\n  const [isMuted,setIsMuted] = useState(false);\r\n  const [isLoud,setIsLoud] = useState(false);\r\n  const [isFullScreen,setIsFullScreen] = useState(false);\r\n\r\n  const videoRef = useRef();\r\n  const urlRef = useRef(\"\");\r\n  const readyToPlay = useRef(false);\r\n  const initialRun = useRef(true);\r\n\r\n\r\n  useEffect(async()=>{\r\n      const ac = new AbortController();\r\n        socket = io(ENDPOINT);\r\n        if(initialRun.current)\r\n        {\r\n            await axios.get('/user/getRoomId')\r\n            .then(res=>res.data)\r\n            .catch(err=>console.log(err))\r\n            .then(res=>{\r\n                socket.emit('join',{roomId:res.roomInfo._id});\r\n            });\r\n            \r\n            initialRun.current = false;\r\n        }\r\n        socket.on('changeState',state=>{\r\n            setPlay(state);\r\n        });\r\n        socket.on('refreshPage',e=>{\r\n            window.location.reload();\r\n        })\r\n        socket.on('update',time=>{\r\n            if(urlRef.current===\"\")\r\n            {\r\n                urlRef.current = time.url;\r\n                setReady(true);\r\n                readyToPlay.current = true;\r\n                setBuffering(false);\r\n                return;\r\n            }\r\n            if(readyToPlay.current)\r\n            {\r\n                if(time.time>videoRef.current.getCurrentTime())\r\n                {\r\n                    if(videoRef.current.getCurrentTime()<(time.time)-1){\r\n                        videoRef.current.seekTo(String(time.time),'seconds');\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        socket.on('updateProgress',pointed=>{\r\n            videoRef.current.seekTo(pointed,'seconds');\r\n        })\r\n\r\n        socket.on('onlineUrl',data=>{\r\n            if(data===\"\")\r\n            {\r\n                document.getElementById('url').value = \"\";\r\n                return;\r\n            }\r\n            setReady(true);\r\n            urlRef.current=data;\r\n            setUrl(data);\r\n            document.getElementById('url').value = \"\";\r\n        })\r\n\r\n      return function cancel(){\r\n          ac.abort();\r\n      }\r\n  },[])\r\n\r\n  function displayProgress()\r\n  {\r\n      socket.emit('keepUpdate',{time:videoRef.current.getCurrentTime(),url:url});\r\n      const point = document.getElementById('progress-point');\r\n      const value = videoRef.current.getCurrentTime()/(videoRef.current.getDuration()/100);\r\n      point.style.left = value+\"%\";\r\n  }\r\n   \r\n  function handleProgressChange(event)\r\n  {\r\n      const progressBarWidth = document.getElementById(\"progress-bar\");\r\n      const choose = event.nativeEvent.offsetX;\r\n      const pointed = (choose/progressBarWidth.offsetWidth)*videoRef.current.getDuration();     \r\n      socket.emit('changeProgress',pointed) \r\n      setPlay(true);\r\n  }\r\n  function handleVideoState()\r\n  {\r\n    socket.emit('changeVideoState',play);\r\n  }\r\n  \r\n  function submitUrl(event){\r\n    event.preventDefault();\r\n    const choosenUrl = document.getElementById('url').value;\r\n    socket.emit('onlineUrl',choosenUrl);\r\n  }\r\n\r\n  async function handleChooseMovie(filename)\r\n  {\r\n    \r\n    setReady(true);\r\n    const choosenUrl = \"/videoFs/choose/\"+filename;\r\n    socket.emit('onlineUrl',choosenUrl);\r\n  }\r\n  function handleUrlDiv()\r\n  {\r\n      let state = !openUrl;\r\n    if(state)\r\n    {\r\n        document.getElementById('submitUrl').style.marginLeft =0;\r\n    }\r\n    else\r\n    {\r\n        document.getElementById('submitUrl').style.marginLeft =\"-380px\";\r\n    };\r\n      setOpenUrl(!openUrl);  \r\n  }\r\n\r\n    function handlePlayerVolume()\r\n    {\r\n        const value=document.getElementById(\"volume\").value;\r\n        const actualVolume = parseFloat(value/100);\r\n        if(actualVolume===0)\r\n        {\r\n            setIsMuted(true);\r\n        }\r\n        else\r\n        {\r\n            setIsMuted(false);\r\n        }\r\n        if(value>50)\r\n        {\r\n            setIsLoud(true);\r\n        }\r\n        else\r\n        {\r\n            setIsLoud(false);\r\n        }\r\n        setVolume(actualVolume);\r\n    }\r\n    function handleMute()\r\n    {\r\n        let state = !isMuted;\r\n        if(state)\r\n        {\r\n            setVolume(0);\r\n            document.getElementById('volume').value =0;\r\n        }\r\n        else\r\n        {\r\n            setVolume(0.5);\r\n            document.getElementById('volume').value =50;\r\n        }\r\n        setIsMuted(!isMuted);\r\n    }\r\n\r\n    function handleBigScreen()\r\n    {\r\n        let state = !isFullScreen;\r\n        const controls = document.getElementById('controls');\r\n        if(state)\r\n        {\r\n            handle.enter();\r\n            controls.style.bottom=\"-150px\";\r\n            document.getElementById('progress-point').style.background=\"white\";\r\n            document.getElementById('control-btn').style.color=\"white\";\r\n            document.getElementById('control-vlm').style.color=\"white\";\r\n            document.getElementById('fullscreen-btn').style.color=\"white\";\r\n        }\r\n        else\r\n        {\r\n            handle.exit();\r\n            controls.style.bottom=\"-50px\";\r\n            document.getElementById('progress-point').style.background=\"black\";\r\n            document.getElementById('control-btn').style.color=\"black\";\r\n            document.getElementById('control-vlm').style.color=\"black\";\r\n            document.getElementById('fullscreen-btn').style.color=\"black\";\r\n        }\r\n        setIsFullScreen(!isFullScreen);\r\n    }\r\n    return <div className=\"cinema-div\">\r\n        <VideoList handleChooseMovie={handleChooseMovie} socket={socket}/>\r\n        \r\n        <VideoUploadDiv/>\r\n        <div className=\"submit-url\" id=\"submitUrl\">\r\n            <form onSubmit={submitUrl}>\r\n            <input type=\"text\" id=\"url\" placeholder=\"enter url\"/>\r\n            <Button\r\n                type=\"submit\"\r\n                variant=\"outlined\"\r\n                id=\"submit-url-btn\"\r\n            > submit</Button>\r\n            </form>\r\n            <IconButton size=\"small\" id=\"handleUrlDiv\" onClick={handleUrlDiv}>\r\n                {openUrl?<ArrowLeftIcon/>:<ArrowRightIcon/>}\r\n            </IconButton>\r\n        </div>\r\n        <Button variant=\"outlined\" color=\"black\" href=\"/\" id=\"homeBtn\">\r\n        <HomeIcon/>\r\n         </Button>\r\n        <FullScreen\r\n        handle={handle}\r\n        >\r\n        <div className=\"video-player\" id=\"video-player\">\r\n        {buffering&&ready&&<div className=\"no-video\">\r\n            <h1>Loading....</h1>\r\n        </div>}\r\n        {ready?\r\n        <ReactPlayer \r\n            ref={videoRef}\r\n            playing={play}\r\n            height=\"100%\"\r\n            width= \"100%\"\r\n            url={urlRef.current}\r\n            volume={volume}\r\n            onProgress={displayProgress}\r\n            onReady ={()=>setBuffering(false)}   \r\n            onError={()=>setReady(false)}\r\n        />:\r\n        <div className=\"no-video\">\r\n            <h2>No Video</h2>\r\n        </div>\r\n        }\r\n        {/* <video src=\"/videoFs/getVideos\" type=\"video/mp4\"/> */}\r\n            <div style={{display:\"flex\"}} className=\"progress-bar-div\" id=\"controls\">\r\n                <IconButton onClick={handleVideoState} id=\"control-btn\" style={{color:\"black\"}}>{play?<PauseIcon/>:<PlayArrowIcon/>}</IconButton>\r\n                <IconButton onClick={handleMute} id=\"control-vlm\" style={{color:\"black\"}}>{isMuted?<VolumeOffIcon/>:isLoud?<VolumeUpIcon/>:<VolumeMuteIcon/>}</IconButton>\r\n                <input type=\"range\" min=\"0\" max=\"100\" id=\"volume\" onChange={handlePlayerVolume}/>\r\n                <div id=\"progress-bar\" className=\"progress-bar status\" onClick={ready?handleProgressChange:\"\"}>\r\n                <div id=\"progress-point\" className=\"progress-point\"></div>\r\n                </div>\r\n                <IconButton onClick={handleBigScreen} id=\"fullscreen-btn\" style={{color:\"black\"}}>{isFullScreen?<FullscreenExitIcon/>:<FullscreenIcon/>}</IconButton>\r\n            </div>\r\n        </div>\r\n        </FullScreen>\r\n    </div>\r\n}","import React, { useState, useEffect } from \"react\";\r\n\r\nconst Checkmark = ({ selected }) => (\r\n  <div\r\n    style={\r\n      selected\r\n        ? { left: \"4px\", top: \"4px\", position: \"absolute\", zIndex: \"1\" }\r\n        : { display: \"none\" }\r\n    }\r\n  >\r\n    <svg\r\n      style={{ fill: \"white\", position: \"absolute\" }}\r\n      width=\"24px\"\r\n      height=\"24px\"\r\n    >\r\n      <circle cx=\"12.5\" cy=\"12.2\" r=\"8.292\" />\r\n    </svg>\r\n    <svg\r\n      style={{ fill: \"#06befa\", position: \"absolute\" }}\r\n      width=\"24px\"\r\n      height=\"24px\"\r\n    >\r\n      <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\" />\r\n    </svg>\r\n  </div>\r\n);\r\n\r\nconst imgStyle = {\r\n  transition: \"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s\"\r\n};\r\nconst selectedImgStyle = {\r\n  transform: \"translateZ(0px) scale3d(0.9, 0.9, 1)\",\r\n  transition: \"transform .135s cubic-bezier(0.0,0.0,0.2,1),opacity linear .15s\"\r\n};\r\nconst cont = {\r\n  backgroundColor: \"#eee\",\r\n  cursor: \"pointer\",\r\n  overflow: \"hidden\",\r\n  position: \"relative\"\r\n};\r\n\r\nconst SelectedImage = ({\r\n  index,\r\n  photo,\r\n  margin,\r\n  direction,\r\n  top,\r\n  left,\r\n  selected,\r\n  handleChooseNotToDeleteFile,\r\n  handleChooseToDeleteFile\r\n}) => {\r\n  const [isSelected, setIsSelected] = useState(selected);\r\n  const actualHeight = (200-photo.height)-photo.height;\r\n  //calculate x,y scale\r\n  const sx = (100 - (30 / photo.width) * 100) / 100;\r\n  const sy = (100 - (30 / photo.height) * 100) / 100;\r\n  selectedImgStyle.transform = `translateZ(0px) scale3d(${sx}, ${sy}, 1)`;\r\n\r\n  if (direction === \"column\") {\r\n    cont.position = \"absolute\";\r\n    cont.left = left;\r\n    cont.top = top;\r\n  }\r\n\r\n  const handleOnClick = e => {\r\n    setIsSelected(!isSelected);\r\n    if(!isSelected)\r\n    {\r\n        handleChooseToDeleteFile(index);\r\n    }\r\n    else{\r\n        handleChooseNotToDeleteFile(index);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    setIsSelected(selected);\r\n  }, [selected]);\r\n\r\n  return (\r\n    <div\r\n      style={{ margin, height: actualHeight, width: photo.width, ...cont }}\r\n      className={!isSelected ? \"not-selected\" : \"\"}\r\n    >\r\n      <Checkmark selected={isSelected ? true : false} />\r\n      <img\r\n        alt={photo.title}\r\n        style={\r\n          isSelected ? { ...imgStyle, ...selectedImgStyle } : { ...imgStyle }\r\n        }\r\n        {...photo}\r\n        onClick={handleOnClick}\r\n      />\r\n      <style>{`.not-selected:hover{outline:2px solid #06befa}`}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SelectedImage;\r\n","import '../../css/createPost.css';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport NativeSelect from '@material-ui/core/NativeSelect';\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport React, { useState,useCallback, useRef ,useEffect } from 'react';\r\nimport Gallery from 'react-photo-gallery';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AddPhotoAlternateIcon from '@material-ui/icons/AddPhotoAlternate';\r\nimport SelectedImage from '../SelectedImage';\r\nimport Button from '@material-ui/core/Button';  \r\nimport axios from 'axios';\r\n\r\nexport default function CreatePost(props)\r\n{\r\n    const{setPost,handlePost,userInfo,setIsPosting,setIsEditing,isEditing,postData,setPostData} = props;\r\n\r\n    const [text,setText] = useState('');\r\n    const [uploadedFiles,setUploadedFiles] = useState([]);\r\n    const [feeling,setFeeling] = useState();\r\n    const [willBeDeletedFiles, setWillBeDeletedFiles] = useState([]);\r\n    const [deletedExistingFiles, setDeletedExistingFiles] = useState([]);\r\n    const [selectAll] = useState(false);\r\n\r\n    const formRef = useRef();\r\n\r\n    const imageRenderer = useCallback(\r\n        ({ index, left, top, key, photo }) => (\r\n          <SelectedImage\r\n            selected={selectAll ? true : false}\r\n            key={key}\r\n            margin={\"2px\"}\r\n            index={index}\r\n            photo={photo}\r\n            left={left}\r\n            top={top}\r\n            handleChooseNotToDeleteFile={handleChooseNotToDeleteFile}\r\n            handleChooseToDeleteFile={handleChooseToDeleteFile}\r\n          />\r\n        ),\r\n        [selectAll,handleChooseNotToDeleteFile,handleChooseToDeleteFile]\r\n      );\r\n\r\n          useEffect(()=>{\r\n            if(isEditing)\r\n            {\r\n              setText(postData.post.text);\r\n              setFeeling(postData.post.feeling);\r\n              if(postData.post.fileId){\r\n              setUploadedFiles(postData.post.fileId.map((id,index)=>{\r\n                // console.log(postData.url[index]);\r\n                return {src:postData.url[index],width:1,height:1,fileId:id};\r\n              }))\r\n            }\r\n            }\r\n          },[])\r\n\r\n    function handleChooseToDeleteFile(index) {\r\n        setWillBeDeletedFiles(prevData => {\r\n          return [...prevData, index];\r\n        })\r\n      }\r\n  \r\n      function handleChooseNotToDeleteFile(index) {\r\n        setWillBeDeletedFiles(prevData => {\r\n          return prevData.filter(val => {\r\n            return val !== index;\r\n          })\r\n        })\r\n      }\r\n\r\n    function handleUploadFiles(event)\r\n    {\r\n        const file = event.target.files[0];\r\n        if(file)\r\n        {\r\n            const re =  /\\.(gif|jpe?g|tiff?|png|webp|bmp)$/i;\r\n            if (re.test(file.name)) {\r\n                setUploadedFiles(prevData => {\r\n                  return [...prevData, {src: URL.createObjectURL(file), file: file, width:1,height:1}];\r\n                })\r\n              } else {\r\n                alert('only upload image files.')\r\n              }\r\n        }\r\n\r\n    }\r\n\r\n    async function handleDeleteChosenFiles() {\r\n        const tempDeletedFiles = [...willBeDeletedFiles].sort();\r\n        const tempUploadedFiles = [...uploadedFiles];\r\n        for (var i = tempDeletedFiles.length - 1; i >= 0; i--) {\r\n          if (tempUploadedFiles[tempDeletedFiles[i]].fileId) {\r\n            await setDeletedExistingFiles(prevData => {\r\n              return [...prevData, tempUploadedFiles[tempDeletedFiles[i]].fileId];\r\n            })\r\n          }\r\n          tempUploadedFiles.splice(tempDeletedFiles[i], 1);\r\n        }\r\n        setUploadedFiles(tempUploadedFiles);\r\n        setWillBeDeletedFiles([]);\r\n      }\r\n\r\n      async function togglePost()\r\n      {\r\n        if(text==='')\r\n        {\r\n          alert(\"Please enter some text\");\r\n          return;\r\n        }\r\n        const formdata = new FormData(formRef.current);\r\n        if(isEditing)\r\n        { \r\n          formdata.set('postId',postData.post._id);\r\n          formdata.set('text',text);\r\n          formdata.set('feeling',feeling);\r\n          for (var i = 0; i < deletedExistingFiles.length; i++) {\r\n            formdata.append('deletedFile[]', deletedExistingFiles[i]);\r\n          }\r\n          for (var j = 0; j < uploadedFiles.length; j++) {\r\n            if (uploadedFiles[j].file) {\r\n              formdata.append('fileInput[]', uploadedFiles[j].file);\r\n            } else {\r\n              formdata.append('fileInput[]', uploadedFiles[j].fileId);\r\n            }\r\n          }\r\n          await axios({\r\n            method:'post',\r\n            url:'/post/editPost',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n          })\r\n          .then(res=>res.data)\r\n          .catch(err=>console.log(err))\r\n          .then(res=>{\r\n            if(res.result)\r\n            {\r\n              setPost(prevData=>{\r\n                const temp=[];\r\n                for(let i =0;i<prevData.length;i++)\r\n                {\r\n                  if(prevData[i]._id===res.result.docs._id)\r\n                  {\r\n                    temp.push(res.result.docs)\r\n                  }\r\n                  else\r\n                  {\r\n                    temp.push(prevData[i]);\r\n                  }\r\n                }\r\n                return temp;\r\n              })\r\n              handlePost();\r\n            }\r\n            else\r\n            {\r\n              alert(\"Failed to edit post\");\r\n            }\r\n          })\r\n          .catch(err=>console.log(err));\r\n        }\r\n        else\r\n        {\r\n            const formdata = new FormData(formRef.current);\r\n            for(let i =0;i<uploadedFiles.length;i++)\r\n            {\r\n                formdata.append('fileInput[]',uploadedFiles[i].file);\r\n            }\r\n            \r\n            await axios({\r\n                method:'post',\r\n                url:'/post/createPost',\r\n                data:formdata\r\n            })\r\n            .then(res=>res.data)\r\n            .catch(err=>console.log(err))\r\n            .then(res=>{\r\n              if(res)\r\n              {\r\n                alert(\"Memory Created!\");\r\n                setPost(prevData=>{\r\n                  return[res,...prevData];\r\n                })\r\n              }\r\n              else\r\n              {\r\n                alert(\"Opps something went wrong\")\r\n              }\r\n            })\r\n            .catch(err=>console.log(err))\r\n            handlePost();\r\n        }\r\n      }\r\n    return<div className=\"create-div\">\r\n           <div className=\"create-title\">\r\n               <h3>{isEditing?\"Edit\":\"Create\"} Memory</h3>\r\n               <IconButton onClick={handlePost} id=\"create-close-btn\"><CloseIcon/></IconButton>\r\n            </div>\r\n            <form ref={formRef} >\r\n                <div className=\"create-feeling-div\">\r\n                    <div className=\"create-profile-pic\">\r\n                    <ReactAvatar\r\n                    src=\"/gridFs/getProfile\"\r\n                    />\r\n                    </div>\r\n                    <div className=\"create-greeting\">\r\n                        <p>Hi, {userInfo.nickname} how are you feeling today?</p>\r\n                    </div>\r\n                    <div className=\"create-select\">\r\n                        <NativeSelect\r\n                        value={feeling}\r\n                        onChange={(event)=>setFeeling(event.target.value)}\r\n                        id=\"create-feeling\"\r\n                        name=\"feeling\"\r\n                        >\r\n                        <option aria-label=\"None\" value=\"\" />\r\n                        <option value=\"happy\">Happy 😀 </option>\r\n                        <option value=\"sad\">Sad ☹️</option>\r\n                        <option value=\"surprise\">Surprised 😮</option>\r\n                        <option value=\"meh\">Meh 😕</option>\r\n                        <option value=\"annoyed\">Annoyed 🙄</option>\r\n                        <option value=\"sleepy\">Sleepy 😴</option>\r\n                        <option value=\"love\">Love 🥰</option>\r\n                        <option value=\"touched\">Touched 😭</option>\r\n                        <option value=\"shy\">Shy 😌</option>\r\n                        <option value=\"amazed\">Amazed 🤩</option>\r\n                        </NativeSelect>\r\n                    </div>\r\n                </div>\r\n                <div className=\"create-textarea\">\r\n                        <textarea placeholder=\"What's on your mind?\" rows=\"10\" value={text} onChange={(e)=>setText(e.target.value)} name=\"text\" id=\"text\"/>\r\n                </div>\r\n                <div className=\"create-gallery-div\">\r\n                <Gallery photos={uploadedFiles} renderImage={imageRenderer} id=\"create-gallery\"/> \r\n                </div>\r\n                <div className=\"create-btn-div\">\r\n                <IconButton id=\"create-btn\" onClick={()=>document.getElementById('create-photo').click()}><AddPhotoAlternateIcon/></IconButton>\r\n                <input type=\"file\" hidden id=\"create-photo\" onChange={handleUploadFiles}/>\r\n                {uploadedFiles.length>0&&<IconButton id=\"create-btn\" onClick={handleDeleteChosenFiles}><DeleteIcon/></IconButton>}\r\n                </div>\r\n                <div className=\"create-post-div\">\r\n                <Button variant=\"contained\" id=\"create-post-btn\" onClick={togglePost}>\r\n                Post\r\n                </Button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n}","import '../../css/memoryPost.css'\r\nimport ReactAvatar from '@material-ui/core/Avatar';\r\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ImageGallery from \"react-image-gallery\";\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\n\r\nexport default function MemoryPost(props)\r\n{\r\n    const{post,userId,setIsEditing,setPostData,setIsPosting,setPost} = props\r\n    const [openMore,setOpenMore] = useState(false);\r\n    const [url,setUrl] = useState([]);\r\n\r\n    const emojiMap={\r\n        \"happy\": \"😀\",\r\n        \"sad\": \"☹️\",\r\n        \"surprise\": \"😮\",\r\n        \"meh\": \"😕\",\r\n        \"annoyed\": \"🙄\",\r\n        \"sleepy\": \"😴\",\r\n        \"love\": \"🥰\",\r\n        \"touched\": \"😭\",\r\n        \"shy\": \"😌\",\r\n        \"amazed\": \"🤩\"\r\n    }\r\n\r\n    const monthMap = {\r\n        \"01\": \"January\",\r\n        \"02\": \"February\",\r\n        \"03\": \"March\",\r\n        \"04\": \"April\",\r\n        \"05\": \"May\",\r\n        \"06\": \"June\",\r\n        \"07\": \"July\",\r\n        \"08\": \"August\",\r\n        \"09\": \"September\",\r\n        \"10\": \"October\",\r\n        \"11\": \"November\",\r\n        \"12\": \"December\",\r\n      }\r\n    \r\n\r\n    useEffect(async()=>{\r\n        if(post.fileId)\r\n        {\r\n        let temp =[];\r\n       await post.fileId.map(id=>{\r\n            let url = \"/post/getPostImage/\"+id;\r\n            temp.push(url);\r\n        })\r\n        setUrl(temp);\r\n        }\r\n    },[post])\r\n    \r\n    function constructGalleryUrls(fileId)\r\n    {\r\n        return fileId.map(id=>{\r\n            let url = \"/post/getPostImage/\"+id;\r\n            return {original:url};\r\n        })\r\n        \r\n    }\r\n    function handleEdit()\r\n    {\r\n        setPostData({post:post,url:url});\r\n        setIsEditing(true);\r\n        setIsPosting(true);\r\n        setOpenMore(false);\r\n    }\r\n    async function deletePost()\r\n    {\r\n        const formdata = new FormData();\r\n        formdata.append('postId',post._id);\r\n        if(post.fileId)\r\n        {\r\n            for(let i=0;i<post.fileId.length;i++)\r\n            {\r\n                formdata.append('fileId[]',post.fileId[i])\r\n            }\r\n        }\r\n        await axios({\r\n            method:'post',\r\n            url:'/post/deletePost',\r\n            data:formdata,\r\n            headers:{'Content-Type': 'multipart/form-data'}\r\n        })\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            if(res.status)\r\n            {\r\n                setPost(prevData=>{\r\n                    return prevData.filter(posts=>{\r\n                        return posts._id !== post._id;\r\n                    })\r\n                })\r\n\r\n                alert(\"Memory deleted\");\r\n            }\r\n            else{\r\n                alert(\"Opps something went wrong with the server!\")\r\n            }\r\n        })\r\n    }\r\n\r\n    function formatDate(date) {\r\n        const today = new Date(parseInt(Date.parse(date), 10));\r\n        var dd = String(today.getDate()).padStart(2, '0');\r\n        var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n        var yyyy = today.getFullYear();\r\n        return dd + \" \" + monthMap[mm]+\" \"+yyyy\r\n      }\r\n\r\n    return<div className=\"post-div\">\r\n        {openMore&&<div className=\"post-more-div\">\r\n            <div className=\"post-more-option edit\" onClick={handleEdit}>\r\n            Edit Memory\r\n            </div>\r\n            <div className=\"post-more-option delete\" onClick={deletePost}>\r\n            Delete Memory\r\n            </div>\r\n            </div>}\r\n        <IconButton id=\"post-more\" onClick={()=>setOpenMore(!openMore)}><MoreHorizIcon fontSize=\"medium\"/></IconButton>\r\n        <div className=\"post-header\">\r\n            {userId===post.userId?<ReactAvatar src=\"/gridFs/getProfile\" id=\"post-avatar\"/>:<ReactAvatar src=\"/gridFs/getPartnerProfile\" id=\"post-avatar\"/>}\r\n           <div className=\"post-desc\">\r\n            <div className=\"post-feeling\">\r\n                <h3>{post.nickname}</h3>\r\n                {post.feeling&&<h3> &nbsp;• &nbsp;is feeling {post.feeling}&nbsp;{emojiMap[post.feeling]}</h3>}  \r\n            </div>\r\n              <div className=\"post-time\">\r\n                <p>{formatDate(post.timeOfCreation)}</p>\r\n              </div>\r\n            </div> \r\n        </div>\r\n        <div className=\"post-text\">\r\n        {post.text}\r\n        </div>\r\n        <div className=\"post-images\">\r\n        {post.fileId&&\r\n            <ImageGallery items={constructGalleryUrls(post.fileId)} showFullscreenButton={false} showPlayButton={false} showThumbnails={false} className=\"post-gallery\" />\r\n        }\r\n        </div>\r\n    </div>\r\n}","import {useEffect, useState, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport NavBar from '../Navbar';\r\nimport '../../css/memoryBook.css';\r\nimport CreatePost from './CreatePost';\r\nimport MemoryPost from './MemoryPost';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nexport default function MemoryBook()\r\n{\r\n    const [userInfo,setUserInfo] = useState();\r\n    const [partnerInfo,setPartnerInfo] = useState();\r\n    const [postData,setPostData] = useState();\r\n    const [isEditing,setIsEditing] = useState(false);\r\n    const [isPosting,setIsPosting] = useState(false);\r\n    const [posts,setPosts] = useState([]);\r\n    const [havePartner,setHavePartner] = useState(false);\r\n\r\n    const formRef = useRef();\r\n\r\n\r\n   \r\n\r\n\r\n    useEffect(()=>{\r\n         axios.get('/auth/isLoggedIn')\r\n        .then(res=>res.data)\r\n        .catch(err=>console.log(err))\r\n        .then(res=>{\r\n            if(res.isLoggedIn)\r\n            {\r\n                if(res.user.partner!==null)\r\n                {\r\n                    setHavePartner(true);\r\n                }\r\n                setUserInfo(res.user);\r\n                setPartnerInfo(res.partnerInfo);\r\n\r\n                axios({\r\n                    method:'post',\r\n                    url:'/post/getPosts',\r\n                })\r\n                .then(res=>res.data)\r\n                .catch(err=>console.log(err))\r\n                .then(res=>{\r\n                    if(res.success)\r\n                    {\r\n                        setPosts(res.posts)\r\n                    }\r\n                })\r\n            }\r\n        })\r\n    },[])  \r\n\r\n    function handlePost()\r\n    {\r\n        setIsPosting(false);\r\n        setIsEditing(false);\r\n        setPostData();\r\n    }\r\n    return <div className=\"memoryBook\">\r\n        {isPosting&&<CreatePost  setPostData={setPostData} setPost={setPosts} postData={postData} handlePost={handlePost} userInfo={userInfo} setIsPosting={setIsPosting} isEditing={isEditing} setIsEditing={setIsEditing}/>}\r\n        <div className=\"memoryBook-div\" id=\"memoryBook\" style={{opacity:isPosting||isEditing?\"0.3\":\"1\"}}>\r\n            <NavBar havePartner={havePartner}/>\r\n                <div className=\"postDiv\">\r\n                    <div className=\"post-option\">\r\n                    <h3>Post Some Memorable Moment Here</h3>\r\n                    <Button variant=\"contained\" id=\"memory-create-post\" onClick={()=>setIsPosting(true)}>\r\n                    Create Memory 🤍\r\n                    </Button>\r\n                    </div>\r\n            </div>\r\n            {posts.map(post=>{\r\n              return  <MemoryPost key={post._id}  setPost={setPosts} setPostData={setPostData} setIsPosting={setIsPosting} isEditing={isEditing} setIsEditing={setIsEditing} post={post} userId={userInfo._id}/>\r\n            })}\r\n        </div>\r\n    </div>\r\n}","import { Route, Switch } from 'react-router-dom';\r\nimport Login from './components/Login';\r\nimport Home from './components/Home';\r\nimport UserProfileForm from './components/UserProfileForm';\r\nimport ChatRoom from './components/ChatRoom';\r\nimport {ContextProvider} from './SocketContext';\r\nimport Cinema from './components/Cinema';\r\nimport MemoryBook from './components/MemoryBook/MemoryBook';\r\n// import './App.css';\r\n\r\nexport default function App(props) {\r\n  return (\r\n    <main>\r\n      <Switch>\r\n        <Route path=\"/\" exact component={Home}/>\r\n        <Route path=\"/login\" exact component={Login}/>\r\n        <Route path=\"/userProfileForm\" exact component={UserProfileForm}/>\r\n        <Route path=\"/cinema\" exact component={Cinema}/>\r\n        <Route path=\"/memoryBook\" exact component={MemoryBook}/>\r\n        <ContextProvider>\r\n        <Route path=\"/chatRoom\" exact component={ChatRoom}/>\r\n        </ContextProvider>\r\n      </Switch>\r\n    </main>\r\n  )\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import ReactDOM from 'react-dom';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n \r\n  // <ContextProvider>\r\n  <BrowserRouter>\r\n    <App />\r\n  </BrowserRouter>\r\n  // </ContextProvider>  \r\n  ,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}